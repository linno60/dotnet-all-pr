{"content":"<div><div class=\"content\">\n<div class=\"NOTE\"><h5>Note</h5><p>This guide was written for F# 3.0 and will be updated.  See <a href=\"http://fsharp.github.io/FSharp.Data/\" data-linktype=\"external\">FSharp.Data</a> for up-to-date, cross-platform type providers.</p>\n</div>\n<div class=\"NOTE\"><h5>Note</h5><p>The API reference links will take you to MSDN.  The docs.microsoft.com API reference is not complete.</p>\n</div>\n<p>This walkthrough shows you how to use the Web Services Description Language (WSDL) type provider that is available in F# 3.0 to access a WSDL service. In other .NET languages, you generate the code to access the web service by calling svcutil.exe, or by adding a web reference in, for example, a C# project to get Visual Studio to call svcutil.exe for you. In F#, you have the additional option of using the WSDL type provider, so as soon as you write the code that creates the WsdlService type, the types are generated and become available. This process relies on the service being available when you are writing the code.</p>\n<p>This walkthrough illustrates the following tasks. You must complete them in this order for the walkthrough to succeed:</p>\n<ul>\n<li><p>Creating the project\n<br></p>\n</li>\n<li><p>Configuring the type provider\n<br></p>\n</li>\n<li><p>Calling the web service, and processing the results\n<br></p>\n</li>\n</ul>\n<h2 id=\"creating-the-project\">Creating the project</h2>\n<p>In the step, you create a project and add the appropriate references to use a WSDL type provider.</p>\n<h4 id=\"to-create-and-set-up-an-f-project\">To create and set up an F# project</h4>\n<ol>\n<li><p>Open a new F# Console Application project.\n<br></p>\n</li>\n<li><p>In <strong>Solution Explorer</strong>, open the shortcut menu for the project&#39;s <strong>Reference</strong> node, and then choose <strong>Add Reference</strong>.\n<br></p>\n</li>\n<li><p>In the <strong>Assemblies</strong> area, choose <strong>Framework</strong>, and then, in the list of available assemblies, choose <strong>System.Runtime.Serialization</strong> and <strong>System.ServiceModel</strong>.\n<br></p>\n</li>\n<li><p>In the <strong>Assemblies</strong> area, choose <strong>Extensions</strong>.\n<br></p>\n</li>\n<li><p>In the list of available assemblies, choose <strong>FSharp.Data.TypeProviders</strong>, and then choose the <strong>OK</strong> button to add references to these assemblies.\n<br></p>\n</li>\n</ol>\n<h2 id=\"configuring-the-type-provider\">Configuring the type provider</h2>\n<p>In this step, you use the WSDL type provider to generate types for the TerraServer web service.</p>\n<h4 id=\"to-configure-the-type-provider-and-generate-types\">To configure the type provider and generate types</h4>\n<ol>\n<li>Add the following line of code to open the type provider namespace.\n<br></li>\n</ol>\n<pre class=\"loading\"><code class=\"lang-fsharp\">open System\nopen System.ServiceModel\nopen Microsoft.FSharp.Linq\nopen Microsoft.FSharp.Data.TypeProviders\n</code></pre><ol start=\"2\">\n<li>Add the following line of code to invoke the type provider with a web service. In this example, use the TerraServer web service.\n<br></li>\n</ol>\n<pre class=\"loading\"><code class=\"lang-fsharp\">type TerraService = WsdlService&lt;&quot; HYPERLINK &quot;http://terraserver-usa.com/TerraService2.asmx?WSDL&quot; http://msrmaps.com/TerraService2.asmx?WSDL&quot;&gt;\n</code></pre><p>  A red squiggle appears under this line of code if the service URI is misspelled or if the service itself is down or isnâ€™t performing. If you point to the code, an error message describes the problem. You can find the same information in the <strong>Error List</strong> window or in the <strong>Output Window</strong> after you build.\n<br>  There are two ways to specify configuration settings for a WSDL connection, by using the app.config file for the project, or by using the static type parameters in the type provider declaration. You can use svcutil.exe to generate appropriate configuration file elements. For more information about using svcutil.exe to generate configuration information for a web service, see <a href=\"https://msdn.microsoft.com/library/aa347733.aspx\" data-linktype=\"external\">ServiceModel Metadata Utility Tool &#40;Svcutil.exe&#41;</a>. For a full description of the static type parameters for the WSDL type provider, see <a href=\"https://msdn.microsoft.com/visualfsharpdocs/conceptual/wsdlservice-type-provider-%5bfsharp%5d\" data-linktype=\"external\">WsdlService Type Provider</a>.\n<br></p>\n<h2 id=\"calling-the-web-service-and-processing-the-results\">Calling the web service, and processing the results</h2>\n<p>Each web service has its own set of types that are used as parameters for its method calls. In this step, you prepare these parameters, call a web method, and process the information that it returns.</p>\n<h4 id=\"to-call-the-web-service-and-process-the-results\">To call the web service, and process the results</h4>\n<ol>\n<li>The web service might time out or stop functioning, so you should include the web service call in an exception handling block. Write the following code to try to get data from the web service.\n<br></li>\n</ol>\n<pre class=\"loading\"><code class=\"lang-fsharp\">try\n  let terraClient = TerraService.GetTerraServiceSoap ()\n  let myPlace = new TerraService.ServiceTypes.msrmaps.com.Place(City = &quot;Redmond&quot;, State = &quot;Washington&quot;, Country = &quot;United States&quot;)\n  let myLocation = terraClient.ConvertPlaceToLonLatPt(myPlace)\n  printfn &quot;Redmond Latitude: %f Longitude: %f&quot; (myLocation.Lat) (myLocation.Lon)\nwith\n| :? ServerTooBusyException as exn -&gt;\n  let innerMessage =\n    match (exn.InnerException) with\n    | null -&gt; &quot;&quot;\n    | innerExn -&gt; innerExn.Message\n  printfn &quot;An exception occurred:\\n %s\\n %s&quot; exn.Message innerMessage\n| exn -&gt; printfn &quot;An exception occurred: %s&quot; exn.Message\n</code></pre><p>Notice that you create the data types that are needed for the web service, such as <strong>Place</strong> and <strong>Location</strong>, as nested types under the WsdlService type <strong>TerraService</strong>.\n<br></p>\n<h2 id=\"see-also\">See Also</h2>\n<p><a href=\"https://msdn.microsoft.com/visualfsharpdocs/conceptual/wsdlservice-type-provider-%5bfsharp%5d\" data-linktype=\"external\">WsdlService Type Provider</a></p>\n<p><a href=\"index\" data-linktype=\"relative-path\">Type Providers</a></p>\n</div></div>","outputRootRelativePath":"../../../../","pageMetadata":"<meta name=\"author\" content=\"cartermp\">\r\n<meta name=\"ms.author\" content=\"phcart\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc2.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.devlang\" content=\"fsharp\">\r\n<meta name=\"ms.assetid\" content=\"63374fa9-8fb8-43ac-bcb9-ef2290d9f851\">\r\n<meta name=\"description\" content=\"Walkthrough - Accessing a Web Service by Using Type Providers (F#)\">\r\n<meta name=\"keywords\" content=\"visual f#, f#, functional programming\">\r\n<meta name=\"ms.topic\" content=\"language-reference\">\r\n<meta name=\"ms.date\" content=\"05/16/2016\">\r\n<meta name=\"ms.technology\" content=\"devlang-fsharp\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2016-12-15 06:00 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/fsharp/tutorials/type-providers/accessing-a-web-service.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/fsharp/tutorials/type-providers/accessing-a-web-service.md\">\r\n<meta name=\"document_id\" content=\"46e1ea4d-3ef3-2cb7-57f5-a70b18c774e2\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../../toc2.json\">\r\n","rawMetadata":{"author":"cartermp","ms.author":"phcart","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","title":"Walkthrough - Accessing a Web Service by Using Type Providers (F#) | Microsoft Docs","ms.devlang":"fsharp","ms.assetid":"63374fa9-8fb8-43ac-bcb9-ef2290d9f851","description":"Walkthrough - Accessing a Web Service by Using Type Providers (F#)","keywords":"visual f#, f#, functional programming","ms.topic":"language-reference","ms.date":"05/16/2016","ms.technology":"devlang-fsharp","ms.prod":".net","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"fixed absolute and msdn links (#1001)","commit_sha":"de0dab146fc811e895dc32f98f877db5e757f82b","commit_date":"2016-09-06 10:59:39 -0700"},{"author_name":"Phillip Carter","author_email":"phillip.carter@outlook.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Add Visual F# Conceptual Content (#900)","commit_sha":"c27bed7dbad6b24c55734fcab0333bd3a1de85d6","commit_date":"2016-08-12 17:06:05 -0700"}],"updated_at":"2016-12-15 06:00 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/cartermp","display_name":"Phillip Carter","id":"6309070"},"contributors":[{"profile_url":"https://github.com/cartermp","display_name":"Phillip Carter"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"}],"update_at":"12/15/2016"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/fsharp/tutorials/type-providers/accessing-a-web-service.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/fsharp/tutorials/type-providers/accessing-a-web-service.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/fsharp/tutorials/type-providers/accessing-a-web-service.md","document_id":"46e1ea4d-3ef3-2cb7-57f5-a70b18c774e2","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/fsharp/tutorials/type-providers/accessing-a-web-service","toc_asset_id":"articles/toc.json","toc_rel":"../../../toc.json","_op_ogTitle":"Walkthrough - Accessing a Web Service by Using Type Providers (F#)","_op_displayDate":"2016-5-16","_op_displayDate_source":"2016-05-16T00:00:00Z","_op_wordCount":681,"_op_rawTitle":"<h1 id=\"walkthrough-accessing-a-web-service-by-using-type-providers\" sourcefile=\"docs/fsharp/tutorials/type-providers/accessing-a-web-service.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"15\">Walkthrough: Accessing a Web Service by Using Type Providers</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/fsharp/tutorials/type-providers/accessing-a-web-service","fileRelativePath":"articles/fsharp/tutorials/type-providers/accessing-a-web-service.html"},"themesRelativePathToOutputRoot":"_themes/"}