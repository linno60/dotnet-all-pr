{"content":"<div><div class=\"content\">\n<p>This topic describes how to define and use constructors to create and initialize class and structure objects.</p>\n<h2 id=\"construction-of-class-objects\">Construction of Class Objects</h2>\n<p>Objects of class types have constructors. There are two kinds of constructors. One is the primary constructor, whose parameters appear in parentheses just after the type name. You specify other, optional additional constructors by using the <code>new</code> keyword. Any such additional constructors must call the primary constructor.</p>\n<p>The primary constructor contains <code>let</code> and <code>do</code> bindings that appear at the start of the class definition. A <code>let</code> binding declares private fields and methods of the class; a <code>do</code> binding executes code. For more information about <code>let</code> bindings in class constructors, see <a href=\"let-bindings-in-classes\" data-linktype=\"relative-path\"><code>let</code> Bindings in Classes</a>. For more information about <code>do</code> bindings in constructors, see <a href=\"do-bindings-in-classes\" data-linktype=\"relative-path\"><code>do</code> Bindings in Classes</a>.</p>\n<p>Regardless of whether the constructor you want to call is a primary constructor or an additional constructor, you can create objects by using a <code>new</code> expression, with or without the optional <code>new</code> keyword. You initialize your objects together with constructor arguments, either by listing the arguments in order and separated by commas and enclosed in parentheses, or by using named arguments and values in parentheses. You can also set properties on an object during the construction of the object by using the property names and assigning values just as you use named constructor arguments.</p>\n<p>The following code illustrates a class that has a constructor and various ways of creating objects.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\">// This class has a primary constructor that takes three arguments\n// and an additional constructor that calls the primary constructor.\ntype MyClass(x0, y0, z0) =\n    let mutable x = x0\n    let mutable y = y0\n    let mutable z = z0\n    do\n        printfn &quot;Initialized object that has coordinates (%d, %d, %d)&quot; x y z\n    member this.X with get() = x and set(value) = x &lt;- value\n    member this.Y with get() = y and set(value) = y &lt;- value\n    member this.Z with get() = z and set(value) = z &lt;- value\n    new() = MyClass(0, 0, 0)\n\n// Create by using the new keyword.\nlet myObject1 = new MyClass(1, 2, 3)\n// Create without using the new keyword.\nlet myObject2 = MyClass(4, 5, 6)\n// Create by using named arguments.\nlet myObject3 = MyClass(x0 = 7, y0 = 8, z0 = 9)\n// Create by using the additional constructor.\nlet myObject4 = MyClass()\n</code></pre><p>The output is as follows.</p>\n<pre class=\"loading\"><code class=\"lang-text\">Initialized object that has coordinates (1, 2, 3)\nInitialized object that has coordinates (4, 5, 6)\nInitialized object that has coordinates (7, 8, 9)\nInitialized object that has coordinates (0, 0, 0)\n</code></pre><h2 id=\"construction-of-structures\">Construction of Structures</h2>\n<p>Structures follow all the rules of classes. Therefore, you can have a primary constructor, and you can provide additional constructors by using <code>new</code>. However, there is one important difference between structures and classes: structures can have a default constructor (that is, one with no arguments) even if no primary constructor is defined. The default constructor initializes all the fields to the default value for that type, usually zero or its equivalent. Any constructors that you define for structures must have at least one argument so that they do not conflict with the default constructor.</p>\n<p>Also, structures often have fields that are created by using the <code>val</code> keyword; classes can also have these fields. Structures and classes that have fields defined by using the <code>val</code> keyword can also be initialized in additional constructors by using record expressions, as shown in the following code.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\">type MyStruct =\n    struct\n       val X : int\n       val Y : int\n       val Z : int\n       new(x, y, z) = { X = x; Y = y; Z = z }\n    end\n\nlet myStructure1 = new MyStruct(1, 2, 3)\n</code></pre><p>For more information, see <a href=\"explicit-fields-the-val-keyword\" data-linktype=\"relative-path\">Explicit Fields: The <code>val</code> Keyword</a>.</p>\n<h2 id=\"executing-side-effects-in-constructors\">Executing Side Effects in Constructors</h2>\n<p>A primary constructor in a class can execute code in a <code>do</code> binding. However, what if you have to execute code in an additional constructor, without a <code>do</code> binding? To do this, you use the <code>then</code> keyword.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\"> // Executing side effects in the primary constructor and\n// additional constructors.\ntype Person(nameIn : string, idIn : int) =\n    let mutable name = nameIn\n    let mutable id = idIn\n    do printfn &quot;Created a person object.&quot;\n    member this.Name with get() = name and set(v) = name &lt;- v\n    member this.ID with get() = id and set(v) = id &lt;- v\n    new() =\n        Person(&quot;Invalid Name&quot;, -1)\n        then\n            printfn &quot;Created an invalid person object.&quot;\n\nlet person1 = new Person(&quot;Humberto Acevedo&quot;, 123458734)\nlet person2 = new Person()\n</code></pre><p>The side effects of the primary constructor still execute. Therefore, the output is as follows.</p>\n<pre class=\"loading\"><code class=\"lang-text\">Created a person object.\nCreated a person object.\nCreated an invalid person object.\n</code></pre><h2 id=\"self-identifiers-in-constructors\">Self Identifiers in Constructors</h2>\n<p>In other members, you provide a name for the current object in the definition of each member. You can also put the self identifier on the first line of the class definition by using the <code>as</code> keyword immediately following the constructor parameters. The following example illustrates this syntax.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\">type MyClass1(x) as this =\n    // This use of the self identifier produces a warning - avoid.\n    let x1 = this.X\n    // This use of the self identifier is acceptable.\n    do printfn &quot;Initializing object with X =%d&quot; this.X\n    member this.X = x\n</code></pre><p>In additional constructors, you can also define a self identifier by putting the <code>as</code> clause right after the constructor parameters. The following example illustrates this syntax.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\">type MyClass2(x : int) =\n    member this.X = x\n    new() as this = MyClass2(0) then printfn &quot;Initializing with X = %d&quot; this.X\n</code></pre><p>Problems can occur when you try to use an object before it is fully defined. Therefore, uses of the self identifier can cause the compiler to emit a warning and insert additional checks to ensure the members of an object are not accessed before the object is initialized. You should only use the self identifier in the <code>do</code> bindings of the primary constructor, or after the <code>then</code> keyword in additional constructors.</p>\n<p>The name of the self identifier does not have to be <code>this</code>. It can be any valid identifier.</p>\n<h2 id=\"assigning-values-to-properties-at-initialization\">Assigning Values to Properties at Initialization</h2>\n<p>You can assign values to the properties of a class object in the initialization code by appending a list of assignments of the form <code>property = value</code> to the argument list for a constructor. This is shown in the following code example.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\"> type Account() =\n    let mutable balance = 0.0\n    let mutable number = 0\n    let mutable firstName = &quot;&quot;\n    let mutable lastName = &quot;&quot;\n    member this.AccountNumber\n       with get() = number\n       and set(value) = number &lt;- value\n    member this.FirstName\n       with get() = firstName\n       and set(value) = firstName &lt;- value\n    member this.LastName\n       with get() = lastName\n       and set(value) = lastName &lt;- value\n    member this.Balance\n       with get() = balance\n       and set(value) = balance &lt;- value\n    member this.Deposit(amount: float) = this.Balance &lt;- this.Balance + amount\n    member this.Withdraw(amount: float) = this.Balance &lt;- this.Balance - amount\n\n\nlet account1 = new Account(AccountNumber=8782108,\n                           FirstName=&quot;Darren&quot;, LastName=&quot;Parker&quot;,\n                           Balance=1543.33)\n</code></pre><p>The following version of the previous code illustrates the combination of ordinary arguments, optional arguments, and property settings in one constructor call.</p>\n<pre><code class=\"lang-fsharp\" name=\"Main\">type Account(accountNumber : int, ?first: string, ?last: string, ?bal : float) =\n   let mutable balance = defaultArg bal 0.0\n   let mutable number = accountNumber\n   let mutable firstName = defaultArg first &quot;&quot;\n   let mutable lastName = defaultArg last &quot;&quot;\n   member this.AccountNumber\n      with get() = number\n      and set(value) = number &lt;- value\n   member this.FirstName\n      with get() = firstName\n      and set(value) = firstName &lt;- value\n   member this.LastName\n      with get() = lastName\n      and set(value) = lastName &lt;- value\n   member this.Balance\n      with get() = balance\n      and set(value) = balance &lt;- value\n   member this.Deposit(amount: float) = this.Balance &lt;- this.Balance + amount\n   member this.Withdraw(amount: float) = this.Balance &lt;- this.Balance - amount\n\n\nlet account1 = new Account(8782108, bal = 543.33,\n                          FirstName=&quot;Raman&quot;, LastName=&quot;Iyer&quot;)\n</code></pre><h2 id=\"constructors-in-inherited-class\">Constructors in inherited class</h2>\n<p>When inheriting from a base class that has a constructor, you must specify its arguments in the inherit clause. For more information, see <a href=\"../inheritance#constructors-and-inheritance\" data-linktype=\"relative-path\">Constructors and inheritance</a>.</p>\n<h2 id=\"static-constructors-or-type-constructors\">Static Constructors or Type Constructors</h2>\n<p>In addition to specifying code for creating objects, static <code>let</code> and <code>do</code> bindings can be authored in class types that execute before the type is first used to perform initialization at the type level. For more information, see <a href=\"let-bindings-in-classes\" data-linktype=\"relative-path\"><code>let</code> Bindings in Classes</a> and <a href=\"do-bindings-in-classes\" data-linktype=\"relative-path\"><code>do</code> Bindings in Classes</a>.</p>\n<h2 id=\"see-also\">See Also</h2>\n<p><a href=\"index\" data-linktype=\"relative-path\">Members</a></p>\n</div></div>","outputRootRelativePath":"../../../../","pageMetadata":"<meta name=\"author\" content=\"cartermp\">\r\n<meta name=\"ms.author\" content=\"phcart\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"toc2.json\">\r\n<meta name=\"ms.devlang\" content=\"fsharp\">\r\n<meta name=\"ms.assetid\" content=\"e0da2250-29de-4145-a1be-e5faff080759\">\r\n<meta name=\"description\" content=\"Constructors (F#)\">\r\n<meta name=\"keywords\" content=\"visual f#, f#, functional programming\">\r\n<meta name=\"ms.topic\" content=\"language-reference\">\r\n<meta name=\"ms.date\" content=\"05/16/2016\">\r\n<meta name=\"ms.technology\" content=\"devlang-fsharp\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2016-12-15 06:00 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/fsharp/language-reference/members/constructors.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/fsharp/language-reference/members/constructors.md\">\r\n<meta name=\"document_id\" content=\"a89f2e44-f791-faa6-13f4-03f8f14204b0\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../../toc2.json\">\r\n","rawMetadata":{"author":"cartermp","ms.author":"phcart","manager":"wpickett","breadcrumb_path":"/dotnet-internal/toc.json","title":"Constructors (F#) | Microsoft Docs","ms.devlang":"fsharp","ms.assetid":"e0da2250-29de-4145-a1be-e5faff080759","description":"Constructors (F#)","keywords":"visual f#, f#, functional programming","ms.topic":"language-reference","ms.date":"05/16/2016","ms.technology":"devlang-fsharp","ms.prod":".net","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Kouji Matsui","author_email":"kekyo@users.noreply.github.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Add constructors-and-inheritance link in F# constructor doc. (#935)","commit_sha":"34fb623a4acb9ac91f32dfbd72bab05aa9a6afc1","commit_date":"2016-08-23 23:33:52 -0700"},{"author_name":"Phillip Carter","author_email":"phillip.carter@outlook.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Move snippets to snippets folder, now with some F# (#904)","commit_sha":"37fe2b89d590509e8eb14342da988f15862a9e2b","commit_date":"2016-08-13 16:40:56 -0700"},{"author_name":"Phillip Carter","author_email":"phillip.carter@outlook.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Reorganize F# snippets (#903)","commit_sha":"6ea1cf8f3779532a9ed8fbdac32592fbb809443c","commit_date":"2016-08-13 15:14:41 -0700"},{"author_name":"Phillip Carter","author_email":"phillip.carter@outlook.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"F# Docs: Update intro, move files, rename language reference for better URLS (#902)","commit_sha":"70a10b9c3e21291c96d927d13f8710d9e0738d4c","commit_date":"2016-08-13 11:22:39 -0700"}],"updated_at":"2016-12-15 06:00 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/cartermp","display_name":"Phillip Carter","id":"6309070"},"contributors":[{"profile_url":"https://github.com/cartermp","display_name":"Phillip Carter"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"},{"profile_url":"https://github.com/kekyo","display_name":"Kouji Matsui","id":"6181948"}],"update_at":"12/15/2016"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/fsharp/language-reference/members/constructors.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/fsharp/language-reference/members/constructors.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/fsharp/language-reference/members/constructors.md","document_id":"a89f2e44-f791-faa6-13f4-03f8f14204b0","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet-all/articles/fsharp/language-reference/members/constructors","toc_asset_id":"articles/toc.json","toc_rel":"../../../toc.json","_op_ogTitle":"Constructors (F#)","_op_displayDate":"2016-5-16","_op_displayDate_source":"2016-05-16T00:00:00Z","_op_wordCount":1362,"_op_rawTitle":"<h1 id=\"constructors\" sourcefile=\"docs/fsharp/language-reference/members/constructors.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"15\">Constructors</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet-all/articles/fsharp/language-reference/members/constructors","fileRelativePath":"articles/fsharp/language-reference/members/constructors.html"},"themesRelativePathToOutputRoot":"_themes/"}