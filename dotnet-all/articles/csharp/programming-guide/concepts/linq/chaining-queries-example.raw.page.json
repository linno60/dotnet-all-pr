{"content":"<div><div class=\"content\">\n<p>This example builds on the previous example and shows what happens when you chain together two queries that both use deferred execution and lazy evaluation.  </p>\n<h2 id=\"example\">Example</h2>\n<p> In this example, another extension method is introduced, <code>AppendString</code>, which appends a specified string onto every string in the source collection, and then yields the new strings.  </p>\n<pre class=\"loading\"><code class=\"lang-cs\">public static class LocalExtensions  \n{  \n    public static IEnumerable&lt;string&gt;  \n      ConvertCollectionToUpperCase(this IEnumerable&lt;string&gt; source)  \n    {  \n        foreach (string str in source)  \n        {  \n            Console.WriteLine(&quot;ToUpper: source &gt;{0}&lt;&quot;, str);  \n            yield return str.ToUpper();  \n        }  \n    }  \n\n    public static IEnumerable&lt;string&gt;  \n      AppendString(this IEnumerable&lt;string&gt; source, string stringToAppend)  \n    {  \n        foreach (string str in source)  \n        {  \n            Console.WriteLine(&quot;AppendString: source &gt;{0}&lt;&quot;, str);  \n            yield return str + stringToAppend;  \n        }  \n    }  \n}  \n\nclass Program  \n{  \n    static void Main(string[] args)  \n    {  \n        string[] stringArray = { &quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot; };  \n\n        IEnumerable&lt;string&gt; q1 =  \n            from s in stringArray.ConvertCollectionToUpperCase()  \n            select s;  \n\n        IEnumerable&lt;string&gt; q2 =  \n            from s in q1.AppendString(&quot;!!!&quot;)  \n            select s;  \n\n        foreach (string str in q2)  \n        {  \n            Console.WriteLine(&quot;Main: str &gt;{0}&lt;&quot;, str);  \n            Console.WriteLine();  \n        }  \n    }  \n}  \n</code></pre><p> This example produces the following output:  </p>\n<pre class=\"loading\"><code>ToUpper: source &gt;abc&lt;  \nAppendString: source &gt;ABC&lt;  \nMain: str &gt;ABC!!!&lt;  \n\nToUpper: source &gt;def&lt;  \nAppendString: source &gt;DEF&lt;  \nMain: str &gt;DEF!!!&lt;  \n\nToUpper: source &gt;ghi&lt;  \nAppendString: source &gt;GHI&lt;  \nMain: str &gt;GHI!!!&lt;  \n</code></pre><p> In this example, you can see that each extension method operates one at a time for each item in the source collection.  </p>\n<p> What should be clear from this example is that even though we have chained together queries that yield collections, no intermediate collections are materialized. Instead, each item is passed from one lazy method to the next. This results in a much smaller memory footprint than an approach that would first take one array of strings, then create a second array of strings that have been converted to uppercase, and finally create a third array of strings where each string has the exclamation points appended to it.  </p>\n<p> The next topic in this tutorial illustrates intermediate materialization:  </p>\n<ul>\n<li><a href=\"intermediate-materialization\" data-linktype=\"relative-path\">Intermediate Materialization (C#)</a>  </li>\n</ul>\n<h2 id=\"see-also\">See Also</h2>\n<p> <a href=\"tutorial-chaining-queries-together\" data-linktype=\"relative-path\">Tutorial: Chaining Queries Together (C#)</a></p>\n</div></div>","outputRootRelativePath":"../../../../../","pageMetadata":"<meta name=\"author\" content=\"BillWagner\">\r\n<meta name=\"ms.author\" content=\"wiwagn\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc1.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.suite\" content=\"\">\r\n<meta name=\"ms.custom\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"abbca162-d95e-43af-b92c-e46e6aa2540e\">\r\n<meta name=\"caps.latest.revision\" content=\"3\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"2015-07-20\">\r\n<meta name=\"ms.technology\" content=\"devlang-csharp\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"ms.reviewer\" content=\"\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2016-12-15 06:00 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/csharp/programming-guide/concepts/linq/chaining-queries-example.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/programming-guide/concepts/linq/chaining-queries-example.md\">\r\n<meta name=\"document_id\" content=\"cb087ce2-0c3d-943f-71c0-d4a787816cee\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"toc1.json\">\r\n","rawMetadata":{"author":"BillWagner","ms.author":"wiwagn","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","title":"Chaining Queries Example (C#) | Microsoft Docs","ms.suite":"","ms.custom":"","ms.assetid":"abbca162-d95e-43af-b92c-e46e6aa2540e","caps.latest.revision":3,"ms.topic":"article","dev_langs":["csharp"],"ms.date":"2015-07-20","ms.technology":["devlang-csharp"],"ms.prod":".net","ms.reviewer":"","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":":books: migration changes (#1235)","commit_sha":"b828bb1d6c8fb750ad9ef34f8a7a1b7d2574f4c6","commit_date":"2016-11-15 15:08:11 -0500"}],"updated_at":"2016-12-15 06:00 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"},"contributors":[{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"}],"update_at":"12/15/2016"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/csharp/programming-guide/concepts/linq/chaining-queries-example.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/programming-guide/concepts/linq/chaining-queries-example.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/csharp/programming-guide/concepts/linq/chaining-queries-example.md","document_id":"cb087ce2-0c3d-943f-71c0-d4a787816cee","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/programming-guide/concepts/linq/chaining-queries-example","toc_asset_id":"articles/csharp/programming-guide/concepts/linq/toc.json","toc_rel":"toc.json","_op_ogTitle":"Chaining Queries Example (C#)","_op_displayDate":null,"_op_displayDate_source":null,"_op_wordCount":315,"_op_rawTitle":"<h1 id=\"chaining-queries-example-c\" sourcefile=\"docs/csharp/programming-guide/concepts/linq/chaining-queries-example.md\" sourcestartlinenumber=\"20\" sourceendlinenumber=\"20\">Chaining Queries Example (C#)</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/programming-guide/concepts/linq/chaining-queries-example","fileRelativePath":"articles/csharp/programming-guide/concepts/linq/chaining-queries-example.html"},"themesRelativePathToOutputRoot":"_themes/"}