{"content":"<div><div class=\"content\">\n<p>The <em>shape</em> of an XML document refers to its element names, attribute names, and the characteristics of its hierarchy.  </p>\n<p> Sometimes you will have to change the shape of an XML document. For example, you might have to send an existing XML document to another system that requires different element and attribute names. You could go through the document, deleting and renaming elements as required, but using functional construction results in more readable and maintainable code. For more information about functional construction, see <a href=\"functional-construction-linq-to-xml\" data-linktype=\"relative-path\">Functional Construction (LINQ to XML) (C#)</a>.  </p>\n<p> The first example changes the organization of the XML document. It moves complex elements from one location in the tree to another.  </p>\n<p> The second example in this topic creates an XML document with a different shape than the source document. It changes the casing of the element names, renames some elements, and leaves some elements from the source tree out of the transformed tree.  </p>\n<h2 id=\"example\">Example</h2>\n<p> The following code changes the shape of an XML file using embedded query expressions.  </p>\n<p> The source XML document in this example contains a <code>Customers</code> element under the <code>Root</code> element that contains all customers. It also contains an <code>Orders</code> element under the <code>Root</code> element that contains all orders. This example creates a new XML tree in which the orders for each customer are contained in an <code>Orders</code> element within the <code>Customer</code> element. The original document also contains a <code>CustomerID</code> element in the <code>Order</code> element; this element will be removed from the re-shaped document.  </p>\n<p> This example uses the following XML document: <a href=\"sample-xml-file-customers-and-orders-linq-to-xml-2\" data-linktype=\"relative-path\">Sample XML File: Customers and Orders (LINQ to XML)</a>.  </p>\n<pre class=\"loading\"><code class=\"lang-cs\">XElement co = XElement.Load(&quot;CustomersOrders.xml&quot;);  \nXElement newCustOrd =  \n    new XElement(&quot;Root&quot;,  \n        from cust in co.Element(&quot;Customers&quot;).Elements(&quot;Customer&quot;)  \n        select new XElement(&quot;Customer&quot;,  \n            cust.Attributes(),  \n            cust.Elements(),  \n            new XElement(&quot;Orders&quot;,  \n                from ord in co.Element(&quot;Orders&quot;).Elements(&quot;Order&quot;)  \n                where (string)ord.Element(&quot;CustomerID&quot;) == (string)cust.Attribute(&quot;CustomerID&quot;)  \n                select new XElement(&quot;Order&quot;,  \n                    ord.Attributes(),  \n                    ord.Element(&quot;EmployeeID&quot;),  \n                    ord.Element(&quot;OrderDate&quot;),  \n                    ord.Element(&quot;RequiredDate&quot;),  \n                    ord.Element(&quot;ShipInfo&quot;)  \n                )  \n            )  \n        )  \n    );  \nConsole.WriteLine(newCustOrd);  \n</code></pre><p> This code produces the following output:  </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;Root&gt;  \n  &lt;Customer CustomerID=&quot;GREAL&quot;&gt;  \n    &lt;CompanyName&gt;Great Lakes Food Market&lt;/CompanyName&gt;  \n    &lt;ContactName&gt;Howard Snyder&lt;/ContactName&gt;  \n    &lt;ContactTitle&gt;Marketing Manager&lt;/ContactTitle&gt;  \n    &lt;Phone&gt;(503) 555-7555&lt;/Phone&gt;  \n    &lt;FullAddress&gt;  \n      &lt;Address&gt;2732 Baker Blvd.&lt;/Address&gt;  \n      &lt;City&gt;Eugene&lt;/City&gt;  \n      &lt;Region&gt;OR&lt;/Region&gt;  \n      &lt;PostalCode&gt;97403&lt;/PostalCode&gt;  \n      &lt;Country&gt;USA&lt;/Country&gt;  \n    &lt;/FullAddress&gt;  \n    &lt;Orders /&gt;  \n  &lt;/Customer&gt;  \n  &lt;Customer CustomerID=&quot;HUNGC&quot;&gt;  \n    &lt;CompanyName&gt;Hungry Coyote Import Store&lt;/CompanyName&gt;  \n    &lt;ContactName&gt;Yoshi Latimer&lt;/ContactName&gt;  \n    &lt;ContactTitle&gt;Sales Representative&lt;/ContactTitle&gt;  \n    &lt;Phone&gt;(503) 555-6874&lt;/Phone&gt;  \n    &lt;Fax&gt;(503) 555-2376&lt;/Fax&gt;  \n    &lt;FullAddress&gt;  \n      &lt;Address&gt;City Center Plaza 516 Main St.&lt;/Address&gt;  \n      &lt;City&gt;Elgin&lt;/City&gt;  \n      &lt;Region&gt;OR&lt;/Region&gt;  \n      &lt;PostalCode&gt;97827&lt;/PostalCode&gt;  \n      &lt;Country&gt;USA&lt;/Country&gt;  \n    &lt;/FullAddress&gt;  \n    &lt;Orders /&gt;  \n  &lt;/Customer&gt;  \n  . . .  \n</code></pre><h2 id=\"example-1\">Example</h2>\n<p> This example renames some elements and converts some attributes to elements.  </p>\n<p> The code calls <code>ConvertAddress</code>, which returns a list of <a class=\"xref\" href=\"../../../../../api/system.xml.linq.xelement\" data-linktype=\"relative-path\">XElement</a> objects. The argument to the method is a query that determines the <code>Address</code> complex element where the <code>Type</code> attribute has a value of <code>&quot;Shipping&quot;</code>.  </p>\n<p> This example uses the following XML document: <a href=\"sample-xml-file-typical-purchase-order-linq-to-xml-1\" data-linktype=\"relative-path\">Sample XML File: Typical Purchase Order (LINQ to XML)</a>.  </p>\n<pre class=\"loading\"><code class=\"lang-cs\">static IEnumerable&lt;XElement&gt; ConvertAddress(XElement add)  \n{  \n    List&lt;XElement&gt; fragment = new List&lt;XElement&gt;() {  \n        new XElement(&quot;NAME&quot;, (string)add.Element(&quot;Name&quot;)),  \n        new XElement(&quot;STREET&quot;, (string)add.Element(&quot;Street&quot;)),  \n        new XElement(&quot;CITY&quot;, (string)add.Element(&quot;City&quot;)),  \n        new XElement(&quot;ST&quot;, (string)add.Element(&quot;State&quot;)),  \n        new XElement(&quot;POSTALCODE&quot;, (string)add.Element(&quot;Zip&quot;)),  \n        new XElement(&quot;COUNTRY&quot;, (string)add.Element(&quot;Country&quot;))  \n    };  \n    return fragment;  \n}  \n\nstatic void Main(string[] args)  \n{  \n    XElement po = XElement.Load(&quot;PurchaseOrder.xml&quot;);  \n    XElement newPo = new XElement(&quot;PO&quot;,  \n        new XElement(&quot;ID&quot;, (string)po.Attribute(&quot;PurchaseOrderNumber&quot;)),  \n        new XElement(&quot;DATE&quot;, (DateTime)po.Attribute(&quot;OrderDate&quot;)),  \n        ConvertAddress(  \n            (from el in po.Elements(&quot;Address&quot;)  \n            where (string)el.Attribute(&quot;Type&quot;) == &quot;Shipping&quot;  \n            select el)  \n            .First()  \n        )  \n    );  \n    Console.WriteLine(newPo);  \n}  \n</code></pre><p> This code produces the following output:  </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;PO&gt;  \n  &lt;ID&gt;99503&lt;/ID&gt;  \n  &lt;DATE&gt;1999-10-20T00:00:00&lt;/DATE&gt;  \n  &lt;NAME&gt;Ellen Adams&lt;/NAME&gt;  \n  &lt;STREET&gt;123 Maple Street&lt;/STREET&gt;  \n  &lt;CITY&gt;Mill Valley&lt;/CITY&gt;  \n  &lt;ST&gt;CA&lt;/ST&gt;  \n  &lt;POSTALCODE&gt;10999&lt;/POSTALCODE&gt;  \n  &lt;COUNTRY&gt;USA&lt;/COUNTRY&gt;  \n&lt;/PO&gt;  \n</code></pre><h2 id=\"see-also\">See Also</h2>\n<p> <a href=\"projections-and-transformations-linq-to-xml\" data-linktype=\"relative-path\">Projections and Transformations (LINQ to XML) (C#)</a></p>\n</div></div>","outputRootRelativePath":"../../../../../","pageMetadata":"<meta name=\"author\" content=\"BillWagner\">\r\n<meta name=\"ms.author\" content=\"wiwagn\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"/dotnet/toc2.json\">\r\n<meta name=\"ms.suite\" content=\"\">\r\n<meta name=\"ms.custom\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"93c5d426-dea2-4709-a991-60204de42e8f\">\r\n<meta name=\"caps.latest.revision\" content=\"3\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"2015-07-20\">\r\n<meta name=\"ms.technology\" content=\"devlang-csharp\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"ms.reviewer\" content=\"\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2016-12-15 06:00 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.md\">\r\n<meta name=\"document_id\" content=\"1da02bde-5d3b-61b8-6cf6-9d6e18dff2d9\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"toc2.json\">\r\n","rawMetadata":{"author":"BillWagner","ms.author":"wiwagn","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","title":"How to: Transform the Shape of an XML Tree (C#) | Microsoft Docs","ms.suite":"","ms.custom":"","ms.assetid":"93c5d426-dea2-4709-a991-60204de42e8f","caps.latest.revision":3,"ms.topic":"article","dev_langs":["csharp"],"ms.date":"2015-07-20","ms.technology":["devlang-csharp"],"ms.prod":".net","ms.reviewer":"","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":":books: migration changes (#1235)","commit_sha":"b828bb1d6c8fb750ad9ef34f8a7a1b7d2574f4c6","commit_date":"2016-11-15 15:08:11 -0500"}],"updated_at":"2016-12-15 06:00 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"},"contributors":[{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"}],"update_at":"12/15/2016"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.md","document_id":"1da02bde-5d3b-61b8-6cf6-9d6e18dff2d9","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree","toc_asset_id":"articles/csharp/programming-guide/concepts/linq/toc.json","toc_rel":"toc.json","_op_ogTitle":"How to: Transform the Shape of an XML Tree (C#)","_op_displayDate":null,"_op_displayDate_source":null,"_op_wordCount":515,"_op_rawTitle":"<h1 id=\"how-to-transform-the-shape-of-an-xml-tree-c\" sourcefile=\"docs/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.md\" sourcestartlinenumber=\"20\" sourceendlinenumber=\"20\">How to: Transform the Shape of an XML Tree (C#)</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree","fileRelativePath":"articles/csharp/programming-guide/concepts/linq/how-to-transform-the-shape-of-an-xml-tree.html"},"themesRelativePathToOutputRoot":"_themes/"}