{"content":"<div><div class=\"content\">\n<p>In versions of C# before 2.0, the only way to declare a <a href=\"../../language-reference/keywords/delegate\" data-linktype=\"relative-path\">delegate</a> was to use <a href=\"../delegates/delegates-with-named-vs-anonymous-methods\" data-linktype=\"relative-path\">named methods</a>. C# 2.0 introduced anonymous methods and in C# 3.0 and later, lambda expressions supersede anonymous methods as the preferred way to write inline code. However, the information about anonymous methods in this topic also applies to lambda expressions. There is one case in which an anonymous method provides functionality not found in lambda expressions. Anonymous methods enable you to omit the parameter list. This means that an anonymous method can be converted to delegates with a variety of signatures. This is not possible with lambda expressions. For more information specifically about lambda expressions, see <a href=\"lambda-expressions\" data-linktype=\"relative-path\">Lambda Expressions</a>.  </p>\n<p> Creating anonymous methods is essentially a way to pass a code block as a delegate parameter. Here are two examples:  </p>\n<pre><code class=\"lang-cs\" name=\"csProgGuideDelegates#6\">// Create a handler for a click event.\nbutton1.Click += delegate(System.Object o, System.EventArgs e)\n                   { System.Windows.Forms.MessageBox.Show(&quot;Click!&quot;); };\n</code></pre><pre><code class=\"lang-cs\" name=\"csProgGuideDelegates#5\">// Create a delegate.\ndelegate void Del(int x);\n\n// Instantiate the delegate using an anonymous method.\nDel d = delegate(int k) { /* ... */ };\n</code></pre><p> By using anonymous methods, you reduce the coding overhead in instantiating delegates because you do not have to create a separate method.  </p>\n<p> For example, specifying a code block instead of a delegate can be useful in a situation when having to create a method might seem an unnecessary overhead. A good example would be when you start a new thread. This class creates a thread and also contains the code that the thread executes without creating an additional method for the delegate.  </p>\n<pre><code class=\"lang-cs\" name=\"csProgGuideDelegates#7\">void StartThread()\n{\n    System.Threading.Thread t1 = new System.Threading.Thread\n      (delegate()\n            {\n                System.Console.Write(&quot;Hello, &quot;);\n                System.Console.WriteLine(&quot;World!&quot;);\n            });\n    t1.Start();\n}\n</code></pre><h2 id=\"remarks\">Remarks</h2>\n<p> The scope of the parameters of an anonymous method is the <em>anonymous-method-block</em>.  </p>\n<p> It is an error to have a jump statement, such as <a href=\"../../language-reference/keywords/goto\" data-linktype=\"relative-path\">goto</a>, <a href=\"../../language-reference/keywords/break\" data-linktype=\"relative-path\">break</a>, or <a href=\"../../language-reference/keywords/continue\" data-linktype=\"relative-path\">continue</a>, inside the anonymous method block if the target is outside the block. It is also an error to have a jump statement, such as <code>goto</code>, <code>break</code>, or <code>continue</code>, outside the anonymous method block if the target is inside the block.  </p>\n<p> The local variables and parameters whose scope contains an anonymous method declaration are called <em>outer</em> variables of the anonymous method. For example, in the following code segment, <code>n</code> is an outer variable:  </p>\n<pre><code class=\"lang-cs\" name=\"csProgGuideDelegates#8\">int n = 0;\nDel d = delegate() { System.Console.WriteLine(&quot;Copy #:{0}&quot;, ++n); };\n</code></pre><p> A reference to the outer variable <code>n</code> is said to be <em>captured</em> when the delegate is created. Unlike local variables, the lifetime of a captured variable extends until the delegates that reference the anonymous methods are eligible for garbage collection.  </p>\n<p> An anonymous method cannot access the <a href=\"../../language-reference/keywords/ref\" data-linktype=\"relative-path\">ref</a> or <a href=\"../../language-reference/keywords/out\" data-linktype=\"relative-path\">out</a> parameters of an outer scope.  </p>\n<p> No unsafe code can be accessed within the <em>anonymous-method-block</em>.  </p>\n<p> Anonymous methods are not allowed on the left side of the <a href=\"../../language-reference/keywords/is\" data-linktype=\"relative-path\">is</a> operator.  </p>\n<h2 id=\"example\">Example</h2>\n<p> The following example demonstrates two ways of instantiating a delegate:  </p>\n<ul>\n<li><p>Associating the delegate with an anonymous method.  </p>\n</li>\n<li><p>Associating the delegate with a named method (<code>DoWork</code>).  </p>\n</li>\n</ul>\n<p> In each case, a message is displayed when the delegate is invoked.  </p>\n<pre><code class=\"lang-cs\" name=\"csProgGuideDelegates#4\">// Declare a delegate.\ndelegate void Printer(string s);\n\nclass TestClass\n{\n    static void Main()\n    {\n        // Instantiate the delegate type using an anonymous method.\n        Printer p = delegate(string j)\n        {\n            System.Console.WriteLine(j);\n        };\n\n        // Results from the anonymous delegate call.\n        p(&quot;The delegate using the anonymous method is called.&quot;);\n\n        // The delegate instantiation using a named method &quot;DoWork&quot;.\n        p = new Printer(TestClass.DoWork);\n\n        // Results from the old style delegate call.\n        p(&quot;The delegate using the named method is called.&quot;);\n    }\n\n    // The method associated with the named delegate.\n    static void DoWork(string k)\n    {\n        System.Console.WriteLine(k);\n    }\n}\n/* Output:\n    The delegate using the anonymous method is called.\n    The delegate using the named method is called.\n*/\n</code></pre><h2 id=\"see-also\">See Also</h2>\n<p> <a href=\"../../language-reference/index\" data-linktype=\"relative-path\">C# Reference</a><br> <a href=\"../index\" data-linktype=\"relative-path\">C# Programming Guide</a><br> <a href=\"../delegates/index\" data-linktype=\"relative-path\">Delegates</a><br> <a href=\"lambda-expressions\" data-linktype=\"relative-path\">Lambda Expressions</a><br> <a href=\"../unsafe-code-pointers/index\" data-linktype=\"relative-path\">Unsafe Code and Pointers</a><br> <a href=\"../classes-and-structs/methods\" data-linktype=\"relative-path\">Methods</a><br> <a href=\"../delegates/delegates-with-named-vs-anonymous-methods\" data-linktype=\"relative-path\">Delegates with Named vs. Anonymous Methods</a></p>\n</div></div>","outputRootRelativePath":"../../../../","pageMetadata":"<meta name=\"author\" content=\"BillWagner\">\r\n<meta name=\"ms.author\" content=\"wiwagn\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc2.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.assetid\" content=\"a62441fa-f0a3-4acb-9aa6-93762a635275\">\r\n<meta name=\"translation.priority.ht\" content=\"cs-cz\">\r\n<meta name=\"translation.priority.ht\" content=\"de-de\">\r\n<meta name=\"translation.priority.ht\" content=\"es-es\">\r\n<meta name=\"translation.priority.ht\" content=\"fr-fr\">\r\n<meta name=\"translation.priority.ht\" content=\"it-it\">\r\n<meta name=\"translation.priority.ht\" content=\"ja-jp\">\r\n<meta name=\"translation.priority.ht\" content=\"ko-kr\">\r\n<meta name=\"translation.priority.ht\" content=\"pl-pl\">\r\n<meta name=\"translation.priority.ht\" content=\"pt-br\">\r\n<meta name=\"translation.priority.ht\" content=\"ru-ru\">\r\n<meta name=\"translation.priority.ht\" content=\"tr-tr\">\r\n<meta name=\"translation.priority.ht\" content=\"zh-cn\">\r\n<meta name=\"translation.priority.ht\" content=\"zh-tw\">\r\n<meta name=\"caps.latest.revision\" content=\"31\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"2015-07-20\">\r\n<meta name=\"ms.technology\" content=\"devlang-csharp\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2016-12-15 06:00 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/csharp/programming-guide/statements-expressions-operators/anonymous-methods.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/programming-guide/statements-expressions-operators/anonymous-methods.md\">\r\n<meta name=\"document_id\" content=\"ccb97043-2a78-ebdf-cec2-cd42710f017f\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"toc2.json\">\r\n","rawMetadata":{"author":"BillWagner","ms.author":"wiwagn","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","title":"Anonymous Methods (C# Programming Guide) | Microsoft Docs","ms.assetid":"a62441fa-f0a3-4acb-9aa6-93762a635275","translation.priority.ht":["cs-cz","de-de","es-es","fr-fr","it-it","ja-jp","ko-kr","pl-pl","pt-br","ru-ru","tr-tr","zh-cn","zh-tw"],"caps.latest.revision":31,"ms.topic":"article","dev_langs":["csharp"],"helpviewer_keywords":["anonymous methods [C#]","methods [C#], anonymous","delegates [C#], anonymous methods"],"ms.date":"2015-07-20","ms.technology":["devlang-csharp"],"ms.prod":".net","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":":books: migration changes (#1235)","commit_sha":"b828bb1d6c8fb750ad9ef34f8a7a1b7d2574f4c6","commit_date":"2016-11-15 15:08:11 -0500"}],"updated_at":"2016-12-15 06:00 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"},"contributors":[{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"}],"update_at":"12/15/2016"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/csharp/programming-guide/statements-expressions-operators/anonymous-methods.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/programming-guide/statements-expressions-operators/anonymous-methods.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/csharp/programming-guide/statements-expressions-operators/anonymous-methods.md","document_id":"ccb97043-2a78-ebdf-cec2-cd42710f017f","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/programming-guide/statements-expressions-operators/anonymous-methods","toc_asset_id":"articles/csharp/programming-guide/statements-expressions-operators/toc.json","toc_rel":"toc.json","_op_ogTitle":"Anonymous Methods (C# Programming Guide)","_op_displayDate":null,"_op_displayDate_source":null,"_op_wordCount":634,"_op_rawTitle":"<h1 id=\"anonymous-methods-c-programming-guide\" sourcefile=\"docs/csharp/programming-guide/statements-expressions-operators/anonymous-methods.md\" sourcestartlinenumber=\"38\" sourceendlinenumber=\"38\">Anonymous Methods (C# Programming Guide)</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/programming-guide/statements-expressions-operators/anonymous-methods","fileRelativePath":"articles/csharp/programming-guide/statements-expressions-operators/anonymous-methods.html"},"themesRelativePathToOutputRoot":"_themes/"}