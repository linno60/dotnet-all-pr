{"content":"<div><div class=\"content\">\n<p>Use the <code>async</code> modifier to specify that a method, <a href=\"../../programming-guide/statements-expressions-operators/lambda-expressions\" data-linktype=\"relative-path\">lambda expression</a>, or <a href=\"../../programming-guide/statements-expressions-operators/anonymous-methods\" data-linktype=\"relative-path\">anonymous method</a> is asynchronous. If you use this modifier on a method or expression, it&#39;s referred to as an async method.  </p>\n<pre class=\"loading\"><code class=\"lang-cs\">public async Task&lt;int&gt; ExampleMethodAsync()  \n{  \n    // . . . .  \n}  \n</code></pre><p> If you&#39;re new to asynchronous programming or do not understand how an async method uses the <code>await</code> keyword to do potentially long-running work without blocking the callerâ€™s thread, you should read the introduction in <a href=\"../../programming-guide/concepts/async/index\" data-linktype=\"relative-path\">Asynchronous Programming with async and await</a>.  </p>\n<pre class=\"loading\"><code>string contents = await contentsTask;  \n</code></pre><p> The method runs synchronously until it reaches its first <code>await</code> expression, at which point the method is suspended until the awaited task is complete. In the meantime, control returns to the caller of the method, as the example in the next section shows.  </p>\n<p> If the method that the <code>async</code> keyword modifies doesn&#39;t contain an <code>await</code> expression or statement, the method executes synchronously. A compiler warning alerts you to any async methods that don&#39;t contain <code>await</code>, because that situation might indicate an error. See <a href=\"../compiler-messages/cs4014\" data-linktype=\"relative-path\">Compiler Warning (level 1) CS4014</a>.  </p>\n<p> The <code>async</code> keyword is contextual in that it&#39;s a keyword only when it modifies a method, a lambda expression, or an anonymous method. In all other contexts, it&#39;s interpreted as an identifier.  </p>\n<h2 id=\"example\">Example</h2>\n<p> The following example shows the structure and flow of control between an async event handler, <code>StartButton_Click</code>, and an async method, <code>ExampleMethodAsync</code>. The result from the async method is the length of a downloaded website. The code is suitable for a Windows Presentation Foundation (WPF) app or Windows Store app that you create in Visual Studio 2013; see the code comments for setting up the app.  </p>\n<pre class=\"loading\"><code class=\"lang-cs\">// You can run this code in Visual Studio 2013 as a WPF app or a Windows Store app.  \n// You need a button (StartButton) and a textbox (ResultsTextBox).  \n// Remember to set the names and handler so that you have something like this:  \n// &lt;Button Content=&quot;Button&quot; HorizontalAlignment=&quot;Left&quot; Margin=&quot;88,77,0,0&quot; VerticalAlignment=&quot;Top&quot; Width=&quot;75&quot;  \n//         Click=&quot;StartButton_Click&quot; Name=&quot;StartButton&quot;/&gt;  \n// &lt;TextBox HorizontalAlignment=&quot;Left&quot; Height=&quot;137&quot; Margin=&quot;88,140,0,0&quot; TextWrapping=&quot;Wrap&quot;   \n//          Text=&quot;TextBox&quot; VerticalAlignment=&quot;Top&quot; Width=&quot;310&quot; Name=&quot;ResultsTextBox&quot;/&gt;  \n\n// To run the code as a WPF app:  \n//    paste this code into the MainWindow class in MainWindow.xaml.cs,  \n//    add a reference to System.Net.Http, and  \n//    add a using directive for System.Net.Http.  \n\n// To run the code as a Windows Store app:  \n//    paste this code into the MainPage class in MainPage.xaml.cs, and  \n//    add using directives for System.Net.Http and System.Threading.Tasks.  \n\nprivate async void StartButton_Click(object sender, RoutedEventArgs e)  \n{  \n    // ExampleMethodAsync returns a Task&lt;int&gt;, which means that the method  \n    // eventually produces an int result. However, ExampleMethodAsync returns  \n    // the Task&lt;int&gt; value as soon as it reaches an await.  \n    ResultsTextBox.Text += &quot;\\n&quot;;  \n    try  \n    {  \n        int length = await ExampleMethodAsync();  \n        // Note that you could put &quot;await ExampleMethodAsync()&quot; in the next line where  \n        // &quot;length&quot; is, but due to when &#39;+=&#39; fetches the value of ResultsTextBox, you  \n        // would not see the global side effect of ExampleMethodAsync setting the text.  \n        ResultsTextBox.Text += String.Format(&quot;Length: {0}\\n&quot;, length);  \n    }  \n    catch (Exception)  \n    {  \n        // Process the exception if one occurs.  \n    }  \n}  \n\npublic async Task&lt;int&gt; ExampleMethodAsync()  \n{  \n    var httpClient = new HttpClient();  \n    int exampleInt = (await httpClient.GetStringAsync(&quot;http://msdn.microsoft.com&quot;)).Length;  \n    ResultsTextBox.Text += &quot;Preparing to finish ExampleMethodAsync.\\n&quot;;  \n    // After the following return statement, any method that&#39;s awaiting  \n    // ExampleMethodAsync (in this case, StartButton_Click) can get the   \n    // integer result.  \n    return exampleInt;  \n}  \n// Output:  \n// Preparing to finish ExampleMethodAsync.  \n// Length: 53292  \n</code></pre><div class=\"IMPORTANT\"><h5>Important</h5><p> For more information about tasks and the code that executes while waiting for a task, see <a href=\"../../programming-guide/concepts/async/index\" data-linktype=\"relative-path\">Asynchronous Programming with async and await</a>. For a full WPF example that uses similar elements, see <a href=\"../../programming-guide/concepts/async/walkthrough-accessing-the-web-by-using-async-and-await\" data-linktype=\"relative-path\">Walkthrough: Accessing the Web by Using Async and Await</a>. You can download the walkthrough code from <a href=\"http://go.microsoft.com/fwlink/?LinkId=255191\" data-linktype=\"external\">Developer Code Samples</a>.  </p>\n</div>\n<h2 id=\"return-types\">Return Types</h2>\n<p> An async method can have a return type of <a class=\"xref\" href=\"../../../../api/system.threading.tasks.task\" data-linktype=\"relative-path\">Task</a>, <a class=\"xref\" href=\"../../../../api/system.threading.tasks.task-1\" data-linktype=\"relative-path\">Task&lt;TResult&gt;</a>, or <a href=\"void\" data-linktype=\"relative-path\">void</a>. The method can&#39;t declare any <a href=\"ref\" data-linktype=\"relative-path\">ref</a> or <a href=\"out\" data-linktype=\"relative-path\">out</a> parameters, but it can call methods that have such parameters.  </p>\n<p> You specify <code>Task&lt;TResult&gt;</code> as the return type of an async method if the <a href=\"return\" data-linktype=\"relative-path\">return</a> statement of the method specifies an operand of type <code>TResult</code>. You use <code>Task</code> if no meaningful value is returned when the method is completed. That is, a call to the method returns a <code>Task</code>, but when the <code>Task</code> is completed, any <code>await</code> expression that&#39;s awaiting the <code>Task</code> evaluates to <code>void</code>.  </p>\n<p> You use the <code>void</code> return type primarily to define event handlers, which require that return type. The caller of a <code>void</code>-returning async method can&#39;t await it and can&#39;t catch exceptions that the method throws.  </p>\n<p> For more information and examples, see <a href=\"../../programming-guide/concepts/async/async-return-types\" data-linktype=\"relative-path\">Async Return Types</a>.  </p>\n<h2 id=\"see-also\">See Also</h2>\n<p> <a class=\"xref\" href=\"../../../../api/system.runtime.compilerservices.asyncstatemachineattribute\" data-linktype=\"relative-path\">AsyncStateMachineAttribute</a><br> <a href=\"await\" data-linktype=\"relative-path\">await</a><br> <a href=\"../../programming-guide/concepts/async/walkthrough-accessing-the-web-by-using-async-and-await\" data-linktype=\"relative-path\">Walkthrough: Accessing the Web by Using Async and Await</a><br> <a href=\"../../programming-guide/concepts/async/index\" data-linktype=\"relative-path\">Asynchronous Programming with async and await</a></p>\n</div></div>","outputRootRelativePath":"../../../../","pageMetadata":"<meta name=\"author\" content=\"BillWagner\">\r\n<meta name=\"ms.author\" content=\"wiwagn\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"toc2.json\">\r\n<meta name=\"ms.assetid\" content=\"16f14f09-b2ce-42c7-a875-e4eca5d50674\">\r\n<meta name=\"translation.priority.ht\" content=\"cs-cz\">\r\n<meta name=\"translation.priority.ht\" content=\"de-de\">\r\n<meta name=\"translation.priority.ht\" content=\"es-es\">\r\n<meta name=\"translation.priority.ht\" content=\"fr-fr\">\r\n<meta name=\"translation.priority.ht\" content=\"it-it\">\r\n<meta name=\"translation.priority.ht\" content=\"ja-jp\">\r\n<meta name=\"translation.priority.ht\" content=\"ko-kr\">\r\n<meta name=\"translation.priority.ht\" content=\"pl-pl\">\r\n<meta name=\"translation.priority.ht\" content=\"pt-br\">\r\n<meta name=\"translation.priority.ht\" content=\"ru-ru\">\r\n<meta name=\"translation.priority.ht\" content=\"tr-tr\">\r\n<meta name=\"translation.priority.ht\" content=\"zh-cn\">\r\n<meta name=\"translation.priority.ht\" content=\"zh-tw\">\r\n<meta name=\"caps.latest.revision\" content=\"52\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"2015-07-20\">\r\n<meta name=\"ms.technology\" content=\"devlang-csharp\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2017-03-15 06:14 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/3115359729431ecbcc16058612da59b85621fa0f/docs/csharp/language-reference/keywords/async.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/language-reference/keywords/async.md\">\r\n<meta name=\"document_id\" content=\"c584d8ef-5646-7b94-7658-b97f60cbcf9c\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"toc2.json\">\r\n","rawMetadata":{"author":"BillWagner","ms.author":"wiwagn","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","title":"async (C# Reference) | Microsoft Docs","ms.assetid":"16f14f09-b2ce-42c7-a875-e4eca5d50674","f1_keywords":["async_CSharpKeyword"],"translation.priority.ht":["cs-cz","de-de","es-es","fr-fr","it-it","ja-jp","ko-kr","pl-pl","pt-br","ru-ru","tr-tr","zh-cn","zh-tw"],"caps.latest.revision":52,"ms.topic":"article","dev_langs":["csharp"],"helpviewer_keywords":["async keyword [C#]","async method [C#]","async [C#]"],"ms.date":"2015-07-20","ms.technology":["devlang-csharp"],"ms.prod":".net","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Reorganize the C# Guide TOC (#1318)","commit_sha":"3115359729431ecbcc16058612da59b85621fa0f","commit_date":"2017-01-23 23:20:14 -0500"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":":books: migration changes (#1235)","commit_sha":"b828bb1d6c8fb750ad9ef34f8a7a1b7d2574f4c6","commit_date":"2016-11-15 15:08:11 -0500"}],"updated_at":"2017-03-15 06:14 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"},"contributors":[{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"}],"update_at":"3/15/2017"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/3115359729431ecbcc16058612da59b85621fa0f/docs/csharp/language-reference/keywords/async.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/csharp/language-reference/keywords/async.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/csharp/language-reference/keywords/async.md","document_id":"c584d8ef-5646-7b94-7658-b97f60cbcf9c","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/language-reference/keywords/async","toc_asset_id":"articles/csharp/language-reference/keywords/toc.json","toc_rel":"toc.json","_op_ogTitle":"async (C# Reference)","_op_displayDate":null,"_op_displayDate_source":null,"_op_wordCount":769,"_op_rawTitle":"<h1 id=\"async-c-reference\" sourcefile=\"docs/csharp/language-reference/keywords/async.md\" sourcestartlinenumber=\"35\" sourceendlinenumber=\"35\">async (C# Reference)</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/csharp/language-reference/keywords/async","fileRelativePath":"articles/csharp/language-reference/keywords/async.html"},"themesRelativePathToOutputRoot":"_themes/"}