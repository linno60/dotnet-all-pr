{"content":"<div><div class=\"content\">\n<p>Developing and debugging your application in a Docker container can be a ceremony of tasks to get setup with various tools. <a href=\"https://visualstudiogallery.msdn.microsoft.com/0f5b2caa-ea00-41c8-b8a2-058c7da0b3e4\" data-linktype=\"external\">Visual Studio Tools for Docker</a> helps you get past the hurdles and find the bugs using F5 to debug your application directly in a locally hosted Docker Container. </p>\n<div class=\"NOTE\"><h5>Note</h5><p>The current version targets Linux Docker containers, with Windows Containers coming soon.</p>\n</div>\n<h2 id=\"prerequisites\">Prerequisites</h2>\n<ul>\n<li><a href=\"https://www.visualstudio.com/downloads/download-visual-studio-vs\" data-linktype=\"external\">Microsoft Visual Studio 2015 Update 3</a></li>\n<li><a href=\"https://go.microsoft.com/fwlink/?LinkID=827546\" data-linktype=\"external\">.NET Core 1.0.1 - VS 2015 Tooling Preview 2</a></li>\n<li><a href=\"https://www.docker.com/products/docker#/windows\" data-linktype=\"external\">Docker For Windows</a> to run your Docker containers locally</li>\n</ul>\n<h2 id=\"installation-and-setup\">Installation and setup</h2>\n<p>Download and install the <a href=\"https://aka.ms/DockerToolsForVS\" data-linktype=\"external\">Visual Studio Tools for Docker</a> from the <a href=\"http://visualstudiogallery.msdn.microsoft.com/\" data-linktype=\"external\">Visual Studio Gallery</a> or you can search for it in <strong>Extensions and Updates</strong> within Visual Studio. </p>\n<p>A required configuration is to setup <strong><a href=\"https://docs.docker.com/docker-for-windows/#/shared-drives\" data-linktype=\"external\">Shared Drives</a></strong> in Docker for Windows. The setting is required for the volume mapping and debugging support.</p>\n<p>Right click the Docker icon in the System Tray, click Settings and select Shared Drives.</p>\n<p><img src=\"media/visual-studio-tools-for-docker/settings-shared-drives-win.png\" alt=\"Shared Drives\" data-linktype=\"relative-path\"> </p>\n<h2 id=\"create-an-aspnet-web-application-and-add-docker-support\">Create an ASP.NET Web Application and add Docker Support</h2>\n<p>Using Visual Studio, create a new ASP.NET Core Web Application. When the application is loaded, either select <strong>Add Docker Support</strong> from the <strong>Project Menu</strong> or right click the project from the Solution Explorer and select <strong>Add</strong> &gt; <strong>Docker Support</strong>.</p>\n<p>Project Menu</p>\n<p><img src=\"media/visual-studio-tools-for-docker/project-add-docker-support.png\" alt=\"Project Add Docker Support\" data-linktype=\"relative-path\"></p>\n<p>Project Context Menu</p>\n<p><img src=\"media/visual-studio-tools-for-docker/right-click-add-docker-support.png\" alt=\"Right Click Add Docker Support\" data-linktype=\"relative-path\"></p>\n<p>The following files are added to the project.</p>\n<ul>\n<li><strong>Dockerfile</strong>: the Docker file for ASP.NET Core applications is based on the <a href=\"https://hub.docker.com/r/microsoft/aspnetcore\" data-linktype=\"external\">microsoft/aspnetcore</a> image. This image includes the ASP.NET Core NuGet packages, which have been pre-jitted improving startup performance. When building .NET Core Console Applications, the Dockerfile FROM will reference the most recent <a href=\"https://hub.docker.com/r/microsoft/dotnet\" data-linktype=\"external\">microsoft/dotnet</a> image.</li>\n<li><strong>docker-compose.yml</strong>: base Docker Compose file used to define the collection of images to be built and run with docker-compose build/run.  </li>\n<li><strong>docker-compose.dev.debug.yml</strong>: additional docker-compose file with for iterative changes when your configuration is set to debug. Visual Studio will call -f docker-compose.yml -f docker-compose.dev.debug.yml to merge these together. This compose file is used by Visual Studio development tools.   </li>\n<li><strong>docker-compose.dev.release.yml</strong>: additional Docker Compose file to debug your release definition. It will volume mount the debugger so it doesn&#39;t change the contents of the production image.  </li>\n</ul>\n<p>The docker-compose.yml file contains the name of the image that is created when project is run. </p>\n<pre class=\"loading\"><code>version &#39;2&#39;\n\nservices:\n  hellodockertools:\n    image:  user/hellodockertools${TAG}\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - &quot;80&quot;\n</code></pre><p>In this example, <code>image: user/hellodockertools${TAG}</code> generates the image <code>user/hellodockertools:dev</code> when the application is run in <strong>Debug</strong> mode and <code>user/hellodockertools:latest</code> in <strong>Release</strong> mode respectively. </p>\n<p>You will want to change the <code>user</code> to your Docker Hub username if you plan to push the image to the registry. For example, <code>spboyer/hellodockertools</code>, or change to your private registry url <code>privateregistry.domain.com/</code> depending on your configuration.</p>\n<h3 id=\"debugging\">Debugging</h3>\n<p>Select <strong>Docker</strong> from the debug dropdown in the toolbar and use F5 to start debugging the application. </p>\n<ul>\n<li>The microsoft/aspnetcore image is acquired (if not already in your cache)</li>\n<li>ASPNETCORE_ENVIRONMENT is set to Development within the container</li>\n<li>PORT 80 is EXPOSED and mapped to a dynamically assigned port for localhost. The port is determined by the docker host and can be queried with docker ps. </li>\n<li>Your application is copied to the container</li>\n<li>Default browser is launched with the debugger attached to the container, using the dynamically assigned port. </li>\n</ul>\n<p>The resulting Docker image built is the <code>dev</code> image of your application with the <code>microsoft/aspnetcore</code> images as the base image.\nNote: the dev image is empty of your app contents as Debug confgurations use volume mounting to provide the iterative experience. To push an image, use the Release configuration.</p>\n<pre class=\"loading\"><code class=\"lang-console\">REPOSITORY                  TAG         IMAGE ID            CREATED         SIZE\nspboyer/hellodockertools    dev         0b6e2e44b3df        4 minutes ago   268.9 MB\nmicrosoft/aspnetcore        1.0.1       189ad4312ce7        5 days ago      268.9 MB\n</code></pre><p>The application is running using the container which you can see by running the <code>docker ps</code> command.</p>\n<pre class=\"loading\"><code class=\"lang-console\">CONTAINER ID        IMAGE                          COMMAND               CREATED             STATUS              PORTS                   NAMES\n3f240cf686c9        spboyer/hellodockertools:dev   &quot;tail -f /dev/null&quot;   4 minutes ago       Up 4 minutes        0.0.0.0:32769-&gt;80/tcp   hellodockertools_hellodockertools_1\n</code></pre><h3 id=\"edit-and-continue\">Edit and Continue</h3>\n<p>Changes to static files and/or razor template files (.cshtml) are automatically updated without the need of a compilation step. Make the change, save and tap refresh in the browser to view the update.  </p>\n<p>Modifications to code files require compiling and a restart of Kestrel within the container. After making the change, use CTRL + F5 to perform the process and start the application within the container. The Docker container is not rebuilt or stopped; using <code>docker ps</code> in the command line you can see that the original container is still running as of 10 minutes ago. </p>\n<pre class=\"loading\"><code class=\"lang-console\">CONTAINER ID        IMAGE                          COMMAND               CREATED             STATUS              PORTS                   NAMES\n3f240cf686c9        spboyer/hellodockertools:dev   &quot;tail -f /dev/null&quot;   10 minutes ago      Up 10 minutes       0.0.0.0:32769-&gt;80/tcp   hellodockertools_hellodockertools_1\n</code></pre><h3 id=\"publishing-docker-images\">Publishing Docker images</h3>\n<p>Once you have completed the develop and debug cycle of your application, the Visual Studio Tools for Docker will help you create the production image of your application. Change the debug dropdown to <strong>Release</strong> and build the application. The tooling will produce the image with the <code>:latest</code> tag which you can push to your private registry or Docker Hub. </p>\n<p>Using the <code>docker images</code> you can see the list of images.</p>\n<pre class=\"loading\"><code class=\"lang-console\">REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE\nspboyer/hellodockertools   latest              8184ae38ba91        5 seconds ago       278.4 MB\nspboyer/hellodockertools   dev                 0b6e2e44b3df        About an hour ago   268.9 MB\nmicrosoft/aspnetcore       1.0.1               189ad4312ce7        5 days ago          268.9 MB\n</code></pre><p>There may be an expectation for the production or release image to be smaller in size by comparison to the <strong>dev</strong> image, however through the use of the volume mapping; the debugger and application were actually being run from your local machine and not within the container. The <strong>latest</strong> image has packaged the entire application code needed to run the application on a host machine, therefore the delta is the size of your application code.</p>\n</div></div>","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"author\" content=\"spboyer\">\r\n<meta name=\"ms.author\" content=\"shboyer\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc2.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"uhfHeaderId\" content=\"MSDocsHeader-DotNet\">\r\n<meta name=\"ms.devlang\" content=\"dotnet\">\r\n<meta name=\"ms.assetid\" content=\"1f3b9a68-4dea-4b60-8cb3-f46164eedbbf\">\r\n<meta name=\"description\" content=\"Using Visual Studio Tools for Docker\">\r\n<meta name=\"keywords\" content=\".NET, .NET Core, Docker, ASP.NET Core, Visual Studio 2015\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"09/16/2016\">\r\n<meta name=\"ms.technology\" content=\"dotnet-docker\">\r\n<meta name=\"ms.prod\" content=\".net-core\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2016-12-15 06:00 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/core/docker/visual-studio-tools-for-docker.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/core/docker/visual-studio-tools-for-docker.md\">\r\n<meta name=\"document_id\" content=\"72adc5ff-80d1-de33-3679-9c7f3a750370\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../toc2.json\">\r\n","rawMetadata":{"author":"spboyer","ms.author":"shboyer","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","uhfHeaderId":"MSDocsHeader-DotNet","title":"Visual Studio Tools for Docker | Microsoft Docs","ms.devlang":"dotnet","ms.assetid":"1f3b9a68-4dea-4b60-8cb3-f46164eedbbf","description":"Using Visual Studio Tools for Docker","keywords":".NET, .NET Core, Docker, ASP.NET Core, Visual Studio 2015","ms.topic":"article","ms.date":"09/16/2016","ms.technology":"dotnet-docker","ms.prod":".net-core","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Steve Lasker","author_email":"StevenLasker@Hotmail.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"Added context (#1048)","commit_sha":"03193513706967a46f74bccdba08a56946dd67df","commit_date":"2016-09-20 15:47:34 -0400"},{"author_name":"Shayne Boyer","author_email":"spboyer@live.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Visual Studio Tools for Docker How-To (#1035)","commit_sha":"b3dd9bdc2fac27879513394a7018b1f97af28cb1","commit_date":"2016-09-20 10:01:52 -0700"}],"updated_at":"2016-12-15 06:00 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/spboyer","display_name":"Shayne Boyer","id":"7681382"},"contributors":[{"profile_url":"https://github.com/spboyer","display_name":"Shayne Boyer"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"},{"profile_url":"https://github.com/SteveLasker","display_name":"Steve Lasker","id":"7647382"}],"update_at":"12/15/2016"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/90fe68f7f3c4b46502b5d3770b1a2d57c6af748a/docs/core/docker/visual-studio-tools-for-docker.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/core/docker/visual-studio-tools-for-docker.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/core/docker/visual-studio-tools-for-docker.md","document_id":"72adc5ff-80d1-de33-3679-9c7f3a750370","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/core/docker/visual-studio-tools-for-docker","toc_asset_id":"articles/toc.json","toc_rel":"../../toc.json","_op_ogTitle":"Visual Studio Tools for Docker","_op_displayDate":"2016-9-16","_op_displayDate_source":"2016-09-16T00:00:00Z","_op_wordCount":929,"_op_rawTitle":"<h1 id=\"visual-studio-tools-for-docker\" sourcefile=\"docs/core/docker/visual-studio-tools-for-docker.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"15\">Visual Studio Tools for Docker</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/core/docker/visual-studio-tools-for-docker","fileRelativePath":"articles/core/docker/visual-studio-tools-for-docker.html"},"themesRelativePathToOutputRoot":"_themes/"}