{"content":"<div><div class=\"content\">\n<p>By <a href=\"http://ardalis.com\" data-linktype=\"external\">Steve Smith</a> and <a href=\"https://github.com/BillWagner\" data-linktype=\"external\">Bill Wagner</a></p>\n<p><a href=\"https://github.com/dotnet/docs/tree/master/samples/core/getting-started/unit-testing-using-dotnet-test\" data-linktype=\"external\">View or download sample code</a></p>\n<h2 id=\"creating-the-projects\">Creating the Projects</h2>\n<p><a href=\"../tutorials/libraries\" data-linktype=\"relative-path\">Writing Libraries with Cross Platform Tools</a>\nhas information on organizing multi-project solutions for both the\nsource and the tests. This article follows those conventions. The\nfinal project structure will be something like this:</p>\n<pre class=\"loading\"><code>/unit-testing-using-dotnet-test\n|__/PrimeService\n   |__Source Files\n   |__PrimeService.csproj\n|__/PrimeService.Tests\n   |__Test Files\n   |__PrimeService.csproj\n</code></pre><h3 id=\"creating-the-source-project\">Creating the source project</h3>\n<p>Start in the <code>unit-testing-using-dotnet-test</code> directory, create the <code>PrimeService</code> directory.\nCD into that directory, and run <code>dotnet new classlib</code> to create the source\nproject.</p>\n<p>Rename <code>Class1.cs</code> as <code>PrimeService.cs</code>. To use test-driven development (TDD), you&#39;ll create a failing implementation of the\n<code>PrimeService</code> class:</p>\n<pre class=\"loading\"><code class=\"lang-cs\">using System;\n\nnamespace Prime.Services\n{\n    public class PrimeService\n    {\n        public bool IsPrime(int candidate) \n        {\n            throw new NotImplementedException(&quot;Please create a test first&quot;);\n        } \n    }\n}\n</code></pre><h3 id=\"creating-the-test-project\">Creating the test project</h3>\n<p>Next, cd back into the &#39;unit-testing-using-dotnet-test&#39; directory, and create the <code>PrimeServices.Tests</code> directory.\nCD into the <code>PrimeService.Tests</code> directory and create a new project using\n<code>dotnet new xunit</code>. <code>dotnet new xunit</code> creates a test project\nthat uses xUnit as the test library. </p>\n<p>The generated template configured the test runner\nin the PrimeServiceTests.csproj:</p>\n<pre class=\"loading\"><code class=\"lang-xml\">  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=&quot;Microsoft.NET.Test.Sdk&quot; Version=&quot;15.0.0-preview-20170125-04&quot; /&gt;\n    &lt;PackageReference Include=&quot;xunit&quot; Version=&quot;2.2.0-beta5-build3474&quot; /&gt;\n    &lt;PackageReference Include=&quot;xunit.runner.visualstudio&quot; Version=&quot;2.2.0-beta5-build1225&quot; /&gt;\n  &lt;/ItemGroup&gt;\n</code></pre><p>The test project requires other packages to create and run unit tests.\n<code>dotnet new</code> added xUnit, and the xUnit runner. You need to add the PrimeService\npackage as another dependency to the project. You can do that using the <code>dotnet</code>\nCLI:</p>\n<pre class=\"loading\"><code>dotnet add reference ../PrimeService/PrimeService.csproj\n</code></pre><p>Or, you can directly edit the <code>PrimeService.Tests.csproj</code> file.\nDirectly under the first\n<code>&lt;ItemGroup&gt;</code> node, add another <code>&lt;ItemGroup&gt;</code> node with a reference to \nthe library project:</p>\n<pre class=\"loading\"><code class=\"lang-xml\">  &lt;ItemGroup&gt;\n    &lt;ProjectReference Include=&quot;..\\PrimeService\\PrimeService.csproj&quot; /&gt;\n  &lt;/ItemGroup&gt;\n</code></pre><p>You can see the entire file in the\n<a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-dotnet-test/PrimeService.Tests/PrimeService.Tests.csproj\" data-linktype=\"external\">samples repository</a> \non GitHub.</p>\n<p>After this initial structure is in place, you can write your first test.\nOnce you verify that first unit test, everything is configured and should run smoothly\nas you add features and tests.</p>\n<h2 id=\"creating-the-first-test\">Creating the first test</h2>\n<p>Before building the library or the tests, you need to run <code>dotnet restore</code>\nin both the <code>PrimeService</code> and <code>PrimeService.Tests</code> directories. This\ncommand restores all the necessary NuGet packages for each project.</p>\n<p>The TDD approach calls for writing one failing test, then making it pass,\nthen repeating the process. So, let&#39;s write that one failing test. Remove\n<code>UnitTest1.cs</code> from the <code>PrimeService.Tests</code> directory, and create a new\nC# file named <code>PrimeService_IsPrimeShould.cs</code> with the following content:</p>\n<pre class=\"loading\"><code class=\"lang-cs\">using Xunit;\nusing Prime.Services;\n\nnamespace Prime.UnitTests.Services\n{\n    public class PrimeService_IsPrimeShould\n    {\n        private readonly PrimeService _primeService;\n         public PrimeService_IsPrimeShould()\n         {\n             _primeService = new PrimeService();\n         }\n\n        [Fact]\n        public void ReturnFalseGivenValueOf1()\n        {\n            var result = _primeService.IsPrime(1);\n\n            Assert.False(result, $&quot;1 should not be prime&quot;);\n        }\n    }\n}\n</code></pre><p>The <code>[Fact]</code> attribute denotes a method as a single test. </p>\n<p>Save this file, then run <code>dotnet build</code> to build the test project.\nIf you have not already built the <code>PrimeService</code> project, the\nbuild system will detect that and build it because it is a\ndependency of the test project.</p>\n<p>Now, execute <code>dotnet test</code> to run the tests from the console.\nThe xUnit test runner has the program entry point to run your\ntests from the Console. <code>dotnet test</code> starts the\ntest runner, and provides a command line argument to the\ntestrunner indicating the assembly that contains your tests.</p>\n<p>Your test fails. You haven&#39;t created the implementation yet.\nWrite the simplest code to make this one test pass:</p>\n<pre class=\"loading\"><code class=\"lang-cs\">public bool IsPrime(int candidate) \n{\n    if(candidate == 1) \n    { \n        return false;\n    } \n    throw new NotImplementedException(&quot;Please create a test first&quot;);\n} \n</code></pre><h3 id=\"adding-more-features\">Adding More Features</h3>\n<p>Now, that you&#39;ve made one test pass, it&#39;s time to write more.\nThere are a few other simple cases for prime numbers: 0, -1. You\ncould add those as new tests, with the <code>[Fact]</code> attribute, but that\nquickly becomes tedious. There are other xUnit attributes that enable\nyou to write a suite of similar tests.  A <code>Theory</code> represents a suite\nof tests that execute the same code, but have different input arguments.\nYou can use the <code>[InlineData]</code> attribute to specify values for those\ninputs. </p>\n<p> Instead of creating new tests, leverage these two attributes\n to create a single theory that tests some values less than 2,\n which is the lowest prime number:</p>\n<pre><code class=\"lang-csharp\" name=\"Sample_TestCode\" title=\"First tests\">[Theory]\n[InlineData(-1)]\n[InlineData(0)]\n[InlineData(1)]\npublic void ReturnFalseGivenValuesLessThan2(int value)\n{\n    var result = _primeService.IsPrime(value);\n    \n    Assert.False(result, $&quot;{value} should not be prime&quot;);\n}\n</code></pre><p>Run <code>dotnet test</code> and you&#39;ll see that two of these tests fail.\nYou can make them pass by changing the service. You need to change\nthe <code>if</code> clause at the beginning of the method:</p>\n<pre class=\"loading\"><code class=\"lang-cs\">if(candidate &lt; 2)\n</code></pre><p>Now, these tests all pass.</p>\n<p>You continue to iterate by adding more tests, more theories,\nand more code in the main library. You&#39;ll quickly end up\nwith the\n<a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-dotnet-test/PrimeService.Tests/PrimeService_IsPrimeShould.cs\" data-linktype=\"external\">finished version of the tests</a>\nand the\n<a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-dotnet-test/PrimeService/PrimeService.cs\" data-linktype=\"external\">complete implementation of the library</a>.</p>\n<p>You&#39;ve built a small library and a set of unit tests for that library.\nYou&#39;ve structured this solution so that adding new packages and tests\nwill be seamless, and you can concentrate on the problem at hand. The \ntools will run automatically.</p>\n</div></div>","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"author\" content=\"ardalis\">\r\n<meta name=\"ms.author\" content=\"wiwagn\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc1.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.devlang\" content=\"dotnet\">\r\n<meta name=\"ms.assetid\" content=\"bdcdb812-6f13-4f20-9e90-0c0977937142\">\r\n<meta name=\"description\" content=\"Unit Testing in .NET Core using dotnet test\">\r\n<meta name=\"keywords\" content=\".NET, .NET Core\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"003/14/2017\">\r\n<meta name=\"ms.prod\" content=\".net-core\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2017-03-15 06:14 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/8ece5eba1fc284b8ddffecb9fdc4f24ae5f5fa72/docs/core/testing/unit-testing-with-dotnet-test.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/core/testing/unit-testing-with-dotnet-test.md\">\r\n<meta name=\"document_id\" content=\"24fe0bc3-e54a-7dbb-eb3b-8ee07b34f455\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../toc1.json\">\r\n","rawMetadata":{"author":"ardalis","ms.author":"wiwagn","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","title":"Unit Testing in .NET Core using dotnet test | Microsoft Docs","ms.devlang":"dotnet","ms.assetid":"bdcdb812-6f13-4f20-9e90-0c0977937142","description":"Unit Testing in .NET Core using dotnet test","keywords":".NET, .NET Core","ms.topic":"article","ms.date":"003/14/2017","ms.prod":".net-core","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"Pablo Tôndolo de Vargas","author_email":"pablotdv@gmail.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Pablotdv unit testing with dotnet test (#1727)","commit_sha":"8ece5eba1fc284b8ddffecb9fdc4f24ae5f5fa72","commit_date":"2017-03-14 09:53:48 -0700"},{"author_name":"Hamed","author_email":"hmdhasani@hotmail.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Correct some problems in the unit testing tutorial (#1717)","commit_sha":"e02b34e2fe784ea041640f9b261a22e1ff008654","commit_date":"2017-03-12 23:58:24 -0700"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"removing stray backticks (#1689)","commit_sha":"15451ddbbbce939ddd9e84b8f40fb8daacd9413a","commit_date":"2017-03-10 00:01:47 -0800"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Update Unit Testing with XUnit (#1487)","commit_sha":"cf57f2faff1860ad20eb3ef7deb35c57a80c9480","commit_date":"2017-03-07 08:10:52 -0500"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Update mstest tutorial for csproj (#1531)","commit_sha":"5420b3c8923e7b3581f3d961bf152d1cf92dadab","commit_date":"2017-02-24 18:43:10 -0500"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Fix Issue 1190 (#1310)","commit_sha":"5687fc7ded899a478d1972ffea10a1e37d40124b","commit_date":"2017-01-04 11:03:47 -0500"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Metadata updates (#1313)","commit_sha":"90fe68f7f3c4b46502b5d3770b1a2d57c6af748a","commit_date":"2016-12-09 12:40:41 -0800"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"renamed repo/fixed headings (#1186)","commit_sha":"15c55a87beb64f265a164db918c7721c7690fadf","commit_date":"2016-10-29 15:23:17 -0400"},{"author_name":"Nicolò Carandini","author_email":"ncarandini@users.noreply.github.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Fix Tip content (remove \"you can\" repetition) (#997)","commit_sha":"d652eeea8c22fb2005c05e8d6b7d074d0c1be1fe","commit_date":"2016-09-02 08:49:21 -0700"},{"author_name":"Nicolò Carandini","author_email":"ncarandini@users.noreply.github.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"Add MSTest tutorial (#915) (#921)","commit_sha":"1b8fcea1cf197a2cbf19a5b591fcf6cda8cdb42e","commit_date":"2016-08-30 17:15:51 -0400"},{"author_name":"Edward Brey","author_email":"edward@breyfamily.net","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Clarify that test folder is a sibling to the src folder (#974)","commit_sha":"722f6b88c48a759679ee0e13bf2dcdebd0201bdf","commit_date":"2016-08-26 09:42:01 -0700"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Update ci build for ubuntu (#891)","commit_sha":"ce52ada663c2ed9b8b3d10bc3d4dcb453abb79f7","commit_date":"2016-08-09 16:02:13 -0400"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"fixing broken link (#867)","commit_sha":"9e9ba4f45620e6e8e8b41a9e21178a99e69fcb39","commit_date":"2016-08-07 23:01:12 -0700"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"fix broken link (#853)","commit_sha":"345c60b803916ec886f715587f85f50be0956592","commit_date":"2016-08-04 11:22:32 -0700"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Update Samples section of contributing.md (#796)","commit_sha":"d82a5907ae4405358eccb9fd8b8dd68a3996fc74","commit_date":"2016-07-28 14:26:57 -0400"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Update samples still usring rc2 (#801)","commit_sha":"69b9dd581cc765e4865c776fc0fd5b8ae33e5d5c","commit_date":"2016-07-14 16:51:02 -0400"},{"author_name":"Sajad Robati","author_email":"ss.robati@gmail.com","committer_name":"Phillip Carter","comitter_email":"phillip.carter@outlook.com","message":"Update unit-testing-with-dotnet-test.md (#738)","commit_sha":"6e4eaeb639d1d7176d4f05f7809fbe445da01769","commit_date":"2016-07-04 14:39:33 -0700"},{"author_name":"Petr Onderka","author_email":"gsvick@gmail.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@users.noreply.github.com","message":"Corrected titles and headings (#690)","commit_sha":"17cac6e7690fd2b08d9f5f73060056d14bca13d2","commit_date":"2016-06-28 12:36:36 -0700"},{"author_name":"Tom Dykstra","author_email":"tdykstra@microsoft.com","committer_name":"Rich Lander","comitter_email":"rlander@microsoft.com","message":"fix broken links (#651)","commit_sha":"62fdb3e60b206728d86220076867eb8fd68af82e","commit_date":"2016-06-26 10:58:55 -0700"},{"author_name":"Steve Hoag","author_email":"shoag@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Fixed references to RC2, OS X, and Update 2 (#612)","commit_sha":"093b852fe1ed2307ebce914381fe47388b435c95","commit_date":"2016-06-24 15:07:22 -0700"},{"author_name":"Tom Dykstra","author_email":"tdykstra@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"toc changes for .net core guide section (#609)","commit_sha":"a77454a141ed46eaeeda25dc723476fdb4e542e9","commit_date":"2016-06-24 15:15:55 -0400"}],"updated_at":"2017-03-15 06:14 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/ardalis","display_name":"Steve Smith","id":"782127"},"contributors":[{"profile_url":"https://github.com/ardalis","display_name":"Steve Smith"},{"profile_url":"https://github.com/pablotdv","display_name":"Pablo Tôndolo de Vargas","id":"3980593"},{"profile_url":"https://github.com/hmdhasani","display_name":"Hamed","id":"11094468"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"},{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"},{"profile_url":"https://github.com/ncarandini","display_name":"Nicolò Carandini","id":"139274"},{"profile_url":"https://github.com/breyed","display_name":"Edward Brey","id":"1299073"},{"profile_url":"https://github.com/srobati","display_name":"Sajad Robati","id":"2736646"},{"profile_url":"https://github.com/svick","display_name":"Petr Onderka","id":"287848"},{"profile_url":"https://github.com/tdykstra","display_name":"Tom Dykstra","id":"1569635"},{"profile_url":"https://github.com/stevehoag","display_name":"Steve Hoag","id":"13489215"}],"update_at":"3/15/2017"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/8ece5eba1fc284b8ddffecb9fdc4f24ae5f5fa72/docs/core/testing/unit-testing-with-dotnet-test.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/core/testing/unit-testing-with-dotnet-test.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/core/testing/unit-testing-with-dotnet-test.md","document_id":"24fe0bc3-e54a-7dbb-eb3b-8ee07b34f455","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/core/testing/unit-testing-with-dotnet-test","toc_asset_id":"articles/toc.json","toc_rel":"../../toc.json","_op_ogTitle":"Unit Testing in .NET Core using dotnet test","_op_displayDate":"2017-3-14","_op_displayDate_source":"2017-03-14T00:00:00Z","_op_wordCount":821,"_op_rawTitle":"<h1 id=\"unit-testing-in-net-core-using-dotnet-test\" sourcefile=\"docs/core/testing/unit-testing-with-dotnet-test.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Unit Testing in .NET Core using dotnet test</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/core/testing/unit-testing-with-dotnet-test","fileRelativePath":"articles/core/testing/unit-testing-with-dotnet-test.html"},"themesRelativePathToOutputRoot":"_themes/"}