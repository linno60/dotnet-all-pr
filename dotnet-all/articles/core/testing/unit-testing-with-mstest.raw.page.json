{"content":"<div><div class=\"content\">\n<p>This tutorial takes you through an interactive experience building a sample solution step-by-step to learn unit testing concepts. If you prefer to follow the tutorial using a pre-built solution, <a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-mstest/\" data-linktype=\"external\">view or download the sample code</a> before you begin.</p>\n<h3 id=\"creating-the-source-project\">Creating the source project</h3>\n<p>Open a shell window. Create a directory called <em>unit-testing-using-dotnet-test</em> to hold the solution. Inside this new directory, create a <em>PrimeService</em> directory. The directory structure thus far is shown below:</p>\n<pre class=\"loading\"><code>/unit-testing-using-mstest\n    /PrimeService\n</code></pre><p>Make <em>PrimeService</em> the current directory and run <a href=\"../tools/dotnet-new\" data-linktype=\"relative-path\"><code>dotnet new classlib</code></a> to create the source project. Rename <em>Class1.cs</em> to <em>PrimeService.cs</em>. To use test-driven development (TDD), you&#39;ll create a failing implementation of the <code>PrimeService</code> class:</p>\n<pre class=\"loading\"><code class=\"lang-csharp\">using System;\n\nnamespace Prime.Services\n{\n    public class PrimeService\n    {\n        public bool IsPrime(int candidate) \n        {\n            throw new NotImplementedException(&quot;Please create a test first&quot;);\n        } \n    }\n}\n</code></pre><h3 id=\"creating-the-test-project\">Creating the test project</h3>\n<p>Change the directory back to the <em>unit-testing-using-mstest</em> directory and create the <em>PrimeServices.Tests</em> directory. The directory structure is shown below:</p>\n<pre class=\"loading\"><code>/unit-testing-using-mstest\n    /PrimeService\n        Source Files\n        PrimeService.csproj\n    /PrimeService.Tests\n</code></pre><p>Make the <em>PrimeService.Tests</em> directory the current directory and create a new project using <a href=\"../tools/dotnet-new\" data-linktype=\"relative-path\"><code>dotnet new mstest</code></a>. This creates a test project that uses MStest as the test library. The generated template configures the test runner in the <em>PrimeServiceTests.csproj</em> file:</p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;ItemGroup&gt;\n  &lt;PackageReference Include=&quot;Microsoft.NET.Test.Sdk&quot; Version=&quot;15.0.0&quot; /&gt;\n  &lt;PackageReference Include=&quot;MSTest.TestAdapter&quot; Version=&quot;1.1.11&quot; /&gt;\n  &lt;PackageReference Include=&quot;MSTest.TestFramework&quot; Version=&quot;1.1.11&quot; /&gt;\n&lt;/ItemGroup&gt;\n</code></pre><p>The test project requires other packages to create and run unit tests. <code>dotnet new</code> in the previous step added the MSTest SDK, the MSTest test framework, and the MSTest runner. Now, add the <code>PrimeService</code> class library as another dependency to the project. Use the <a href=\"../tools/dotnet-add-reference\" data-linktype=\"relative-path\"><code>dotnet add reference</code></a> command:</p>\n<pre class=\"loading\"><code>dotnet add reference ../PrimeService/PrimeService.csproj\n</code></pre><p>Another option is to edit the <em>PrimeService.Tests.csproj</em> file. Directly under the first <code>&lt;ItemGroup&gt;</code> node, add another <code>&lt;ItemGroup&gt;</code> node with a reference to the library project:</p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;ItemGroup&gt;\n  &lt;ProjectReference Include=&quot;..\\PrimeService\\PrimeService.csproj&quot; /&gt;\n&lt;/ItemGroup&gt;\n</code></pre><p>You can see the entire file in the <a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-mstest/PrimeService.Tests/PrimeService.Tests.csproj\" data-linktype=\"external\">samples repository</a> on GitHub.</p>\n<p>The final solution layout is shown below:</p>\n<pre class=\"loading\"><code>/unit-testing-using-mstest\n    /PrimeService\n        Source Files\n        PrimeService.csproj\n    /PrimeService.Tests\n        PrimeService\n        PrimeServiceTests.csproj\n</code></pre><h2 id=\"creating-the-first-test\">Creating the first test</h2>\n<p>Before building the library or the tests, execute <a href=\"../tools/dotnet-restore\" data-linktype=\"relative-path\"><code>dotnet restore</code></a> in the <em>PrimeService.Tests</em> directory. This command restores all the necessary NuGet packages for each project.</p>\n<p>The TDD approach calls for writing one failing test, making it pass, then repeating the process. Remove <em>UnitTest1.cs</em> from the <em>PrimeService.Tests</em> directory and create a new C# file named <em>PrimeService_IsPrimeShould.cs</em> with the following content:</p>\n<pre class=\"loading\"><code class=\"lang-csharp\">using Microsoft.VisualStudio.TestTools.UnitTesting;\nusing Prime.Services;\n\nnamespace Prime.UnitTests.Services\n{\n    [TestClass]\n    public class PrimeService_IsPrimeShould\n    {\n        private readonly PrimeService _primeService;\n\n        public PrimeService_IsPrimeShould()\n        {\n            _primeService = new PrimeService();\n        }\n\n        [TestMethod]\n        public void ReturnFalseGivenValueOf1()\n        {\n            var result = _primeService.IsPrime(1);\n\n            Assert.IsFalse(result, $&quot;1 should not be prime&quot;);\n        }\n    }\n}\n</code></pre><p>The <code>[TestClass]</code> attribute denotes a class that contains unit tests. The <code>[TestMethod]</code> attribute denotes a method as a single test. </p>\n<p>Save this file and execute <a href=\"../tools/dotnet-test\" data-linktype=\"relative-path\"><code>dotnet test</code></a> to build the tests and the class library and then run the tests. The MSTest test runner contains the program entry point to run your tests. <code>dotnet test</code> starts the test runner and provides a command-line argument to the test runner indicating the assembly that contains your tests.</p>\n<p>Your test fails. You haven&#39;t created the implementation yet. Write the simplest code in the <code>PrimeService</code> class to make this test pass:</p>\n<pre class=\"loading\"><code class=\"lang-csharp\">public bool IsPrime(int candidate) \n{\n    if (candidate == 1) \n    { \n        return false;\n    } \n    throw new NotImplementedException(&quot;Please create a test first&quot;);\n} \n</code></pre><p>In the <em>PrimeService.Tests</em> directory, run <code>dotnet test</code> again. The <code>dotnet test</code> command runs a build for the <code>PrimeService</code> project and then for the <code>PrimeService.Tests</code> project. After building both projects, it runs this single test. It passes.</p>\n<h2 id=\"adding-more-features\">Adding more features</h2>\n<p>Now that you&#39;ve made one test pass, it&#39;s time to write more. There are a few other simple cases for prime numbers: 0, -1. You could add those as new tests with the <code>[TestMethod]</code> attribute, but that quickly becomes tedious. There are other MSTest attributes that enable you to write a suite of similar tests.  A <code>[DataTestMethod]</code>attribute represents a suite of tests that execute the same code but have different input arguments. You can use the <code>[DataRow]</code> attribute to specify values for those inputs. </p>\n<p>Instead of creating new tests, leverage these two attributes to create a single data test method that tests several values less than two, which is the lowest prime number:</p>\n<pre><code class=\"lang-csharp\" name=\"Sample_TestCode\">[DataTestMethod]\n[DataRow(-1)]\n[DataRow(0)]\n[DataRow(1)]\npublic void ReturnFalseGivenValuesLessThan2(int value)\n{\n    var result = _primeService.IsPrime(value);\n\n    Assert.IsFalse(result, $&quot;{value} should not be prime&quot;);\n}\n</code></pre><p>Run <code>dotnet test</code>, and two of these tests fail. To make all of the tests pass, change the <code>if</code> clause at the beginning of the method:</p>\n<pre class=\"loading\"><code class=\"lang-csharp\">if (candidate &lt; 2)\n</code></pre><p>Continue to iterate by adding more tests, more theories, and more code in the main library. You&#39;ll end up with the <a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-mstest/PrimeService.Tests/PrimeService_IsPrimeShould.cs\" data-linktype=\"external\">finished version of the tests</a> and the <a href=\"https://github.com/dotnet/docs/blob/master/samples/core/getting-started/unit-testing-using-mstest/PrimeService/PrimeService.cs\" data-linktype=\"external\">complete implementation of the library</a>.</p>\n<p>You&#39;ve built a small library and a set of unit tests for that library. You&#39;ve structured the solution so that adding new packages and tests is seamless, and you can concentrate most of your time and effort on solving the goals of the applicaiton.</p>\n</div></div>","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"author\" content=\"ncarandini\">\r\n<meta name=\"ms.author\" content=\"wiwagn\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc2.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"uhfHeaderId\" content=\"MSDocsHeader-DotNet\">\r\n<meta name=\"ms.devlang\" content=\"dotnet\">\r\n<meta name=\"ms.assetid\" content=\"ed447641-3e85-4e50-b7ed-004630048a3e\">\r\n<meta name=\"description\" content=\"How to use MSTest with .NET Core\">\r\n<meta name=\"keywords\" content=\"MSTest, .NET, .NET Core\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"03/21/2017\">\r\n<meta name=\"ms.prod\" content=\".net-core\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2017-04-01 05:46 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/400dfda51d978f35c3995f90840643aaff1b9c13/docs/core/testing/unit-testing-with-mstest.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/core/testing/unit-testing-with-mstest.md\">\r\n<meta name=\"document_id\" content=\"232f440f-c71d-c97e-dbe1-305b0b6a3d1b\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../toc2.json\">\r\n","rawMetadata":{"author":"ncarandini","ms.author":"wiwagn","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","uhfHeaderId":"MSDocsHeader-DotNet","title":"Unit testing with MSTest and .NET Core | Microsoft Docs","ms.devlang":"dotnet","ms.assetid":"ed447641-3e85-4e50-b7ed-004630048a3e","description":"How to use MSTest with .NET Core","keywords":"MSTest, .NET, .NET Core","ms.topic":"article","ms.date":"03/21/2017","ms.prod":".net-core","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"tompratt-AQ","author_email":"v-thprat@microsoft.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Update language identifiers and styleguide. (#1796)","commit_sha":"400dfda51d978f35c3995f90840643aaff1b9c13","commit_date":"2017-03-24 14:01:03 -0700"},{"author_name":"Luke Latham","author_email":"GuardRex@users.noreply.github.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"Patch unit testing samples (#1766)","commit_sha":"8ce7063750e8ad7b0b8b6255aa35e3f7dfb1a569","commit_date":"2017-03-21 15:51:42 -0400"},{"author_name":"Luke Latham","author_email":"GuardRex@users.noreply.github.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"Update unit test tutorials (#1726)","commit_sha":"ff143583ba62fc1d82561e739a75107e50ebee88","commit_date":"2017-03-20 18:13:13 -0400"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":":boom: removing preview3 folder (#1650)","commit_sha":"c2722327c3ca213309cae5e0d0417b0f0e9ea514","commit_date":"2017-03-07 03:26:34 -0800"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Update mstest tutorial for csproj (#1531)","commit_sha":"5420b3c8923e7b3581f3d961bf152d1cf92dadab","commit_date":"2017-02-24 18:43:10 -0500"}],"updated_at":"2017-04-01 05:46 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/ncarandini","display_name":"Nicolò Carandini","id":"139274"},"contributors":[{"profile_url":"https://github.com/ncarandini","display_name":"Nicolò Carandini"},{"profile_url":"https://github.com/tompratt-AQ","display_name":"tompratt-AQ","id":"26311438"},{"profile_url":"https://github.com/GuardRex","display_name":"Luke Latham","id":"1622880"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"},{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"}],"update_at":"4/1/2017"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/400dfda51d978f35c3995f90840643aaff1b9c13/docs/core/testing/unit-testing-with-mstest.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/core/testing/unit-testing-with-mstest.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/core/testing/unit-testing-with-mstest.md","document_id":"232f440f-c71d-c97e-dbe1-305b0b6a3d1b","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/core/testing/unit-testing-with-mstest","toc_asset_id":"articles/toc.json","toc_rel":"../../toc.json","_op_ogTitle":"Unit testing with MSTest and .NET Core","_op_displayDate":"2017-3-21","_op_displayDate_source":"2017-03-21T00:00:00Z","_op_wordCount":824,"_op_rawTitle":"<h1 id=\"unit-testing-with-mstest-and-net-core\" sourcefile=\"docs/core/testing/unit-testing-with-mstest.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Unit testing with MSTest and .NET Core</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/core/testing/unit-testing-with-mstest","fileRelativePath":"articles/core/testing/unit-testing-with-mstest.html"},"themesRelativePathToOutputRoot":"_themes/"}