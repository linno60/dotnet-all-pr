{"content":"<div><div class=\"content\">\n<p>This document outlines the changes that were added to the project files as part of the move from <em>project.json</em> to <em>csproj</em> and \n<a href=\"https://github.com/Microsoft/MSBuild\" data-linktype=\"external\">MSBuild</a>. For more information about general project file syntax and reference, \nsee <a href=\"https://docs.microsoft.com/visualstudio/msbuild/msbuild-project-file-schema-reference\" data-linktype=\"external\">the MSBuild project file</a> documentation.  </p>\n<h2 id=\"implicit-package-references\">Implicit package references</h2>\n<p>Metapackages are now implicitly referenced based on the target framework specified in the <code>&lt;TargetFramework&gt;</code> or <code>&lt;TargetFrameworks&gt;</code> property of your project file. \nIf the target framework is <code>netcoreap1.x</code>, the proper version of the <code>Microsoft.NETCore.App</code> metapackage is referenced. \nOtherwise, if the target framework is <code>netstandard1.x</code>, the proper version of the <code>NetStandard.Library</code> metapackage is referenced.</p>\n<p>As far as the rest of the behavior is concerned, the tools will work as expected and most of the gestures will remain the same (for example, <code>dotnet restore</code>). </p>\n<h3 id=\"recommendations\">Recommendations</h3>\n<p>Since <code>Microsoft.NETCore.App</code> or <code>NetStandard.Library</code> metapackages are now implicitly referenced, the following are our recommended best practices:</p>\n<ul>\n<li>Never have an explicit reference to the <code>Microsoft.NETCore.App</code> or <code>NetStandard.Library</code> metapackages via the <code>&lt;PackageReference&gt;</code> property in your project file.</li>\n<li>If you need a specific version of the runtime, you should use the <code>&lt;RuntimeFrameworkVersion&gt;</code> property in your project (for example, <code>1.0.4</code>) instead of referencing the metapackage.<ul>\n<li>This might happen if you are using <a href=\"../deploying/index#self-contained-deployments-scd\" data-linktype=\"relative-path\">self-contained deployments</a> and you need a specific patch version of 1.0.0 LTS runtime, for example.</li>\n</ul>\n</li>\n<li>If you need a specific version of the <code>NetStandard.Library</code> metapackage, you can use the <code>&lt;NetStandardImplicitPackageVersion&gt;</code> property and set the version you need. </li>\n</ul>\n<h2 id=\"default-compilation-includes-in-net-core-projects\">Default compilation includes in .NET Core projects</h2>\n<p>With the move to the <em>csproj</em> format in the latest SDK versions, we&#39;ve moved the default includes and excludes for compile items and embedded resources to the SDK properties files. This means that you no longer need to specify these items in your project file. </p>\n<p>The main reason for doing this is to reduce the clutter in your project file. The defaults that are present in the SDK should cover most common use cases, so there is no need to repeat them in every project that you create. This leads to smaller project files that are much easier to understand as well as edit by hand, if needed. </p>\n<p>The following table shows which element and which <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\" data-linktype=\"external\">globs</a> are both included and excluded in the SDK: </p>\n<table>\n<thead>\n<tr>\n<th>Element</th>\n<th>Include glob</th>\n<th>Exclude glob</th>\n<th>Remove glob</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Compile</td>\n<td>**/*.cs (or other language extensions)</td>\n<td>**/*.user;  **/*.*proj;  **/*.sln;  **/*.vssscc</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td>EmbeddedResource</td>\n<td>**/*.resx</td>\n<td>**/*.user; **/*.*proj; **/*.sln; **/*.vssscc</td>\n<td>N/A</td>\n</tr>\n<tr>\n<td>None</td>\n<td>**/*</td>\n<td>**/*.user; **/*.*proj; **/*.sln; **/*.vssscc</td>\n<td>- **/*.cs; **/*.resx</td>\n</tr>\n</tbody>\n</table>\n<p>If you have globs in your project and you try to build it using the newest SDK, you&#39;ll get the following error:</p>\n<blockquote><p>Duplicate Compile items were included. The .NET SDK includes Compile items from your project directory by default. You can either remove these items from your project file, or set the &#39;EnableDefaultCompileItems&#39; property to &#39;false&#39; if you want to explicitly include them in your project file. </p>\n</blockquote>\n<p>In order to get around this error, you can either remove the explicit <code>Compile</code> items that match the ones listed on the previous table, or you can set the <code>&lt;EnableDefaultCompileItems&gt;</code> property to <code>false</code>, like this:</p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;PropertyGroup&gt;\n    &lt;EnableDefaultCompileItems&gt;false&lt;/EnableDefaultCompileItems&gt;\n&lt;/PropertyGroup&gt;\n</code></pre><p>Setting this property to <code>false</code> will override implicit inclusion and the behavior will revert back to the previous SDKs where you had to specify the default globs in your project. </p>\n<p>This change does not modify the main mechanics of other includes. However, if you wish to specify, for example, some files to get published with your app, you can still use the known mechanisms in <em>csproj</em> for that (for example, the <code>&lt;Content&gt;</code> element).</p>\n<h3 id=\"recommendation\">Recommendation</h3>\n<p>With csproj, we recommend that you remove the default globs from your project and only add file paths with globs for those artifacts that your app/library needs for various scenarios (runtime, NuGet packaging, etc.)</p>\n<h2 id=\"additions\">Additions</h2>\n<h3 id=\"sdk-attribute\">Sdk attribute</h3>\n<p>The <code>&lt;Project&gt;</code> element of the <em>.csproj</em> file has a new attribute called <code>Sdk</code>. <code>Sdk</code> specifies which SDK will be used by the project. The SDK, as the <a href=\"cli-msbuild-architecture\" data-linktype=\"relative-path\">layering document</a> describes, is a set of MSBuild <a href=\"https://docs.microsoft.com/visualstudio/msbuild/msbuild-tasks\" data-linktype=\"external\">tasks</a> and <a href=\"https://docs.microsoft.com/visualstudio/msbuild/msbuild-targets\" data-linktype=\"external\">targets</a> that can build .NET Core code. We ship two main SDKs with the .NET Core tools:</p>\n<ol>\n<li>The .NET Core SDK with the ID of <code>Microsoft.NET.Sdk</code></li>\n<li>The .NET Core web SDK with the ID of <code>Microsoft.NET.Sdk.Web</code></li>\n</ol>\n<p>You need to have the <code>Sdk</code> attribute set to one of those IDs on the <code>&lt;Project&gt;</code> element in order to use the .NET Core tools and build your code. </p>\n<h3 id=\"packagereference\">PackageReference</h3>\n<p>Item that specifies a NuGet dependency in the project. The <code>Include</code> attribute specifies the package ID. </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;PackageReference Include=&quot;&lt;package-id&gt;&quot; Version=&quot;&quot; PrivateAssets=&quot;&quot; IncludeAssets=&quot;&quot; ExcludeAssets=&quot;&quot; /&gt;\n</code></pre><h4 id=\"version\">Version</h4>\n<p><code>Version</code> specifies the version of the package to restore. The element respects the rules of the NuGet versioning scheme.</p>\n<h4 id=\"includeassets-excludeassets-and-privateassets\">IncludeAssets, ExcludeAssets and PrivateAssets</h4>\n<p><code>IncludeAssets</code> attribute specifies what assets belonging to the package specified by <code>&lt;PackageReference&gt;</code> should be \nconsumed. </p>\n<p><code>ExcludeAssets</code> attribute specifies what assets belonging to the package specified by <code>&lt;PackageReference&gt;</code> should not \nbe consumed.</p>\n<p><code>PrivateAssets</code> attribute specifies what assets belonging to the package specified by <code>&lt;PackageReference&gt;</code> should be \nconsumed but that they should not flow to the next project. </p>\n<div class=\"NOTE\"><h5>Note</h5><p><code>PrivateAssets</code> is equivalent to the <em>project.json</em>/<em>xproj</em> <code>SuppressParent</code> element.</p>\n</div>\n<p>These attributes can contain one or more of the following items:</p>\n<ul>\n<li><code>Compile</code> – the contents of the lib folder are available to compile against.</li>\n<li><code>Runtime</code> – the contents of the runtime folder are distributed.</li>\n<li><code>ContentFiles</code> – the contents of the <em>contentfiles</em> folder are used.</li>\n<li><code>Build</code> – the props/targets in the build folder are used.</li>\n<li><code>Native</code> – the contents from native assets are copied to the output folder for runtime.</li>\n<li><code>Analyzers</code> – the analyzers are used.</li>\n</ul>\n<p>Alternatively, the attribute can contain:</p>\n<ul>\n<li><code>None</code> – none of the assets are used.</li>\n<li><code>All</code> – all assets are used.</li>\n</ul>\n<h3 id=\"dotnetclitoolreference\">DotNetCliToolReference</h3>\n<p><code>&lt;DotNetCliToolReference&gt;</code> item element specifies the CLI tool that the user wants to restore in the context of the project. It&#39;s \na replacement for the <code>tools</code> node in <em>project.json</em>. </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;DotNetCliToolReference Include=&quot;&lt;package-id&gt;&quot; Version=&quot;&quot; /&gt;\n</code></pre><h4 id=\"version-1\">Version</h4>\n<p><code>Version</code> specifies the version of the package to restore. The attribute respect the rules of the NuGet versioning scheme.</p>\n<h3 id=\"runtimeidentifiers\">RuntimeIdentifiers</h3>\n<p>The <code>&lt;RuntimeIdentifiers&gt;</code> element lets you specify a semicolon-delimited list of <a href=\"../rid-catalog\" data-linktype=\"relative-path\">Runtime Identifiers (RIDs)</a> for the project. \nRIDs enable publishing a self-contained deployments. </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;RuntimeIdentifiers&gt;win10-x64;osx.10.11-x64;ubuntu.16.04-x64&lt;/RuntimeIdentifiers&gt;\n</code></pre><h3 id=\"runtimeidentifier\">RuntimeIdentifier</h3>\n<p>The <code>&lt;RuntimeIdentifier&gt;</code> element allows you to specify only one <a href=\"../rid-catalog\" data-linktype=\"relative-path\">Runtime Identifier (RID)</a> for the project. RIDs enable publishing a self-contained deployment. </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;RuntimeIdentifier&gt;ubuntu.16.04-x64&lt;/RuntimeIdentifier&gt;\n</code></pre><h3 id=\"packagetargetfallback\">PackageTargetFallback</h3>\n<p>The <code>&lt;PackageTargetFallback&gt;</code> element allows you to specify a set of compatible targets to be used when restoring packages. It&#39;s designed to allow packages that use the dotnet <a href=\"https://docs.microsoft.com/nuget/schema/target-frameworks\" data-linktype=\"external\">TxM (Target x Moniker)</a> to operate with packages that don&#39;t declare a dotnet TxM. If your project uses the dotnet TxM, then all the packages it depends on must also have a dotnet TxM, unless you add the <code>&lt;PackageTargetFallback&gt;</code> to your project in order to allow non-dotnet platforms to be compatible with dotnet. </p>\n<p>The following example provides the fallbacks for all targets in your project: </p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;PackageTargetFallback&gt;\n    $(PackageTargetFallback);portable-net45+win8+wpa81+wp8\n&lt;/PackageTargetFallback &gt;\n</code></pre><p>The following example specifies the fallbacks only for the <code>netcoreapp1.0</code> target:</p>\n<pre class=\"loading\"><code class=\"lang-xml\">&lt;PackageTargetFallback Condition=&quot;&#39;$(TargetFramework)&#39;==&#39;netcoreapp1.0&#39;&quot;&gt;\n    $(PackageTargetFallback);portable-net45+win8+wpa81+wp8\n&lt;/PackageTargetFallback &gt;\n</code></pre><h2 id=\"nuget-metadata-properties\">NuGet metadata properties</h2>\n<p>With the move to MSbuild, we have moved the input metadata that is used when packing a NuGet package from <em>project.json</em> to <em>.csproj</em> files. The inputs are MSBuild properties so they have to go within a <code>&lt;PropertyGroup&gt;</code> group. The following is the list of properties that are used as inputs to the packing process when using the <code>dotnet pack</code> command or the <code>Pack</code> MSBuild target that is part of the SDK. </p>\n<h3 id=\"ispackable\">IsPackable</h3>\n<p>A Boolean value that specifies whether the project can be packed. The default value is <code>true</code>. </p>\n<h3 id=\"packageversion\">PackageVersion</h3>\n<p>Specifies the version that the resulting package will have. Accepts all forms of NuGet version string. Default is the value of <code>$(Version)</code>, that is, of the property <code>Version</code> in the project. </p>\n<h3 id=\"packageid\">PackageId</h3>\n<p>Specifies the name for the resulting package. If not specified, the <code>pack</code> operation will default to using the <code>AssemblyName</code> or directory name as the name of the package. </p>\n<h3 id=\"title\">Title</h3>\n<p>A human-friendly title of the package, typically used in UI displays as on nuget.org and the Package Manager in Visual Studio. If not specified, the package ID is used instead.</p>\n<h3 id=\"authors\">Authors</h3>\n<p>A semicolon-separated list of packages authors, matching the profile names on nuget.org. These are displayed in the NuGet Gallery on nuget.org and are used to cross-reference packages by the same authors.</p>\n<h3 id=\"description\">Description</h3>\n<p>A long description of the package for UI display.</p>\n<h3 id=\"copyright\">Copyright</h3>\n<p>Copyright details for the package.</p>\n<h3 id=\"packagerequirelicenseacceptance\">PackageRequireLicenseAcceptance</h3>\n<p>A Boolean value that specifies whether the client must prompt the consumer to accept the package license before installing the package. The default is <code>false</code>.</p>\n<h3 id=\"packagelicenseurl\">PackageLicenseUrl</h3>\n<p>An URL to the license that is applicable to the package.</p>\n<h3 id=\"packageprojecturl\">PackageProjectUrl</h3>\n<p>A URL for the package&#39;s home page, often shown in UI displays as well as nuget.org.</p>\n<h3 id=\"packageiconurl\">PackageIconUrl</h3>\n<p>A URL for a 64x64 image with transparent background to use as the icon for the package in UI display.</p>\n<h3 id=\"packagereleasenotes\">PackageReleaseNotes</h3>\n<p>Release notes for the package.</p>\n<h3 id=\"packagetags\">PackageTags</h3>\n<p>A semicolon-delimited list of tags that designates the package.</p>\n<h3 id=\"packageoutputpath\">PackageOutputPath</h3>\n<p>Determines the output path in which the packed package will be dropped. Default is <code>$(OutputPath)</code>. </p>\n<h3 id=\"includesymbols\">IncludeSymbols</h3>\n<p>This Boolean value indicates whether the package should create an additional symbols package when the project is packed. This package will have a <em>.symbols.nupkg</em> extension and will copy the PDB files along with the DLL and other output files.</p>\n<h3 id=\"includesource\">IncludeSource</h3>\n<p>This Boolean value indicates whether the pack process should create a source package. The source package contains the library&#39;s source code as well as PDB files. Source files are put under the <code>src/ProjectName</code> directory in the resulting package file. </p>\n<h3 id=\"istool\">IsTool</h3>\n<p>Specifies whether all output files are copied to the <em>tools</em> folder instead of the <em>lib</em> folder. Note that this is different from a <code>DotNetCliTool</code> which is specified by setting the <code>PackageType</code> in the <em>.csproj</em> file.</p>\n<h3 id=\"repositoryurl\">RepositoryUrl</h3>\n<p>Specifies the URL for the repository where the source code for the package resides and/or from which it&#39;s being built. </p>\n<h3 id=\"repositorytype\">RepositoryType</h3>\n<p>Specifies the type of the repository. Default is &quot;git&quot;. </p>\n<h3 id=\"nopackageanalysis\">NoPackageAnalysis</h3>\n<p>Specifies that pack should not run package analysis after building the package.</p>\n<h3 id=\"minclientversion\">MinClientVersion</h3>\n<p>Specifies the minimum version of the NuGet client that can install this package, enforced by nuget.exe and the Visual Studio Package Manager.</p>\n<h3 id=\"includebuildoutput\">IncludeBuildOutput</h3>\n<p>This Boolean values specifies whether the build output assemblies should be packed into the <em>.nupkg</em> file or not.</p>\n<h3 id=\"includecontentinpack\">IncludeContentInPack</h3>\n<p>This Boolean value specifies whether any items that have a type of <code>Content</code> will be included in the resulting package automatically. The default is <code>true</code>. </p>\n<h3 id=\"buildoutputtargetfolder\">BuildOutputTargetFolder</h3>\n<p>Specifies the folder where to place the output assemblies.. The output assemblies (and other output files) are copied into their respective framework folders.</p>\n<h3 id=\"contenttargetfolders\">ContentTargetFolders</h3>\n<p>This property specifies the default location of where all the content files should go if <code>PackagePath</code> is not specified for them. The default value is &quot;content;contentFiles&quot;.</p>\n<h3 id=\"nuspecfile\">NuspecFile</h3>\n<p>Relative or absolute path to the <em>.nuspec</em> file being used for packing. </p>\n<div class=\"NOTE\"><h5>Note</h5><p>If the <em>.nuspec</em> file is specified, it&#39;s used <strong>exclusively</strong> for packaging information and any information in the projects is not used. </p>\n</div>\n<h3 id=\"nuspecbasepath\">NuspecBasePath</h3>\n<p>Base path for the <em>.nuspec</em> file.</p>\n<h3 id=\"nuspecproperties\">NuspecProperties</h3>\n<p>Semicolon separated list of key=value pairs.</p>\n</div></div>","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"author\" content=\"blackdwarf\">\r\n<meta name=\"ms.author\" content=\"mairaw\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc1.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.devlang\" content=\"dotnet\">\r\n<meta name=\"ms.assetid\" content=\"bdc29497-64f2-4d11-a21b-4097e0bdf5c9\">\r\n<meta name=\"description\" content=\"Learn about the differences between existing and .NET Core csproj files\">\r\n<meta name=\"keywords\" content=\"reference, csproj, .NET Core\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"03/03/2017\">\r\n<meta name=\"ms.prod\" content=\".net-core\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2017-03-15 06:14 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/b4fb772973607b94e120377879a5dbdde2a25271/docs/core/tools/csproj.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/core/tools/csproj.md\">\r\n<meta name=\"document_id\" content=\"440a90c6-7397-3e6a-b2d8-efe9bcee50bc\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../toc1.json\">\r\n","rawMetadata":{"author":"blackdwarf","ms.author":"mairaw","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","title":"csproj reference | Microsoft Docs","ms.devlang":"dotnet","ms.assetid":"bdc29497-64f2-4d11-a21b-4097e0bdf5c9","description":"Learn about the differences between existing and .NET Core csproj files","keywords":"reference, csproj, .NET Core","ms.topic":"article","ms.date":"03/03/2017","ms.prod":".net-core","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"tompratt-AQ","author_email":"v-thprat@microsoft.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Added link to help define globs per issue 1610. (#1708)","commit_sha":"b4fb772973607b94e120377879a5dbdde2a25271","commit_date":"2017-03-14 16:31:17 -0700"},{"author_name":"mryanmurphy","author_email":"mryanmurphy@gmail.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Fix other typo instances","commit_sha":"0b6846fa0c879a52f494bea0391add053864cbd3","commit_date":"2017-03-10 12:59:35 -0500"},{"author_name":"mryanmurphy","author_email":"mryanmurphy@gmail.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"Fix DotNetCliToolReference casing","commit_sha":"6cb648c8b6149334e469afbd1cf375b6a4b180bd","commit_date":"2017-03-10 11:45:39 -0500"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":":boom: removing preview3 folder (#1650)","commit_sha":"c2722327c3ca213309cae5e0d0417b0f0e9ea514","commit_date":"2017-03-07 03:26:34 -0800"}],"updated_at":"2017-03-15 06:14 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/blackdwarf","display_name":"blackdwarf","id":"3115004"},"contributors":[{"profile_url":"https://github.com/blackdwarf","display_name":"blackdwarf"},{"profile_url":"https://github.com/tompratt-AQ","display_name":"tompratt-AQ","id":"26311438"},{"profile_url":"https://github.com/mryanmurphy","display_name":"mryanmurphy","id":"641427"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"}],"update_at":"3/15/2017"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/b4fb772973607b94e120377879a5dbdde2a25271/docs/core/tools/csproj.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/core/tools/csproj.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/core/tools/csproj.md","document_id":"440a90c6-7397-3e6a-b2d8-efe9bcee50bc","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/core/tools/csproj","toc_asset_id":"articles/toc.json","toc_rel":"../../toc.json","_op_ogTitle":"csproj reference","_op_displayDate":"2017-3-3","_op_displayDate_source":"2017-03-03T00:00:00Z","_op_wordCount":1801,"_op_rawTitle":"<h1 id=\"additions-to-the-csproj-format-for-net-core\" sourcefile=\"docs/core/tools/csproj.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Additions to the csproj format for .NET Core</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/core/tools/csproj","fileRelativePath":"articles/core/tools/csproj.html"},"themesRelativePathToOutputRoot":"_themes/"}