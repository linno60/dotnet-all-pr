{"content":"<div><div class=\"content\">\n<p>This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:</p>\n<ol>\n<li><a href=\"#migration-from-projectjson-to-csproj\" data-linktype=\"self-bookmark\">Migration from a valid latest schema of <em>project.json</em> to <em>csproj</em></a></li>\n<li><a href=\"#migration-from-dnx-to-csproj\" data-linktype=\"self-bookmark\">Migration from DNX to csproj</a></li>\n<li><a href=\"#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj\" data-linktype=\"self-bookmark\">Migration from RC3 and previous .NET Core csproj projects to the final format</a></li>\n</ol>\n<h2 id=\"migration-from-projectjson-to-csproj\">Migration from project.json to csproj</h2>\n<p>Migration from <em>project.json</em> to <em>.csproj</em> can be done using one of the following methods:</p>\n<ul>\n<li><a href=\"#visual-studio-2017\" data-linktype=\"self-bookmark\">Visual Studio 2017</a></li>\n<li><a href=\"#dotnet-migrate\" data-linktype=\"self-bookmark\">dotnet migrate command-line tool</a></li>\n</ul>\n<p>Both methods use the same underlying engine to migrate the projects, so the results will be the same for both. In most cases, using one of these two ways to migrate the <em>project.json</em> to <em>csproj</em> is the only thing that is needed and no further manual editing of the project file is necessary. The resulting <em>.csproj</em> file will be named the same as the containing directory name.</p>\n<h3 id=\"visual-studio-2017\">Visual Studio 2017</h3>\n<p>When you open a <em>.xproj</em> file or a solution file which references <em>.xproj</em> files, the <strong>One-way upgrade</strong> dialog appears. The dialog displays the projects to be migrated. \nIf you open a solution file, all the projects specified in the solution file will be listed. Review the list of projects to be migrated and select <strong>OK</strong>.</p>\n<p><img src=\"media/one-way-upgrade.jpg\" alt=\"One-way upgrade dialog showing the list of projects to be migrated\" data-linktype=\"relative-path\"></p>\n<p>Visual Studio will migrate the projects chosen automatically. When migrating a solution, if you don&#39;t choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.</p>\n<p>Files that were migrated (<em>project.json</em>, <em>global.json</em>, <em>.xproj</em> and solution file) will be moved to a <em>Backup</em> folder. The solution file that is migrated will be upgraded to Visual Studio 2017 and you won&#39;t be able to open that solution file in previous versions of Visual Studio. \nA file named <em>UpgradeLog.htm</em> is also saved and automatically opened that contains a migration report.</p>\n<div class=\"IMPORTANT\"><h5>Important</h5><p>The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.</p>\n</div>\n<h3 id=\"dotnet-migrate\">dotnet migrate</h3>\n<p>In the command-line scenario, you can use the <a href=\"../tools/dotnet-migrate\" data-linktype=\"relative-path\"><code>dotnet migrate</code></a> command. It will migrate a project, a solution or a set of folders in that order, depending on which ones were found. \nWhen you migrate a project, the project and all its dependencies are migrated.</p>\n<p>Files that were migrated (<em>project.json</em>, <em>global.json</em> and <em>.xproj</em>) will be moved to a <em>backup</em> folder.</p>\n<div class=\"NOTE\"><h5>Note</h5><p>If you are using VS Code, the <code>dotnet migrate</code> command will not modify VS Code-specific files such as <code>tasks.json</code>. These files need to be changed manually. \nThis is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio. </p>\n</div>\n<h3 id=\"common-issues\">Common issues</h3>\n<ul>\n<li>If you get an error: “No executable found matching command dotnet-migrate&quot;:</li>\n</ul>\n<p>Run <code>dotnet --version</code> to see which version you are using. <a href=\"../tools/dotnet-migrate\" data-linktype=\"relative-path\"><code>dotnet migrate</code></a> requires .NET Core CLI RC3 or higher.\nYou’ll get this error if you have a <em>global.json</em> file in the current or parent directory and the <code>sdk</code> version is set to an older version.</p>\n<h2 id=\"migration-from-dnx-to-csproj\">Migration from DNX to csproj</h2>\n<p>If you are still using DNX for .NET Core development, your migration process should be done in two stages:</p>\n<ol>\n<li>Use the <a href=\"from-dnx\" data-linktype=\"relative-path\">existing DNX migration guidance</a> to migrate from DNX to project-json enabled CLI.</li>\n<li>Follow the steps from the previous section to migrate from <em>project.json</em> to <em>.csproj</em>.  </li>\n</ol>\n<div class=\"NOTE\"><h5>Note</h5><p>DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI. </p>\n</div>\n<h2 id=\"migration-from-earlier-net-core-csproj-formats-to-rtm-csproj\">Migration from earlier .NET Core csproj formats to RTM csproj</h2>\n<p>The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling. There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file. The actual steps depend on the version of the project file you are migrating. The following is some guidance to consider based on the changes that happened between versions:</p>\n<ul>\n<li>Remove the tools version property from the <code>&lt;Project&gt;</code> element, if it exists. </li>\n<li>Remove the XML namespace (<code>xmlns</code>) from the <code>&lt;Project&gt;</code> element.</li>\n<li>If it doesn&#39;t exist, add the <code>Sdk</code> attribute to the <code>&lt;Project&gt;</code> element and set it to <code>Microsoft.NET.Sdk</code> or <code>Microsoft.NET.Sdk.Web</code>. This attribute specifies that the project uses the SDK to be used. <code>Microsoft.NET.Sdk.Web</code> is used for web apps.</li>\n<li>Remove the <code>&lt;Import Project=&quot;$(MSBuildExtensionsPath)\\$(MSBuildToolsVersion)\\Microsoft.Common.props&quot; /&gt;</code> and <code>&lt;Import Project=&quot;$(MSBuildToolsPath)\\Microsoft.CSharp.targets&quot; /&gt;</code> statements from the top and bottom of the project. These import statements are implied by the SDK, so there is no need for them to be in the project. </li>\n<li>If you have <code>Microsoft.NETCore.App</code> or <code>NETStandard.Library</code> <code>&lt;PackageReference&gt;</code> items in your project, you should remove them. These package references are <a href=\"https://aka.ms/sdkimplicitrefs\" data-linktype=\"external\">implied by the SDK</a>. </li>\n<li>Remove the <code>Microsoft.NET.Sdk</code> <code>&lt;PackageReference&gt;</code> element, if it exists. The SDK reference comes through the <code>Sdk</code> attribute on the <code>&lt;Project&gt;</code> element. </li>\n<li>Remove the <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\" data-linktype=\"external\">globs</a> that are <a href=\"../tools/csproj#default-compilation-includes-in-net-core-projects\" data-linktype=\"relative-path\">implied by the SDK</a>. Leaving these globs in your project will cause an error on build because compile items will be duplicated. </li>\n</ul>\n<p>After these steps your project should be fully compatible with the RTM .NET Core csproj format. </p>\n<p>For examples of before and after the migration from old csproj format to the new one, see the <a href=\"https://blogs.msdn.microsoft.com/dotnet/2016/12/12/updating-visual-studio-2017-rc-net-core-tooling-improvements/\" data-linktype=\"external\">Updating Visual Studio 2017 RC – .NET Core Tooling improvements</a> article on the .NET blog.</p>\n</div></div>","outputRootRelativePath":"../../../","pageMetadata":"<meta name=\"author\" content=\"blackdwarf\">\r\n<meta name=\"ms.author\" content=\"mairaw\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"/dotnet/toc2.json\">\r\n<meta name=\"ms.devlang\" content=\"dotnet\">\r\n<meta name=\"ms.assetid\" content=\"1feadf3d-3cfc-41dd-abb5-a4fc303a7b53\">\r\n<meta name=\"description\" content=\".NET Core project.json to csproj migration\">\r\n<meta name=\"keywords\" content=\".NET, .NET Core, .NET Core migration\">\r\n<meta name=\"ms.topic\" content=\"article\">\r\n<meta name=\"ms.date\" content=\"03/13/2017\">\r\n<meta name=\"ms.prod\" content=\".net-core\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"updated_at\" content=\"2017-03-15 06:14 PM\">\r\n<meta name=\"gitcommit\" content=\"https://github.com/dotnet/docs-internal/blob/b4fb772973607b94e120377879a5dbdde2a25271/docs/core/migration/index.md\">\r\n<meta name=\"original_content_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/docs/core/migration/index.md\">\r\n<meta name=\"document_id\" content=\"a08a8a09-964c-d255-ecd3-ab2a68853262\">\r\n<meta name=\"pagetype\" content=\"Conceptual\">\r\n<meta name=\"toc_rel\" content=\"../../toc2.json\">\r\n","rawMetadata":{"author":"blackdwarf","ms.author":"mairaw","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","title":".NET Core migration to the csproj format | Microsoft Docs","ms.devlang":"dotnet","ms.assetid":"1feadf3d-3cfc-41dd-abb5-a4fc303a7b53","description":".NET Core project.json to csproj migration","keywords":".NET, .NET Core, .NET Core migration","ms.topic":"article","ms.date":"03/13/2017","ms.prod":".net-core","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitCommitHistory":[{"author_name":"tompratt-AQ","author_email":"v-thprat@microsoft.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Added link to help define globs per issue 1610. (#1708)","commit_sha":"b4fb772973607b94e120377879a5dbdde2a25271","commit_date":"2017-03-14 16:31:17 -0700"},{"author_name":"Maira Wenzel","author_email":"mairaw@microsoft.com","committer_name":"Bill Wagner","comitter_email":"wiwagn@microsoft.com","message":"fixing broken anchor (#1661)","commit_sha":"f829714f545314daaa218b241008b5a2955ec589","commit_date":"2017-03-07 12:26:09 -0500"},{"author_name":"Bill Wagner","author_email":"wiwagn@microsoft.com","committer_name":"GitHub","comitter_email":"noreply@github.com","message":"fix two broken links. (#1657)","commit_sha":"99254f84873003496ee00214d55ff908f9fd47d3","commit_date":"2017-03-07 11:01:06 -0500"},{"author_name":"Zlatko Knezevic","author_email":"zlakne@microsoft.com","committer_name":"Maira Wenzel","comitter_email":"mairaw@microsoft.com","message":"Migration and build, publish & run fixes (#1592)","commit_sha":"f7add48704c4ab3247ca32e341fa70d6eef42d91","commit_date":"2017-03-07 04:37:26 -0800"}],"updated_at":"2017-03-15 06:14 PM","_op_gitContributorInformation":{"author":{"profile_url":"https://github.com/blackdwarf","display_name":"Zlatko Knezevic","id":"3115004"},"contributors":[{"profile_url":"https://github.com/blackdwarf","display_name":"Zlatko Knezevic"},{"profile_url":"https://github.com/tompratt-AQ","display_name":"tompratt-AQ","id":"26311438"},{"profile_url":"https://github.com/mairaw","display_name":"Maira Wenzel","id":"12971179"},{"profile_url":"https://github.com/BillWagner","display_name":"Bill Wagner","id":"493969"}],"update_at":"3/15/2017"},"gitcommit":"https://github.com/dotnet/docs-internal/blob/b4fb772973607b94e120377879a5dbdde2a25271/docs/core/migration/index.md","original_content_git_url":"https://github.com/dotnet/docs-internal/blob/master/docs/core/migration/index.md","open_to_public_contributors":false,"content_git_url":"https://github.com/dotnet/docs/blob/master/docs/core/migration/index.md","document_id":"a08a8a09-964c-d255-ecd3-ab2a68853262","layout":"Conceptual","pagetype":"Conceptual","canonical_url":"https://docs.microsoft.com/en-us/dotnet/articles/core/migration/index","toc_asset_id":"articles/toc.json","toc_rel":"../../toc.json","_op_ogTitle":".NET Core migration to the csproj format","_op_displayDate":"2017-3-13","_op_displayDate_source":"2017-03-13T00:00:00Z","_op_wordCount":850,"_op_rawTitle":"<h1 id=\"migrating-net-core-projects-to-the-csproj-format\" sourcefile=\"docs/core/migration/index.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Migrating .NET Core projects to the .csproj format</h1>","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/articles/core/migration/index","fileRelativePath":"articles/core/migration/index.html"},"themesRelativePathToOutputRoot":"_themes/"}