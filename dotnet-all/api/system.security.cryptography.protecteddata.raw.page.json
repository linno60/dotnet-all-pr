{"content":"\r\n  \r\n  <h1>\r\n    <span class=\"lang-csharp\">ProtectedData</span>\r\n    \t\t\t\tClass\r\n  </h1>\r\n  \r\n  <h2 class=\"hiddenAnchor\">Definition</h2>\r\n  \r\n  <div class=\"metadata\">\r\n  \r\n  \r\n  </div>\r\n  \r\n  <div class=\"summaryHolder\">\r\n  \t<div class=\"summary\">\r\n  \t\t<p>Provides methods for encrypting and decrypting data. This class cannot be inherited.</p>\n\r\n  \t</div>\r\n  </div><nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n    <h3>In this Article</h3>\r\n  </nav>\t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\">public static class ProtectedData</code></pre>\r\n  \r\n  \r\n  \r\n  \r\n  \t<dl class=\"attributeList stack\">\r\n  \t\t<dt>Inheritance</dt><dd>\r\n  \t\t<div class=\"pdlHolder\">\r\n  \t\t<div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a></span></div><span class=\"lang-csharp\">ProtectedData</span>\r\n  \t\t</div>\r\n  \t\t</dd>\r\n  \t</dl>\r\n  \r\n  \r\n  \r\n  \r\n  \t<h3 class=\"accented\">Inherited Members</h3>\r\n  \t<h4 class=\"accented\"></h4>\r\n  \t<div class=\"cdlHolder\">\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_\" data-linktype=\"relative-path\">Equals(Object)</a></span></div>\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_Equals_System_Object_System_Object_\" data-linktype=\"relative-path\">Equals(Object, Object)</a></span></div>\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_GetHashCode\" data-linktype=\"relative-path\">GetHashCode()</a></span></div>\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_GetType\" data-linktype=\"relative-path\">GetType()</a></span></div>\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_MemberwiseClone\" data-linktype=\"relative-path\">MemberwiseClone()</a></span></div>\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_ReferenceEquals_System_Object_System_Object_\" data-linktype=\"relative-path\">ReferenceEquals(Object, Object)</a></span></div>\r\n  \t\t\t<div class=\"cdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object#System_Object_ToString\" data-linktype=\"relative-path\">ToString()</a></span></div>\r\n  \t</div>\r\n  \r\n  \t<h2 class=\"accented\">Examples</h2>\r\n  \t<p>The following example shows how to use data protection.  </p>\n<pre><code class=\"lang-cs\" name=\"Cryptography.DataProtectionSample#1\">using System;\nusing System.Security.Cryptography;\n\npublic class DataProtectionSample\n{\n// Create byte array for additional entropy when using Protect method.\n\tstatic byte [] s_aditionalEntropy = { 9, 8, 7, 6, 5 };\n\n\tpublic static void Main()\n\t{\n// Create a simple byte array containing data to be encrypted.\n\t\t\nbyte [] secret = { 0, 1, 2, 3, 4, 1, 2, 3, 4 };\n\n//Encrypt the data.\n\t\tbyte [] encryptedSecret = Protect( secret );\n\t\tConsole.WriteLine(&quot;The encrypted byte array is:&quot;);\n\t\tPrintValues(encryptedSecret);\n\t\t\n// Decrypt the data and store in a byte array.\n\t\tbyte [] originalData = Unprotect( encryptedSecret );\n\t\tConsole.WriteLine(&quot;{0}The original data is:&quot;, Environment.NewLine);\n\t\tPrintValues(originalData);\n\n\t}\n\n\tpublic static byte [] Protect( byte [] data )\n\t{\n\t\ttry\n\t\t{\n\t\t\t// Encrypt the data using DataProtectionScope.CurrentUser. The result can be decrypted\n\t\t\t//  only by the same current user.\n\t\t\treturn ProtectedData.Protect( data, s_aditionalEntropy, DataProtectionScope.CurrentUser );\n\t\t} \n\t\tcatch (CryptographicException e)\n\t\t{\n\t\t\tConsole.WriteLine(&quot;Data was not encrypted. An error occurred.&quot;);\n\t\t\tConsole.WriteLine(e.ToString());\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic static byte [] Unprotect( byte [] data )\n\t{\n\t\ttry\n\t\t{\n\t\t\t//Decrypt the data using DataProtectionScope.CurrentUser.\n\t\t\treturn ProtectedData.Unprotect( data, s_aditionalEntropy, DataProtectionScope.CurrentUser );\n\t\t} \n\t\tcatch (CryptographicException e)\n\t\t{\n\t\t\tConsole.WriteLine(&quot;Data was not decrypted. An error occurred.&quot;);\n\t\t\tConsole.WriteLine(e.ToString());\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic static void PrintValues( Byte[] myArr )  \n\t{\n\t      foreach ( Byte i in myArr )  \n\t\t  \t{\n\t\t         Console.Write( &quot;\\t{0}&quot;, i );\n\t\t\t }\n      Console.WriteLine();\n\t }\n\n}\n</code></pre><pre><code class=\"lang-cpp\" name=\"Cryptography.DataProtectionSample#1\">#using &lt;System.Security.dll&gt;\n\nusing namespace System;\nusing namespace System::Security::Cryptography;\n\npublic ref class DataProtectionSample\n{\nprivate:\n\n   // Create byte array for additional entropy when using Protect method.\n   static array&lt;Byte&gt;^s_aditionalEntropy = {9,8,7,6,5};\n\npublic:\n   static void Main()\n   {\n      \n      // Create a simple byte array containing data to be encrypted.\n      array&lt;Byte&gt;^secret = {0,1,2,3,4,1,2,3,4};\n      \n      //Encrypt the data.\n      array&lt;Byte&gt;^encryptedSecret = Protect( secret );\n      Console::WriteLine( &quot;The encrypted byte array is:&quot; );\n      PrintValues( encryptedSecret );\n      \n      // Decrypt the data and store in a byte array.\n      array&lt;Byte&gt;^originalData = Unprotect( encryptedSecret );\n      Console::WriteLine( &quot;{0}The original data is:&quot;, Environment::NewLine );\n      PrintValues( originalData );\n   }\n\n   static array&lt;Byte&gt;^ Protect( array&lt;Byte&gt;^data )\n   {\n      try\n      {\n         \n         // Encrypt the data using DataProtectionScope.CurrentUser. The result can be decrypted\n         //  only by the same current user.\n         return ProtectedData::Protect( data, s_aditionalEntropy, DataProtectionScope::CurrentUser );\n      }\n      catch ( CryptographicException^ e ) \n      {\n         Console::WriteLine( &quot;Data was not encrypted. An error occurred.&quot; );\n         Console::WriteLine( e );\n         return nullptr;\n      }\n   }\n\n   static array&lt;Byte&gt;^ Unprotect( array&lt;Byte&gt;^data )\n   {\n      try\n      {\n         \n         //Decrypt the data using DataProtectionScope.CurrentUser.\n         return ProtectedData::Unprotect( data, s_aditionalEntropy, DataProtectionScope::CurrentUser );\n      }\n      catch ( CryptographicException^ e ) \n      {\n         Console::WriteLine( &quot;Data was not decrypted. An error occurred.&quot; );\n         Console::WriteLine( e );\n         return nullptr;\n      }\n   }\n\n   static void PrintValues( array&lt;Byte&gt;^myArr )\n   {\n      System::Collections::IEnumerator^ myEnum = myArr-&gt;GetEnumerator();\n      while ( myEnum-&gt;MoveNext() )\n      {\n         Byte i = safe_cast&lt;Byte&gt;(myEnum-&gt;Current);\n         Console::Write( &quot;\\t{0}&quot;, i );\n      }\n\n      Console::WriteLine();\n   }\n};\n\nint main()\n{\n   DataProtectionSample::Main();\n}\n</code></pre><pre><code class=\"lang-vb\" name=\"Cryptography.DataProtectionSample#1\">Imports System\nImports System.Security.Cryptography\n\n\n\nPublic Class DataProtectionSample\n    &#39; Create byte array for additional entropy when using Protect method.\n    Private Shared s_aditionalEntropy As Byte() = {9, 8, 7, 6, 5}\n\n\n    Public Shared Sub Main()\n        &#39; Create a simple byte array containing data to be encrypted.\n        Dim secret As Byte() = {0, 1, 2, 3, 4, 1, 2, 3, 4}\n\n        &#39;Encrypt the data.\n        Dim encryptedSecret As Byte() = Protect(secret)\n        Console.WriteLine(&quot;The encrypted byte array is:&quot;)\n        PrintValues(encryptedSecret)\n\n        &#39; Decrypt the data and store in a byte array.\n        Dim originalData As Byte() = Unprotect(encryptedSecret)\n        Console.WriteLine(&quot;{0}The original data is:&quot;, Environment.NewLine)\n        PrintValues(originalData)\n\n    End Sub\n\n\n    Public Shared Function Protect(ByVal data() As Byte) As Byte()\n        Try\n            &#39; Encrypt the data using DataProtectionScope.CurrentUser. The result can be decrypted\n            &#39;  only by the same current user.\n            Return ProtectedData.Protect(data, s_aditionalEntropy, DataProtectionScope.CurrentUser)\n        Catch e As CryptographicException\n            Console.WriteLine(&quot;Data was not encrypted. An error occurred.&quot;)\n            Console.WriteLine(e.ToString())\n            Return Nothing\n        End Try\n\n    End Function\n\n\n    Public Shared Function Unprotect(ByVal data() As Byte) As Byte()\n        Try\n            &#39;Decrypt the data using DataProtectionScope.CurrentUser.\n            Return ProtectedData.Unprotect(data, s_aditionalEntropy, DataProtectionScope.CurrentUser)\n        Catch e As CryptographicException\n            Console.WriteLine(&quot;Data was not decrypted. An error occurred.&quot;)\n            Console.WriteLine(e.ToString())\n            Return Nothing\n        End Try\n\n    End Function\n\n\n    Public Shared Sub PrintValues(ByVal myArr() As [Byte])\n        Dim i As [Byte]\n        For Each i In myArr\n            Console.Write(vbTab + &quot;{0}&quot;, i)\n        Next i\n        Console.WriteLine()\n\n    End Sub\nEnd Class\n</code></pre>\r\n  \r\n  \t<h2 class=\"accented\">Remarks</h2>\r\n  \t<p>This class provides access to the Data Protection API (DPAPI) available in Microsoft Windows 2000 and later operating systems. This is a service that is provided by the operating system and does not require additional libraries. It provides protection using the user or machine credentials to encrypt or decrypt data.  </p>\n<p> The class consists of two wrappers for the unmanaged DPAPI, [Protect(Byte[], Byte&lt;xref:System.Security.Cryptography.ProtectedData.Protect%2A&gt; and [Unprotect(Byte[], Byte&lt;xref:System.Security.Cryptography.ProtectedData.Unprotect%2A&gt;. These two methods can be used to encrypt and decrypt data such as passwords, keys, and connection strings.  </p>\n<p> If you use these methods during impersonation, you may receive the following error: &quot;Key not valid for use in specified state.&quot; This occurs because the DPAPI stores the key data in user profiles. If the profile is not loaded, DPAPI won’t be able to perform the decryption. To prevent this error, load the profile of the user you want to impersonate before calling either method. Using DPAPI with impersonation can incur significant complication and requires careful design choices.</p>\n\r\n  \r\n  \r\n  \t\t<section>\r\n  \t\t\t<h2 class=\"accented \">Methods\r\n  \t\t</h2>\r\n  \t\t\r\n  \t\t\t\t\t<div data-moniker=\" netframework-3.0 netframework-3.5-client netframework-3.5 netframework-4.0-client netframework-4.0 netframework-4.5.1 netframework-4.5.2 netframework-4.5 netframework-4.6.1 netframework-4.6.2 netframework-4.6\">\r\n  \t\t\r\n  \t\t\t\t<div class=\"memberNameHolder\" id=\"System_Security_Cryptography_ProtectedData_Protect_System_Byte___System_Byte___System_Security_Cryptography_DataProtectionScope_\">\r\n  \t\t\t\t\t<h3 class=\"accented\">\r\n  \t\t\t\t\t\t<span class=\"lang-csharp\">Protect(Byte[], Byte[], DataProtectionScope)</span>\r\n  \t\t\t\t\t</h3>\r\n  \t\t\t\t</div>\r\n  \t\t\r\n  \t\t\t\t<div class=\"memberInfo\">\r\n  \t\t\t\t\t<p>Encrypts the data in a specified byte array and returns a byte array that contains the encrypted data.</p>\n\r\n  \t\t\r\n  \t\t\t\t\t\t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\" dir=\"ltr\">public static byte[] Protect (byte[] userData, byte[] optionalEntropy, System.Security.Cryptography.DataProtectionScope scope);</code></pre>\r\n  \t\t\r\n  \t\t\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfoTitle stack\">Parameters</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t\t\t\t<dt>userData</dt>\r\n  \t\t\t\t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</span>\r\n  \t\t\t\t\t\t\t\t</dd>\r\n  \t\t\t\t\t\t\t</dl>\r\n  \t\t\t\t\t\t\t<p>A byte array that contains data to encrypt.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t\t\t\t<dt>optionalEntropy</dt>\r\n  \t\t\t\t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</span>\r\n  \t\t\t\t\t\t\t\t</dd>\r\n  \t\t\t\t\t\t\t</dl>\r\n  \t\t\t\t\t\t\t<p>An optional additional byte array used to increase the complexity of the encryption, or <code>null</code> for no additional complexity.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t\t\t\t<dt>scope</dt>\r\n  \t\t\t\t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.dataprotectionscope\" data-linktype=\"relative-path\">DataProtectionScope</a></span>\r\n  \t\t\t\t\t\t\t\t</dd>\r\n  \t\t\t\t\t\t\t</dl>\r\n  \t\t\t\t\t\t\t<p>One of the enumeration values that specifies the scope of encryption.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfoTitle stack\">Returns</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</span>\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t<p>A byte array representing the encrypted data.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\r\n  \t\t\r\n  \t\t\r\n  \t\t\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfoTitle stack\">Exceptions</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The <code>userData</code> parameter is <code>null</code>.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.cryptographicexception\" data-linktype=\"relative-path\">CryptographicException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The encryption failed.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.notsupportedexception\" data-linktype=\"relative-path\">NotSupportedException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The operating system does not support this method.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.outofmemoryexception\" data-linktype=\"relative-path\">OutOfMemoryException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The system ran out of memory while encrypting the data.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\r\n  \t\t\r\n  \t\t\t\t\t\t<h4 class=\"accented\">Remarks</h4>\r\n  \t\t\t\t\t\t<p>This method can be used to encrypt data such as passwords, keys, or connection strings. The <code>optionalEntropy</code> parameter enables you to add data to increase the complexity of the encryption; specify <code>null</code> for no additional complexity. If provided, this information must also be used when decrypting the data using the <a class=\"xref\" href=\"system.security.cryptography.protecteddata#System_Security_Cryptography_ProtectedData_Unprotect_\" data-linktype=\"relative-path\">Unprotect</a> method.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> If you use this method during impersonation, you may receive the following error: &quot;Key not valid for use in specified state.&quot; To prevent this error, load the profile of the user you want to impersonate before calling the method.</p>\n</div>\n\r\n  \t\t\r\n  \t\t\t\t</div>\r\n  \t\t\t</div>\r\n  \t\t\t\t\t<div data-moniker=\" netframework-3.0 netframework-3.5-client netframework-3.5 netframework-4.0-client netframework-4.0 netframework-4.5.1 netframework-4.5.2 netframework-4.5 netframework-4.6.1 netframework-4.6.2 netframework-4.6\">\r\n  \t\t\r\n  \t\t\t\t<div class=\"memberNameHolder\" id=\"System_Security_Cryptography_ProtectedData_Unprotect_System_Byte___System_Byte___System_Security_Cryptography_DataProtectionScope_\">\r\n  \t\t\t\t\t<h3 class=\"accented\">\r\n  \t\t\t\t\t\t<span class=\"lang-csharp\">Unprotect(Byte[], Byte[], DataProtectionScope)</span>\r\n  \t\t\t\t\t</h3>\r\n  \t\t\t\t</div>\r\n  \t\t\r\n  \t\t\t\t<div class=\"memberInfo\">\r\n  \t\t\t\t\t<p>Decrypts the data in a specified byte array and returns a byte array that contains the decrypted data.</p>\n\r\n  \t\t\r\n  \t\t\t\t\t\t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\" dir=\"ltr\">public static byte[] Unprotect (byte[] encryptedData, byte[] optionalEntropy, System.Security.Cryptography.DataProtectionScope scope);</code></pre>\r\n  \t\t\r\n  \t\t\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfoTitle stack\">Parameters</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t\t\t\t<dt>encryptedData</dt>\r\n  \t\t\t\t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</span>\r\n  \t\t\t\t\t\t\t\t</dd>\r\n  \t\t\t\t\t\t\t</dl>\r\n  \t\t\t\t\t\t\t<p>A byte array containing data encrypted using the <span class=\"xref\">stem.Security.Cryptography.ProtectedData.Protect*</span> method.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t\t\t\t<dt>optionalEntropy</dt>\r\n  \t\t\t\t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</span>\r\n  \t\t\t\t\t\t\t\t</dd>\r\n  \t\t\t\t\t\t\t</dl>\r\n  \t\t\t\t\t\t\t<p>An optional additional byte array that was used to encrypt the data, or <code>null</code> if the additional byte array was not used.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t\t\t\t<dt>scope</dt>\r\n  \t\t\t\t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.dataprotectionscope\" data-linktype=\"relative-path\">DataProtectionScope</a></span>\r\n  \t\t\t\t\t\t\t\t</dd>\r\n  \t\t\t\t\t\t\t</dl>\r\n  \t\t\t\t\t\t\t<p>One of the enumeration values that specifies the scope of data protection that was used to encrypt the data.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfoTitle stack\">Returns</div>\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.byte\" data-linktype=\"relative-path\">Byte</a>[]</span>\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t<p>A byte array representing the decrypted data.</p>\n\r\n  \t\t\t\t\t\t\t</div>\r\n  \t\t\r\n  \t\t\r\n  \t\t\r\n  \t\t\r\n  \t\t\t\t\t\t\t<div class=\"propertyInfoTitle stack\">Exceptions</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.argumentnullexception\" data-linktype=\"relative-path\">ArgumentNullException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The <code>encryptedData</code> parameter is <code>null</code>.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.security.cryptography.cryptographicexception\" data-linktype=\"relative-path\">CryptographicException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The decryption failed.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.notsupportedexception\" data-linktype=\"relative-path\">NotSupportedException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>The operating system does not support this method.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t\t\t\t\t<div class=\"subtle\">\r\n  \t\t\t\t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"system.outofmemoryexception\" data-linktype=\"relative-path\">OutOfMemoryException</a></span>\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\t\t\t\t\t\t<p>Out of memory.</p>\n\r\n  \t\t\t\t\t\t\t\t</div>\r\n  \t\t\r\n  \t\t\r\n  \t\t\t\t\t\t<h4 class=\"accented\">Remarks</h4>\r\n  \t\t\t\t\t\t<p>This method can be used to unprotect data that was encrypted using the <a class=\"xref\" href=\"system.security.cryptography.protecteddata#System_Security_Cryptography_ProtectedData_Protect_\" data-linktype=\"relative-path\">Protect</a> method. If the <code>optionalEntropy</code> parameter was used during encryption, it must be supplied to unencrypt the data.  </p>\n<div class=\"NOTE\"><h5>Note</h5><p> If you use this method during impersonation, you may receive the following error: &quot;Key not valid for use in specified state.&quot; To prevent this error, load the profile of the user you want to impersonate before calling the method.</p>\n</div>\n\r\n  \t\t\r\n  \t\t\t\t</div>\r\n  \t\t\t</div>\r\n  \t\t\r\n  \t\t</section>\r\n  \r\n  \r\n","outputRootRelativePath":"../","pageMetadata":"<meta name=\"author\" content=\"dotnet-bot\">\r\n<meta name=\"ms.author\" content=\"dotnetcontent\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc2.json\">\r\n<meta name=\"ms.topic\" content=\"managed-reference\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/api/System.Security.Cryptography.ProtectedData.yml\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.ProtectedData\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.ProtectedData.Protect\">\r\n<meta name=\"APIName\" content=\"System.Security.Cryptography.ProtectedData.Unprotect\">\r\n<meta name=\"APILocation\" content=\"System.Security.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-28 03:03 AM\">\r\n<meta name=\"document_id\" content=\"2912d795-d02c-8d27-e2ad-feba9f3ac484\">\r\n<meta name=\"internalonly\" content=\"false\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Provides methods for encrypting and decrypting data. This class cannot be inherited.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/system.security.cryptography/toc2.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.Security.Cryptography.ProtectedData\">\r\n","rawMetadata":{"author":"dotnet-bot","ms.author":"dotnetcontent","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","ms.topic":"managed-reference","ms.prod":".net","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitRefSkeletonCommitHistory":[],"original_ref_skeleton_git_url":"https://github.com/dotnet/docs-internal/blob/master/api/System.Security.Cryptography.ProtectedData.yml","open_to_public_contributors":false,"api_name":["System.Security.Cryptography.ProtectedData","System.Security.Cryptography.ProtectedData.Protect","System.Security.Cryptography.ProtectedData.Unprotect"],"api_location":["System.Security.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.Security.Cryptography.ProtectedData","System::Security::Cryptography::ProtectedData","System.Security.Cryptography.ProtectedData.Protect","System::Security::Cryptography::ProtectedData::Protect","System.Security.Cryptography.ProtectedData.Unprotect","System::Security::Cryptography::ProtectedData::Unprotect"],"dev_langs":["csharp"],"updated_at":"2017-03-28 03:03 AM","document_id":"2912d795-d02c-8d27-e2ad-feba9f3ac484","content_git_url":"https://github.com/dotnet/docs/blob/master/xml/System.Security.Cryptography/ProtectedData.xml","internalonly":false,"layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"ProtectedData class | Microsoft Docs","_op_ogTitle":"ProtectedData class","description":"Provides methods for encrypting and decrypting data. This class cannot be inherited.\n","toc_asset_id":"api/_splitted/System.Security.Cryptography/toc.json","toc_rel":"_splitted/System.Security.Cryptography/toc.json","source_url":"","ms.assetid":"System.Security.Cryptography.ProtectedData","canonical_url":"https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.protecteddata","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.protecteddata","fileRelativePath":"api/System.Security.Cryptography.ProtectedData.html"},"themesRelativePathToOutputRoot":"_themes/"}