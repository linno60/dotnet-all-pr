{"content":"\r\n  \r\n  <h1>\r\n    <span class=\"lang-csharp\">CacheItemRemovedCallback</span>\r\n      Delegate\r\n  </h1>\r\n  \r\n  <h2 class=\"hiddenAnchor\">Definition</h2>\r\n  \r\n  <div class=\"metadata\">\r\n  \r\n  \r\n  </div>\r\n  \r\n  <div class=\"summaryHolder\">\r\n  \t<div class=\"summary\">\r\n  \t\t<p>Defines a callback method for notifying applications when a cached item is removed from the <a class=\"xref\" href=\"system.web.caching.cache\" data-linktype=\"relative-path\">Cache</a>.</p>\n\r\n  \t</div>\r\n  </div><nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n    <h3>In this Article</h3>\r\n  </nav>\t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\">public delegate void CacheItemRemovedCallback(string key, object value, CacheItemRemovedReason reason);</code></pre>\r\n  \r\n  \r\n  \r\n  \r\n  \t<dl class=\"attributeList stack\">\r\n  \t\t<dt>Inheritance</dt><dd>\r\n  \t\t<div class=\"pdlHolder\">\r\n  \t\t<div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a></span></div><div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.delegate\" data-linktype=\"relative-path\">Delegate</a></span></div><span class=\"lang-csharp\">CacheItemRemovedCallback</span>\r\n  \t\t</div>\r\n  \t\t</dd>\r\n  \t</dl>\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \t<h2 class=\"accented\">Examples</h2>\r\n  \t<p>The following code example demonstrates a page that shows users the value assigned to an item in the cache and then notifies them when the item is removed from the cache. It creates a <code>RemovedCallback</code> method, which uses the signature of the CacheItemRemovedCallback delegate, to notify users when the cache item is removed and uses the <a class=\"xref\" href=\"system.web.caching.cacheitemremovedreason\" data-linktype=\"relative-path\">CacheItemRemovedReason</a> enumeration to tell them why it was removed. In addition, it uses the <a class=\"xref\" href=\"system.web.caching.cache#System_Web_Caching_Cache_Item_\" data-linktype=\"relative-path\">Item</a> property to add objects to the cache and retrieve the value of those objects. In the <code>AddItemToCache</code> method, it uses the <a class=\"xref\" href=\"system.web.caching.cache#System_Web_Caching_Cache_Add_\" data-linktype=\"relative-path\">Add</a> method to add an item to the cache. To use the CacheItemRemovedCallback delegate, you must add an item to the cache with this method or the <a class=\"xref\" href=\"system.web.caching.cache#System_Web_Caching_Cache_Insert_\" data-linktype=\"relative-path\">Insert</a> method so that that ASP.NET can automatically make the proper method calls when the item is removed. The custom <code>RemoveItemFromCache</code> method uses the <a class=\"xref\" href=\"system.web.caching.cache#System_Web_Caching_Cache_Remove_\" data-linktype=\"relative-path\">Remove</a> method to explicitly delete the item from the cache, causing the <code>RemovedCallback</code> method to be invoked.  </p>\n<pre><code class=\"lang-cs\" name=\"System.Web.Caching Examples#1\">&lt;html&gt;\n &lt;Script runat=server language=&quot;C#&quot;&gt;\n    static bool itemRemoved = false;\n    static CacheItemRemovedReason reason;\n    CacheItemRemovedCallback onRemove = null;\n\n    public void RemovedCallback(String k, Object v, CacheItemRemovedReason r){\n      itemRemoved = true;\n      reason = r;\n    }\n\n    public void AddItemToCache(Object sender, EventArgs e) {\n        itemRemoved = false;\n\n        onRemove = new CacheItemRemovedCallback(this.RemovedCallback);\n\n        if (Cache[&quot;Key1&quot;] == null)\n          Cache.Add(&quot;Key1&quot;, &quot;Value 1&quot;, null, DateTime.Now.AddSeconds(60), Cache.NoSlidingExpiration, CacheItemPriority.High, onRemove);\n    }\n\n    public void RemoveItemFromCache(Object sender, EventArgs e) {\n        if(Cache[&quot;Key1&quot;] != null)\n          Cache.Remove(&quot;Key1&quot;);\n    }\n &lt;/Script&gt;\n &lt;body&gt;\n  &lt;Form runat=&quot;server&quot;&gt;\n   &lt;input type=submit OnServerClick=&quot;AddItemToCache&quot; value=&quot;Add Item To Cache&quot; runat=&quot;server&quot;/&gt;\n   &lt;input type=submit OnServerClick=&quot;RemoveItemFromCache&quot; value=&quot;Remove Item From Cache&quot; runat=&quot;server&quot;/&gt;\n  &lt;/Form&gt;\n  &lt;% if (itemRemoved) {\n        Response.Write(&quot;RemovedCallback event raised.&quot;);\n        Response.Write(&quot;&lt;BR&gt;&quot;);\n        Response.Write(&quot;Reason: &lt;B&gt;&quot; + reason.ToString() + &quot;&lt;/B&gt;&quot;);\n     }\n     else {\n        Response.Write(&quot;Value of cache key: &lt;B&gt;&quot; + Server.HtmlEncode(Cache[&quot;Key1&quot;] as string) + &quot;&lt;/B&gt;&quot;);\n     }\n  %&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre><pre><code class=\"lang-vb\" name=\"System.Web.Caching Examples#1\">&lt;%@ Page Language=&quot;VB&quot; %&gt;\n\n&lt;html&gt;\n &lt;Script runat=server&gt;\n    Shared itemRemoved As boolean = false\n    Shared reason As CacheItemRemovedReason\n    Dim onRemove As CacheItemRemovedCallback\n\n    Public Sub RemovedCallback(k As String, v As Object, r As CacheItemRemovedReason)\n      itemRemoved = true\n      reason = r\n    End Sub\n\n    Public Sub AddItemToCache(sender As Object, e As EventArgs)\n        itemRemoved = false\n\n        onRemove = New CacheItemRemovedCallback(AddressOf Me.RemovedCallback)\n\n        If (IsNothing(Cache(&quot;Key1&quot;))) Then\n          Cache.Add(&quot;Key1&quot;, &quot;Value 1&quot;, Nothing, DateTime.Now.AddSeconds(60), Cache.NoSlidingExpiration, CacheItemPriority.High, onRemove)\n        End If\n    End Sub\n\n    Public Sub RemoveItemFromCache(sender As Object, e As EventArgs)\n        If (Not IsNothing(Cache(&quot;Key1&quot;))) Then\n          Cache.Remove(&quot;Key1&quot;)\n        End If\n    End Sub\n &lt;/Script&gt;\n\n &lt;body&gt;\n  &lt;Form runat=&quot;server&quot;&gt;\n    &lt;input type=submit OnServerClick=&quot;AddItemToCache&quot; value=&quot;Add Item To Cache&quot; runat=&quot;server&quot;/&gt;\n    &lt;input type=submit OnServerClick=&quot;RemoveItemFromCache&quot; value=&quot;Remove Item From Cache&quot; runat=&quot;server&quot;/&gt;\n  &lt;/Form&gt;\n&lt;%\nIf (itemRemoved) Then\n    Response.Write(&quot;RemovedCallback event raised.&quot;)\n    Response.Write(&quot;&lt;BR&gt;&quot;)\n    Response.Write(&quot;Reason: &lt;B&gt;&quot; + reason.ToString() + &quot;&lt;/B&gt;&quot;)\nElse\n    Response.Write(&quot;Value of cache key: &lt;B&gt;&quot; + Server.HtmlEncode(CType(Cache(&quot;Key1&quot;),String)) + &quot;&lt;/B&gt;&quot;)\nEnd If\n%&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n","outputRootRelativePath":"../","pageMetadata":"<meta name=\"author\" content=\"dotnet-bot\">\r\n<meta name=\"ms.author\" content=\"dotnetcontent\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc2.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.topic\" content=\"managed-reference\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"uhfHeaderId\" content=\"MSDocsHeader-DotNet\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/api/System.Web.Caching.CacheItemRemovedCallback.yml\">\r\n<meta name=\"APIName\" content=\"System.Web.Caching.CacheItemRemovedCallback\">\r\n<meta name=\"APIName\" content=\"System.Web.Caching.CacheItemRemovedCallback..ctor\">\r\n<meta name=\"APIName\" content=\"System.Web.Caching.CacheItemRemovedCallback.Invoke\">\r\n<meta name=\"APIName\" content=\"System.Web.Caching.CacheItemRemovedCallback.BeginInvoke\">\r\n<meta name=\"APIName\" content=\"System.Web.Caching.CacheItemRemovedCallback.EndInvoke\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-04-01 05:59 PM\">\r\n<meta name=\"document_id\" content=\"7efc1528-5d6a-fc8a-f18c-41c52ed7354d\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Defines a callback method for notifying applications when a cached item is removed from the .\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/system.web.caching/toc2.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"System.Web.Caching.CacheItemRemovedCallback\">\r\n","rawMetadata":{"author":"dotnet-bot","ms.author":"dotnetcontent","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","ms.topic":"managed-reference","ms.prod":".net","uhfHeaderId":"MSDocsHeader-DotNet","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitRefSkeletonCommitHistory":[],"original_ref_skeleton_git_url":"https://github.com/dotnet/docs-internal/blob/master/api/System.Web.Caching.CacheItemRemovedCallback.yml","open_to_public_contributors":false,"api_name":["System.Web.Caching.CacheItemRemovedCallback","System.Web.Caching.CacheItemRemovedCallback..ctor","System.Web.Caching.CacheItemRemovedCallback.Invoke","System.Web.Caching.CacheItemRemovedCallback.BeginInvoke","System.Web.Caching.CacheItemRemovedCallback.EndInvoke"],"api_location":[],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.Web.Caching.CacheItemRemovedCallback","System::Web::Caching::CacheItemRemovedCallback"],"dev_langs":["csharp"],"updated_at":"2017-04-01 05:59 PM","document_id":"7efc1528-5d6a-fc8a-f18c-41c52ed7354d","content_git_url":"https://github.com/dotnet/docs-internal/blob/master/xml/System.Web.Caching/CacheItemRemovedCallback.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"CacheItemRemovedCallback delegate | Microsoft Docs","_op_ogTitle":"CacheItemRemovedCallback delegate","description":"Defines a callback method for notifying applications when a cached item is removed from the .\n","toc_asset_id":"api/_splitted/System.Web.Caching/toc.json","toc_rel":"_splitted/System.Web.Caching/toc.json","source_url":"","ms.assetid":"System.Web.Caching.CacheItemRemovedCallback","canonical_url":"https://docs.microsoft.com/en-us/dotnet/api/system.web.caching.cacheitemremovedcallback","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/api/system.web.caching.cacheitemremovedcallback","fileRelativePath":"api/System.Web.Caching.CacheItemRemovedCallback.html"},"themesRelativePathToOutputRoot":"_themes/"}