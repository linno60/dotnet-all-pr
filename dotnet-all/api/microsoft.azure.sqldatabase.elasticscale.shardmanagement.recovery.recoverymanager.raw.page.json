{"content":"\r\n  \r\n  <h1>\r\n    <span class=\"lang-csharp\">RecoveryManager</span>\r\n    \t\t\t\tClass\r\n  </h1>\r\n  \r\n  <h2 class=\"hiddenAnchor\">Definition</h2>\r\n  \r\n  <div class=\"metadata\">\r\n  \r\n  \r\n  </div>\r\n  \r\n  <div class=\"summaryHolder\">\r\n  \t<div class=\"summary\">\r\n  \t\t<p>Manages various recovery related tasks for a shard map manager. It helps \n            resolving data corruption issues between shard map information stored\n            locally on the shards and in the global shard map manager database. \n            It also helps with certain &#39;oops&#39; recovery scenarios where reconstruction\n            of shard maps from database backups or database copies is necessary.</p>\n\r\n  \t</div>\r\n  </div><nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n    <h3>In this Article</h3>\r\n  </nav>\t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\">public sealed class RecoveryManager</code></pre>\r\n  \r\n  \r\n  \r\n  \r\n  \t<dl class=\"attributeList stack\">\r\n  \t\t<dt>Inheritance</dt><dd>\r\n  \t\t<div class=\"pdlHolder\">\r\n  \t\t<div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.object(v=vs.110).aspx\" data-linktype=\"external\">Object</a></span></div><span class=\"lang-csharp\">RecoveryManager</span>\r\n  \t\t</div>\r\n  \t\t</dd>\r\n  \t</dl>\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \t<h2 class=\"accented\">Remarks</h2>\r\n  \t<p>Note that some of the recovery methods can cause unrecoverable data loss when not used \n            properly. It is recommend to take backups or copies of all databases that participate \n            in recovery operations.</p>\n\r\n  \r\n  \t\t\r\n  \t\t\t<h2 class=\"accented \">Methods\r\n  \t\t</h2>\r\n  \t\t\t<table class=\"nameValue\">\r\n  \t\t\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.attachshard#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_AttachShard_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_\" data-linktype=\"relative-path\">AttachShard(ShardLocation)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Attaches a shard to the shard map manager. Earlier versions\n            of mappings for the same shard map will automatically be updated \n            if more recent versions are found on the shard to be attached.\n            After attaching a shard, <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>\n            should be called to check for any inconsistencies that warrant\n            manual conflict resolution.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.attachshard#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_AttachShard_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">AttachShard(ShardLocation, String)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Attaches a shard to the shard map manager. Earlier versions\n            of mappings for the same shard map will automatically be updated \n            if more recent versions are found on the shard to be attached.\n            Shard location will be upgraded to latest version of local store as part of this operation.\n            After attaching a shard, <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>\n            should be called to check for any inconsistencies that warrant\n            manual conflict resolution.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detachshard#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetachShard_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_\" data-linktype=\"relative-path\">DetachShard(ShardLocation)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Detaches the given shard from the shard map manager. Mappings pointing to the \n            shard to be deleted will automatically be removed by this method.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detachshard#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetachShard_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetachShard(ShardLocation, String)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Detaches the given shard from the shard map manager. Mappings pointing to the \n            shard to be deleted will automatically be removed by this method.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Enumerates differences in the mappings between the global shard map manager database and the local shard \n            database in the specified shard location.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Enumerates differences in the mappings between the global shard map manager database and the local shard \n            database in the specified shard location.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_\" data-linktype=\"relative-path\">GetMappingDifferences(RecoveryToken)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Returns a dictionary of range-to-location key-value pairs. The location returned is an enumerator stating \n            whether a given range (or point) is present only in the local shard map, only in the global shard map, or both. \n            Ranges not contained in either shard map cannot contain differences so those ranges are not shown.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getshardinfo#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetShardInfo_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardMapType__System_String__Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation__\" data-linktype=\"relative-path\">GetShardInfo(RecoveryToken, ShardMapType, String, ShardLocation)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Retrieves shard map type, name and shard location based on the token returned from <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getshardinfo#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetShardInfo_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardMapType__System_String__\" data-linktype=\"relative-path\">GetShardInfo(RecoveryToken, ShardMapType, String)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Retrieves shard map type and name based on the token returned from <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getshardlocation#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetShardLocation_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_\" data-linktype=\"relative-path\">GetShardLocation(RecoveryToken)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Returns the shard location of the local shard map processed by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getshardmapname#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetShardMapName_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_\" data-linktype=\"relative-path\">GetShardMapName(RecoveryToken)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Returns the shard map name of the shard map processed by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getshardmaptype#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetShardMapType_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_\" data-linktype=\"relative-path\">GetShardMapType(RecoveryToken)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Returns the shard map type of the shard map processed by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshard#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_RebuildMappingsOnShard_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_System_Collections_Generic_IEnumerable_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardRange__\" data-linktype=\"relative-path\">RebuildMappingsOnShard(RecoveryToken, IEnumerable&lt;ShardRange&gt;)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Rebuilds a local range shard map from a list of inconsistent shard ranges\n             detected by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a> and then accessed by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_\" data-linktype=\"relative-path\">GetMappingDifferences(RecoveryToken)</a>.\n             The resulting local range shard map will always still be inconsistent with \n             the global shard map in the shard map manager database. A subsequent call to <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.resolvemappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_ResolveMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_MappingDifferenceResolution_\" data-linktype=\"relative-path\">ResolveMappingDifferences(RecoveryToken, MappingDifferenceResolution)</a>\n             is necessary to bring the system back to a healthy state.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshardmapmanagerfromshards#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_RebuildMappingsOnShardMapManagerFromShards_System_Collections_Generic_IEnumerable_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation__\" data-linktype=\"relative-path\">RebuildMappingsOnShardMapManagerFromShards(IEnumerable&lt;ShardLocation&gt;)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Given a collection of shard locations, reconstructs the shard map manager based on mapping information\n            stored in the individual shards. The specified\n            shards need to be registered already in the global shard map. This method only \n            rebuilds mappings. It does not rebuild shard membership within the global shard map.\n            If the information in the individual shard maps is or becomes inconsistent, the behavior is undefined.\n            No cross shard locks are taken, so if any shards become inconsistent during the execution of this\n            method, the final state of the global shard map may be corrupt.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshardmapmanagerfromshards#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_RebuildMappingsOnShardMapManagerFromShards_System_Collections_Generic_IEnumerable_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation__System_String_\" data-linktype=\"relative-path\">RebuildMappingsOnShardMapManagerFromShards(IEnumerable&lt;ShardLocation&gt;, String)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Given a collection of shard locations, reconstructs the shard map manager based on mapping information\n            stored in the individual shards. The specified\n            shards need to be registered already in the global shard map. This method only \n            rebuilds mappings. It does not rebuild shard membership within the global shard map.\n            If the information in the individual shard maps is or becomes inconsistent, the behavior is undefined.\n            No cross shard locks are taken, so if any shards become inconsistent during the execution of this\n            method, the final state of the global shard map may be corrupt.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshardsfromshardmapmanager#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_RebuildMappingsOnShardsFromShardMapManager_System_Collections_Generic_IEnumerable_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation__System_String_\" data-linktype=\"relative-path\">RebuildMappingsOnShardsFromShardMapManager(IEnumerable&lt;ShardLocation&gt;, String)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Given a collection of shard locations, reconstructs local shard maps based \n            on the mapping information stored in the global shard map. The specified\n            shards need to be registered already in the global shard map. This method only \n            rebuilds mappings. It does not rebuild shard membership within the global shard map.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshardsfromshardmapmanager#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_RebuildMappingsOnShardsFromShardMapManager_System_Collections_Generic_IEnumerable_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation__\" data-linktype=\"relative-path\">RebuildMappingsOnShardsFromShardMapManager(IEnumerable&lt;ShardLocation&gt;)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Given a collection of shard locations, reconstructs local shard maps based \n            on the mapping information stored in the global shard map. The specified\n            shards need to be registered already in the global shard map. This method only \n            rebuilds mappings. It does not rebuild shard membership within the global shard map.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t\t\t\t<tr data-moniker=\" 0\">\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.resolvemappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_ResolveMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_MappingDifferenceResolution_\" data-linktype=\"relative-path\">ResolveMappingDifferences(RecoveryToken, MappingDifferenceResolution)</a></span>\r\n  \t\t\t\t</td>\r\n  \t\t\t\t\t<td>\r\n  \t\t\t\t\t\t<p>Selects one of the shard maps (either local or global) as a source of truth and brings \n            mappings on both shard maps in sync.</p>\n\r\n  \t\t\t\t\t</td>\r\n  \t\t\t\t</tr>\r\n  \t\t</table>\r\n  \r\n  \r\n  \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"ms.devlang\" content=\"csharp\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"douge\">\r\n<meta name=\"manager\" content=\"douge\">\r\n<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc1.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"ms.date\" content=\"11/16/2016\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"azuredotnet\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"Azure\">\r\n<meta name=\"depot_name\" content=\"Azure.azuredotnet\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/Azure/azure-docs-sdk-dotnet/blob/master/docs-ref-from-xml/Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.yml\">\r\n<meta name=\"APIName\" content=\"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-04-01 08:50 AM\">\r\n<meta name=\"document_id\" content=\"1ba7f1af-7b2d-003f-6ae7-ff449c444a5a\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Manages various recovery related tasks for a shard map manager. It helps \n            resolving data corruption issues between shard map information stored\n            locally on the shards and in th…\">\r\n<meta name=\"toc_rel\" content=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager\">\r\n","rawMetadata":{"ms.devlang":"csharp","author":"erickson-doug","ms.author":"douge","manager":"douge","breadcrumb_path":"breadcrumb/toc.json","apiPlatform":"dotnet","_op_documentIdPathDepotMapping":{"./":{"folder_relative_path_in_docset":"api-index"},"breadcrumb/":{"folder_relative_path_in_docset":"breadcrumb"},"docs-ref-autogen/":{"folder_relative_path_in_docset":"docs-ref-autogen"},"docs-ref-manual/":{"folder_relative_path_in_docset":"docs-ref-manual"},"docs-ref-overwrite/":{"folder_relative_path_in_docset":"docs-ref-overwrite"},"scripts/":{"folder_relative_path_in_docset":"scripts"}},"ms.topic":"reference","ms.date":"11/16/2016","search.ms_sitename":"Docs","search.ms_docsetname":"azuredotnet","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet/api/","locale":"en-us","site_name":"Docs","search.ms_product":"Azure","_op_openToPublicContributors":false,"depot_name":"Azure.azuredotnet","_op_gitRefSkeletonCommitHistory":[],"original_ref_skeleton_git_url":"https://github.com/Azure/azure-docs-sdk-dotnet/blob/master/docs-ref-from-xml/Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.yml","open_to_public_contributors":false,"api_name":["Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager"],"api_location":[],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager","Microsoft::Azure::SqlDatabase::ElasticScale::ShardManagement::Recovery::RecoveryManager"],"dev_langs":["csharp"],"updated_at":"2017-04-01 08:50 AM","document_id":"1ba7f1af-7b2d-003f-6ae7-ff449c444a5a","content_git_url":"https://github.com/Azure/azure-docs-sdk-dotnet/blob/master/xml/Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery/RecoveryManager.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"RecoveryManager class | Microsoft Docs","_op_ogTitle":"RecoveryManager class","description":"Manages various recovery related tasks for a shard map manager. It helps \n            resolving data corruption issues between shard map information stored\n            locally on the shards and in th…","toc_asset_id":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery/toc.json","toc_rel":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery/toc.json","source_url":"","ms.assetid":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager","canonical_url":"https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager","_op_displayDate":"2016-11-16","_op_displayDate_source":"2016-11-16T00:00:00Z","_op_brand":"azure","_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager","fileRelativePath":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.html"},"themesRelativePathToOutputRoot":"_themes/"}