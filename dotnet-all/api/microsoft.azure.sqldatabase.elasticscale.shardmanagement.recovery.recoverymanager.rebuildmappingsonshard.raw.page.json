{"content":"\r\n  \r\n  \t<a id=\"Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_RebuildMappingsOnShard_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_System_Collections_Generic_IEnumerable_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardRange__\"></a>\r\n  \r\n  <h1>\r\n    <span class=\"lang-csharp\">RecoveryManager.RebuildMappingsOnShard</span>\r\n      Method\r\n  </h1>\r\n  \r\n  <h2 class=\"hiddenAnchor\">Definition</h2>\r\n  \r\n  <div class=\"metadata\">\r\n  \t\t<dl class=\"attributeList\">\r\n  \t\t\t<dt>Namespace:</dt>\t\r\n  \t\t\t\t<dd>\r\n  \t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery\" data-linktype=\"relative-path\">Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery</a></span>\r\n  \t\t\t\t</dd>\r\n  \t\t</dl>\r\n  \r\n  \t\t<dl class=\"attributeList\">\r\n  \t\t\t<dt>Assembly:</dt><dd>Microsoft.Azure.SqlDatabase.ElasticScale.Client.dll</dd>\r\n  \t\t</dl>\r\n  \r\n  </div>\r\n  \r\n  \r\n  <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n    <h3>In this Article</h3>\r\n  </nav>\r\n  \r\n  \t\r\n  \t<div data-moniker=\" azuresqldbelasticscaleclient-1.3.3\">\r\n  \t\t<div class=\"summaryHolder\">\r\n  \t\t\t<div class=\"summary\">\r\n  \t\t\t\t<p>Rebuilds a local range shard map from a list of inconsistent shard ranges\n             detected by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a> and then accessed by <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.getmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_GetMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_\" data-linktype=\"relative-path\">GetMappingDifferences(RecoveryToken)</a>.\n             The resulting local range shard map will always still be inconsistent with \n             the global shard map in the shard map manager database. A subsequent call to <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.resolvemappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_ResolveMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryToken_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_MappingDifferenceResolution_\" data-linktype=\"relative-path\">ResolveMappingDifferences(RecoveryToken, MappingDifferenceResolution)</a>\n             is necessary to bring the system back to a healthy state.</p>\n\r\n  \t\t\t</div>\r\n  \t\t</div>\r\n  \t\r\n  \t\t\t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\" dir=\"ltr\">public void RebuildMappingsOnShard (Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryToken token, System.Collections.Generic.IEnumerable&lt;Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardRange&gt; ranges);</code></pre>\r\n  \t\r\n  \t\r\n  \t\t\t\t<div class=\"propertyInfoTitle stack\">Parameters</div>\r\n  \t\t\t\t<div class=\"propertyInfo\">\r\n  \t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t<dt>token</dt>\r\n  \t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverytoken\" data-linktype=\"relative-path\">RecoveryToken</a></span>\r\n  \t\t\t\t\t</dd>\r\n  \t\t\t\t</dl>\r\n  \t\t\t\t<p>The recovery token from a previous call to <a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.detectmappingdifferences#Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_Recovery_RecoveryManager_DetectMappingDifferences_Microsoft_Azure_SqlDatabase_ElasticScale_ShardManagement_ShardLocation_System_String_\" data-linktype=\"relative-path\">DetectMappingDifferences(ShardLocation, String)</a>.</p>\n\r\n  \t\t\t\t</div>\r\n  \t\t\t\t<div class=\"propertyInfo stack\">\r\n  \t\t\t\t<dl class=\"parameterList\">\r\n  \t\t\t\t\t<dt>ranges</dt>\r\n  \t\t\t\t\t<dd>\r\n  \t\t\t\t\t\t\t<span class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/9eekhta0(v=vs.110).aspx\" data-linktype=\"external\">IEnumerable</a>&lt;<a class=\"xref\" href=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardrange\" data-linktype=\"relative-path\">ShardRange</a>&gt;</span>\r\n  \t\t\t\t\t</dd>\r\n  \t\t\t\t</dl>\r\n  \t\t\t\t<p>The set of ranges to keep on the local shard when rebuilding the local shard map.</p>\n\r\n  \t\t\t\t</div>\r\n  \t\r\n  \t\r\n  \t\r\n  \t\t\t\t<dl class=\"attributeList stack\">\r\n  \t\t\t\t\t<dt>Attributes</dt><dd>\r\n  \t\t\t\t\t<div class=\"cdlHolder\">\r\n  \t\t\t\t\t\t<span class=\"cdl\"><span class=\"xref\">System.Diagnostics.CodeAnalysis.SuppressMessage</span></span>\r\n  \t\t\t\t\t</div>\r\n  \t\t\t\t\t</dd>\r\n  \t\t\t\t</dl>\r\n  \t\r\n  \t\r\n  \t\r\n  \t\r\n  \t\t\t\t<h2 class=\"accented\">Remarks</h2>\r\n  \t\t\t<p>Note that this method can cause unrecoverable data loss. Make sure you have taken backups or copies \n             of your databases and only then proceed with great care.</p>\n<pre><code>         Only shard ranges with inconsistencies can be rebuilt using this method. All ranges with no inconsistencies between\n         the local shard and the global shard map will be kept intact on the local shard and are not affected by this call.\n         Subsequent changes to the non-conflicting mappings can be made later using the regular interfaces in the shard map manager. \n         It is not necessary to use the recovery manager to change non-conflicting mappings.\n</code></pre>\r\n  \t\r\n  \t\r\n  \t</div>","outputRootRelativePath":"./","pageMetadata":"<meta name=\"ms.devlang\" content=\"csharp\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"douge\">\r\n<meta name=\"manager\" content=\"douge\">\r\n<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc1.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"ms.date\" content=\"11/16/2016\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"azuredotnet\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"Azure\">\r\n<meta name=\"depot_name\" content=\"Azure.azuredotnet\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/Azure/azure-docs-sdk-dotnet/blob/master/docs-ref-from-xml/Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.yml\">\r\n<meta name=\"APIName\" content=\"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.RebuildMappingsOnShard\">\r\n<meta name=\"APILocation\" content=\"Microsoft.Azure.SqlDatabase.ElasticScale.Client.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-04-01 03:07 AM\">\r\n<meta name=\"document_id\" content=\"1ba7f1af-7b2d-003f-6ae7-ff449c444a5a\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"toc_rel\" content=\"microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.RebuildMappingsOnShard*\">\r\n","rawMetadata":{"ms.devlang":"csharp","author":"erickson-doug","ms.author":"douge","manager":"douge","breadcrumb_path":"breadcrumb/toc.json","apiPlatform":"dotnet","_op_documentIdPathDepotMapping":{"./":{"folder_relative_path_in_docset":"api-index"},"breadcrumb/":{"folder_relative_path_in_docset":"breadcrumb"},"docs-ref-autogen/":{"folder_relative_path_in_docset":"docs-ref-autogen"},"docs-ref-manual/":{"folder_relative_path_in_docset":"docs-ref-manual"},"docs-ref-overwrite/":{"folder_relative_path_in_docset":"docs-ref-overwrite"},"scripts/":{"folder_relative_path_in_docset":"scripts"}},"ms.topic":"reference","ms.date":"11/16/2016","search.ms_sitename":"Docs","search.ms_docsetname":"azuredotnet","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet/api/","locale":"en-us","site_name":"Docs","search.ms_product":"Azure","_op_openToPublicContributors":false,"depot_name":"Azure.azuredotnet","_op_gitRefSkeletonCommitHistory":[],"original_ref_skeleton_git_url":"https://github.com/Azure/azure-docs-sdk-dotnet/blob/master/docs-ref-from-xml/Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.yml","open_to_public_contributors":false,"api_name":["Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.RebuildMappingsOnShard"],"api_location":["Microsoft.Azure.SqlDatabase.ElasticScale.Client.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.RebuildMappingsOnShard","Microsoft::Azure::SqlDatabase::ElasticScale::ShardManagement::Recovery::RecoveryManager::RebuildMappingsOnShard"],"dev_langs":["csharp"],"updated_at":"2017-04-01 03:07 AM","document_id":"1ba7f1af-7b2d-003f-6ae7-ff449c444a5a","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"RebuildMappingsOnShard method | Microsoft Docs","_op_ogTitle":"RebuildMappingsOnShard method","toc_asset_id":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery/toc.json","toc_rel":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery/toc.json","content_git_url":"","source_url":"","ms.assetid":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.RebuildMappingsOnShard*","canonical_url":"https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshard","_op_displayDate":"2016-11-16","_op_displayDate_source":"2016-11-16T00:00:00Z","_op_brand":"azure","_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/api/microsoft.azure.sqldatabase.elasticscale.shardmanagement.recovery.recoverymanager.rebuildmappingsonshard","fileRelativePath":"Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.Recovery.RecoveryManager.RebuildMappingsOnShard.html"},"themesRelativePathToOutputRoot":"_themes/"}