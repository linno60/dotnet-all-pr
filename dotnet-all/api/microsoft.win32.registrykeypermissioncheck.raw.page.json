{"content":"\r\n  \r\n  <h1>\r\n    <span class=\"lang-csharp\">RegistryKeyPermissionCheck</span>\r\n      Enum\r\n  </h1>\r\n  \r\n  <h2 class=\"hiddenAnchor\">Definition</h2>\r\n  \r\n  <div class=\"metadata\">\r\n  \r\n  \r\n  </div>\r\n  \r\n  <div class=\"summaryHolder\">\r\n  \t<div class=\"summary\">\r\n  \t\t<p>Specifies whether security checks are performed when opening registry keys and accessing their name/value pairs.</p>\n\r\n  \t</div>\r\n  </div><nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n    <h3>In this Article</h3>\r\n  </nav>\r\n  \t<pre class=\"wrap loading\"><code class=\"csharp lang-csharp\">public enum RegistryKeyPermissionCheck</code></pre>\r\n  \r\n  \r\n  \r\n  \r\n  \t<dl class=\"attributeList stack\">\r\n  \t\t<dt>Inheritance</dt><dd>\r\n  \t\t<div class=\"pdlHolder\">\r\n  \t\t<div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.object\" data-linktype=\"relative-path\">Object</a></span></div><div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.valuetype\" data-linktype=\"relative-path\">ValueType</a></span></div><div class=\"pdl\"><span class=\"lang-csharp\"><a class=\"xref\" href=\"system.enum\" data-linktype=\"relative-path\">Enum</a></span></div><span class=\"lang-csharp\">RegistryKeyPermissionCheck</span>\r\n  \t\t</div>\r\n  \t\t</dd>\r\n  \t</dl>\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \t<h2 class=\"accented\">Examples</h2>\r\n  \t<p>The following code example creates a subkey containing 100 key/value pairs and closes it. The example opens the subkey with Default and records the time it takes to read all the values. Then the example opens the subkey with ReadSubTree and records the time it takes to read all the values. Finally, the example computes and displays the percentage improvement.  </p>\n<pre><code class=\"lang-cs\" name=\"RegistryKey.OpenSubKey_PermCheck#1\">using System;\nusing Microsoft.Win32;\nusing System.Diagnostics;\n\npublic class Example\n{\n    public static void Main()\n    {\n        const int LIMIT = 100;\n        RegistryKey cu = Registry.CurrentUser;\n        const string testKey = &quot;RegistryKeyPermissionCheckExample&quot;;\n\n        Console.WriteLine(&quot;Generating {0} key/value pairs.&quot;, LIMIT);\n        RegistryKey rk = cu.CreateSubKey(testKey);\n        for (int i = 0; i &lt; LIMIT; i++)\n        {\n            rk.SetValue(&quot;Key&quot; + i, i);\n        }\n\n        rk.Close();\n\n        Stopwatch s = new Stopwatch();\n\n        // On the default setting, security is checked every time\n        // a key/value pair is read.\n        rk = cu.OpenSubKey(testKey, RegistryKeyPermissionCheck.Default);\n        \n        s.Start();\n        for (int i = 0; i &lt; LIMIT; i++)\n        {\n            rk.GetValue(&quot;Key&quot; + i, i);\n        }\n        s.Stop();\n        rk.Close();\n        long delta1 = s.ElapsedTicks;\n\n        s.Reset();\n\n        // When the key is opened with ReadSubTree, security is \n        // not checked when the values are read.\n        rk = cu.OpenSubKey(testKey, RegistryKeyPermissionCheck.ReadSubTree);\n        \n        s.Start();\n        for (int i = 0; i &lt; LIMIT; i++)\n        {\n            rk.GetValue(&quot;Key&quot; + i, i);\n        }\n        s.Stop();\n        rk.Close();\n        long delta2 = s.ElapsedTicks;\n\n        double faster = (double) (delta1 - delta2) / (double) delta1;\n        Console.WriteLine(&quot;ReadSubTree is {0}% faster for {1} values.&quot;,\n            (faster * 100).ToString(&quot;0.0&quot;), LIMIT);\n\n        cu.DeleteSubKey(testKey);\n    }\n}\n\n/* This code example produces output similar to the following:\n\nGenerating 100 key/value pairs.\nReadSubTree is 23.4% faster for 100 values.\n */\n</code></pre><pre><code class=\"lang-vb\" name=\"RegistryKey.OpenSubKey_PermCheck#1\">Imports System\nImports Microsoft.Win32\nImports System.Diagnostics\n\nPublic Class Example\n    \n    Public Shared Sub Main() \n\n        Const LIMIT As Integer = 100\n        Dim cu As RegistryKey = Registry.CurrentUser\n        Const testKey As String = &quot;RegistryKeyPermissionCheckExample&quot;\n        \n        Console.WriteLine(&quot;Generating {0} key/value pairs.&quot;, LIMIT)\n        Dim rk As RegistryKey = cu.CreateSubKey(testKey)\n\n        For i As Integer = 0 To LIMIT\n            rk.SetValue(&quot;Key&quot; &amp; i, i)\n        Next i\n        \n        rk.Close()\n        \n        Dim s As New Stopwatch()\n        \n        &#39; On the default setting, security is checked every time\n        &#39; a key/value pair is read.\n        rk = cu.OpenSubKey(testKey, _\n            RegistryKeyPermissionCheck.Default)\n        \n        s.Start()\n        For i As Integer = 0 To LIMIT\n            rk.GetValue(&quot;Key&quot; &amp; i, i)\n        Next i\n        s.Stop()\n        rk.Close()\n        Dim delta1 As Long = s.ElapsedTicks\n        \n        s.Reset()\n        \n        &#39; When the key is opened with ReadSubTree, security is \n        &#39; not checked when the values are read.\n        rk = cu.OpenSubKey(testKey, _\n            RegistryKeyPermissionCheck.ReadSubTree)\n        \n        s.Start()\n        For i As Integer = 0 To LIMIT\n            rk.GetValue(&quot;Key&quot; &amp; i, i)\n        Next i\n        s.Stop()\n        rk.Close()\n        Dim delta2 As Long = s.ElapsedTicks\n        \n        Dim faster As Double = _\n            CDbl(delta1 - delta2) * 100.0 / CDbl(delta1)\n        Console.WriteLine(&quot;ReadSubTree is {0}% faster for {1} values.&quot;, _\n            faster.ToString(&quot;0.0&quot;), LIMIT)\n        \n        cu.DeleteSubKey(testKey)\n    \n    End Sub \nEnd Class \n\n&#39; This code example produces output similar to the following:\n&#39;\n&#39;Generating 100 key/value pairs.\n&#39;ReadSubTree is 23.4% faster for 100 values.\n&#39; \n</code></pre>\r\n  \r\n  \t<h2 class=\"accented\">Remarks</h2>\r\n  \t<p>When an application saves or retrieves a large number of registry settings from a set of subkeys, numerous redundant security checks are performed. This enumeration specifies when security checks on a key are to be omitted.  </p>\n<p> The following table shows when security checks are performed, based on the way the parent key and the current key are opened.  </p>\n<table>\n<thead>\n<tr>\n<th>Parent key opened with</th>\n<th>Current key opened with</th>\n<th>Result</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Default</td>\n<td>Default</td>\n<td>A security check is performed when accessing any value in the current key, or when attempting to access a subkey. This is the behavior in the .NET Framework versions 1.0 and 1.1.</td>\n</tr>\n<tr>\n<td>Default</td>\n<td>ReadSubTree</td>\n<td>A security check is performed when trying to open the current key.</td>\n</tr>\n<tr>\n<td>Default</td>\n<td>ReadWriteSubTree</td>\n<td>A security check is performed when trying to open the current key.</td>\n</tr>\n<tr>\n<td>ReadSubTree</td>\n<td>Default or ReadSubTree</td>\n<td>No security checks are performed when opening the current key or its values.</td>\n</tr>\n<tr>\n<td>ReadSubTree</td>\n<td>ReadWriteSubTree</td>\n<td>A security check is performed when trying to open the current key.</td>\n</tr>\n<tr>\n<td>ReadWriteSubTree</td>\n<td>Any</td>\n<td>No security checks are performed when opening the current key or its values.</td>\n</tr>\n</tbody>\n</table>\n\r\n  \r\n      \t<h2 class=\"accented\">Fields\r\n      </h2>\r\n      <table class=\"nameValue\">\r\n      \t<tr><td id=\"Microsoft_Win32_RegistryKeyPermissionCheck_Default\">\r\n      \t\t\t<span class=\"lang-csharp\">Default</span>\r\n      \t</td>\r\n      \t<td><p>The registry key inherits the mode of its parent. Security checks are performed when trying to access subkeys or values, unless the parent was opened with ReadSubTree or ReadWriteSubTree mode.</p>\n</td>\r\n      \t</tr>\r\n      \t<tr><td id=\"Microsoft_Win32_RegistryKeyPermissionCheck_ReadSubTree\">\r\n      \t\t\t<span class=\"lang-csharp\">ReadSubTree</span>\r\n      \t</td>\r\n      \t<td><p>Security checks are not performed when accessing subkeys or values. A security check is performed when trying to open the current key, unless the parent was opened with ReadSubTree or ReadWriteSubTree.</p>\n</td>\r\n      \t</tr>\r\n      \t<tr><td id=\"Microsoft_Win32_RegistryKeyPermissionCheck_ReadWriteSubTree\">\r\n      \t\t\t<span class=\"lang-csharp\">ReadWriteSubTree</span>\r\n      \t</td>\r\n      \t<td><p>Security checks are not performed when accessing subkeys or values. A security check is performed when trying to open the current key, unless the parent was opened with ReadWriteSubTree.</p>\n</td>\r\n      \t</tr>\r\n      </table>\r\n  \r\n  \r\n","outputRootRelativePath":"../","pageMetadata":"<meta name=\"author\" content=\"dotnet-bot\">\r\n<meta name=\"ms.author\" content=\"dotnetcontent\">\r\n<meta name=\"manager\" content=\"wpickett\">\r\n<meta name=\"breadcrumb_path\" content=\"../toc1.json\">\r\n<meta name=\"apiPlatform\" content=\"dotnet\">\r\n<meta name=\"ms.topic\" content=\"managed-reference\">\r\n<meta name=\"ms.prod\" content=\".net\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"docs-internal\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"MSDN\">\r\n<meta name=\"depot_name\" content=\"MSDN.docs-internal\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/dotnet/docs-internal/blob/master/api/Microsoft.Win32.RegistryKeyPermissionCheck.yml\">\r\n<meta name=\"APIName\" content=\"Microsoft.Win32.RegistryKeyPermissionCheck\">\r\n<meta name=\"APIName\" content=\"Microsoft.Win32.RegistryKeyPermissionCheck.Default\">\r\n<meta name=\"APIName\" content=\"Microsoft.Win32.RegistryKeyPermissionCheck.ReadSubTree\">\r\n<meta name=\"APIName\" content=\"Microsoft.Win32.RegistryKeyPermissionCheck.ReadWriteSubTree\">\r\n<meta name=\"APILocation\" content=\"mscorlib.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2017-03-31 02:21 PM\">\r\n<meta name=\"document_id\" content=\"b23d7828-c768-b883-55ec-11538d5d682b\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Specifies whether security checks are performed when opening registry keys and accessing their name/value pairs.\n\">\r\n<meta name=\"toc_rel\" content=\"_splitted/microsoft.win32/toc1.json\">\r\n<meta name=\"source_url\" content=\"\">\r\n<meta name=\"ms.assetid\" content=\"Microsoft.Win32.RegistryKeyPermissionCheck\">\r\n","rawMetadata":{"author":"dotnet-bot","ms.author":"dotnetcontent","manager":"wpickett","breadcrumb_path":"/dotnet/toc.json","apiPlatform":"dotnet","ms.topic":"managed-reference","ms.prod":".net","search.ms_sitename":"Docs","search.ms_docsetname":"docs-internal","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet-internal/","locale":"en-us","site_name":"Docs","search.ms_product":"MSDN","_op_openToPublicContributors":false,"depot_name":"MSDN.docs-internal","_op_gitRefSkeletonCommitHistory":[],"original_ref_skeleton_git_url":"https://github.com/dotnet/docs-internal/blob/master/api/Microsoft.Win32.RegistryKeyPermissionCheck.yml","open_to_public_contributors":false,"api_name":["Microsoft.Win32.RegistryKeyPermissionCheck","Microsoft.Win32.RegistryKeyPermissionCheck.Default","Microsoft.Win32.RegistryKeyPermissionCheck.ReadSubTree","Microsoft.Win32.RegistryKeyPermissionCheck.ReadWriteSubTree"],"api_location":["mscorlib.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["Microsoft.Win32.RegistryKeyPermissionCheck","Microsoft::Win32::RegistryKeyPermissionCheck","Microsoft.Win32.RegistryKeyPermissionCheck.Default","Microsoft::Win32::RegistryKeyPermissionCheck::Default","Microsoft.Win32.RegistryKeyPermissionCheck.ReadSubTree","Microsoft::Win32::RegistryKeyPermissionCheck::ReadSubTree","Microsoft.Win32.RegistryKeyPermissionCheck.ReadWriteSubTree","Microsoft::Win32::RegistryKeyPermissionCheck::ReadWriteSubTree"],"dev_langs":["csharp"],"updated_at":"2017-03-31 02:21 PM","document_id":"b23d7828-c768-b883-55ec-11538d5d682b","content_git_url":"https://github.com/dotnet/docs-internal/blob/master/xml/Microsoft.Win32/RegistryKeyPermissionCheck.xml","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"RegistryKeyPermissionCheck enum | Microsoft Docs","_op_ogTitle":"RegistryKeyPermissionCheck enum","description":"Specifies whether security checks are performed when opening registry keys and accessing their name/value pairs.\n","toc_asset_id":"api/_splitted/Microsoft.Win32/toc.json","toc_rel":"_splitted/Microsoft.Win32/toc.json","source_url":"","ms.assetid":"Microsoft.Win32.RegistryKeyPermissionCheck","canonical_url":"https://docs.microsoft.com/en-us/dotnet/api/microsoft.win32.registrykeypermissioncheck","_op_searchScope":[".NET"],"_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet/api/microsoft.win32.registrykeypermissioncheck","fileRelativePath":"api/Microsoft.Win32.RegistryKeyPermissionCheck.html"},"themesRelativePathToOutputRoot":"_themes/"}