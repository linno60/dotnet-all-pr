{"content":"    \r\n    <h1 id=\"System_Fabric_IStateProvider\">\r\n      <span class=\"lang-csharp\">IStateProvider</span>\r\n      <span class=\"lang-vb\">IStateProvider</span>\r\n        Interface\r\n    </h1>\r\n    \r\n    \r\n    <nav id=\"center-doc-outline\" class=\"doc-outline\" ms.cmpgrp=\"intopic toc\" role=\"navigation\" aria-label=\"On page navigation\">\r\n      <h3>In this Article</h3>\r\n    </nav><div class=\"summary\">\r\n    \t\t<div class=\"memberEditButton\">\r\n    \t\t\t<a href=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=14\" ms.cmpnm=\"editMember\" data-linktype=\"external\"><i class=\"icon icon-editor\"></i>Edit</a>\r\n    \t\t</div>\r\n    \t<p>Defines the behavior that a service must implement to interact with the <a class=\"xref\" href=\"system.fabric.fabricreplicator\" data-linktype=\"relative-path\">FabricReplicator</a>.</p>\n\r\n    </div><h2>Syntax</h2>\r\n    \r\n    \t<h3>Declaration</h3>\r\n    \t<pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">public interface IStateProvider</code><code class=\"vb lang-vb\">Public Interface IStateProvider</code></pre>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    <h2>Methods\r\n     summary</h2>\r\n    \r\n    <table class=\"nameValue\">\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Fabric_IStateProvider_GetCopyContext\" data-linktype=\"self-bookmark\">GetCopyContext()</a></div>\r\n            <div class=\"lang-vb\"><a href=\"#System_Fabric_IStateProvider_GetCopyContext\" data-linktype=\"self-bookmark\">GetCopyContext()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Obtains context on a Secondary replica after it is created and opened to send context to the Primary replica.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Fabric_IStateProvider_GetCopyState_System_Int64_System_Fabric_IOperationDataStream_\" data-linktype=\"self-bookmark\">GetCopyState(Int64, IOperationDataStream)</a></div>\r\n            <div class=\"lang-vb\"><a href=\"#System_Fabric_IStateProvider_GetCopyState_System_Int64_System_Fabric_IOperationDataStream_\" data-linktype=\"self-bookmark\">GetCopyState(Int64, IOperationDataStream)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Obtains state on a Primary replica that is required to build a Secondary replica.</p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Fabric_IStateProvider_GetLastCommittedSequenceNumber\" data-linktype=\"self-bookmark\">GetLastCommittedSequenceNumber()</a></div>\r\n            <div class=\"lang-vb\"><a href=\"#System_Fabric_IStateProvider_GetLastCommittedSequenceNumber\" data-linktype=\"self-bookmark\">GetLastCommittedSequenceNumber()</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Obtains the last sequence number that the service has committed. </p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Fabric_IStateProvider_OnDataLossAsync_System_Threading_CancellationToken_\" data-linktype=\"self-bookmark\">OnDataLossAsync(CancellationToken)</a></div>\r\n            <div class=\"lang-vb\"><a href=\"#System_Fabric_IStateProvider_OnDataLossAsync_System_Threading_CancellationToken_\" data-linktype=\"self-bookmark\">OnDataLossAsync(CancellationToken)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Indicates that a write quorum of replicas in this replica set  has been lost, and that therefore data loss might have occurred. \nThe replica set consists of a majority of replicas, which includes the Primary replica. </p>\n\r\n            </td>\r\n        </tr>\r\n        <tr class=\" enable-platform-filter\">\r\n          <td>\r\n            <div class=\"lang-csharp\"><a href=\"#System_Fabric_IStateProvider_UpdateEpochAsync_System_Fabric_Epoch_System_Int64_System_Threading_CancellationToken_\" data-linktype=\"self-bookmark\">UpdateEpochAsync(Epoch, Int64, CancellationToken)</a></div>\r\n            <div class=\"lang-vb\"><a href=\"#System_Fabric_IStateProvider_UpdateEpochAsync_System_Fabric_Epoch_System_Int64_System_Threading_CancellationToken_\" data-linktype=\"self-bookmark\">UpdateEpochAsync(Epoch, Int64, CancellationToken)</a></div>\r\n          </td>\r\n            <td>\r\n            <p>Indicates to a replica that the configuration of a replica set has changed due to a change or attempted change to the Primary replica. \nThe change occurs due to failure or load balancing of the previous Primary replica. Epoch changes act as a barrier by segmenting operations \ninto the exact configuration periods in which they were sent by a specific Primary replica.</p>\n\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <section class=\"memberGroup\">\r\n      <header class=\"header enable-platform-filter\" id=\"methods\">\r\n        <h2>Methods\r\n    </h2>\r\n      </header>\r\n    \r\n      <ul class=\"list-clean enable-platform-filter\">\r\n    \r\n        <li class=\" enable-platform-filter\" id=\"System_Fabric_IStateProvider_GetCopyContext\">\r\n    \r\n            <a id=\"System_Fabric_IStateProvider_GetCopyContext_\"></a>\r\n    \r\n            <div class=\"memberEditButton\">\r\n              <a href=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=92\" ms.cmpnm=\"editMember\" data-linktype=\"external\"><i class=\"icon icon-editor\"></i>Edit</a>\r\n            </div>\r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetCopyContext()</div>        \r\n            <div class=\"lang-vb\">GetCopyContext()</div>        \r\n          </div>\r\n    \r\n            <p>Obtains context on a Secondary replica after it is created and opened to send context to the Primary replica.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">IOperationDataStream GetCopyContext()</code><code class=\"vb lang-vb\">Function GetCopyContext As IOperationDataStream</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a></div>\r\n                      <div class=\"lang-vb\"><a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a></div>\r\n                  </div>\r\n                  <p>Returns <a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The Primary replica analyzes the context and sends back state via <a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyState_System_Int64_System_Fabric_IOperationDataStream_\" data-linktype=\"relative-path\">GetCopyState(Int64, IOperationDataStream)</a>.</p>\n<p>\n<a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyContext\" data-linktype=\"relative-path\">GetCopyContext()</a> is called on newly created, idle Secondary replicas and provides\na mechanism to asynchronously establish a bidirectional conversation with the Primary replica. The Secondary replica sends <a class=\"xref\" href=\"system.fabric.operationdata\" data-linktype=\"relative-path\">OperationData</a>\nobjects with which the Primary replica can determine the progress of collecting context on the Secondary replica. The Primary replica responds by sending the required state back.\nSee <a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyState_System_Int64_System_Fabric_IOperationDataStream_\" data-linktype=\"relative-path\">GetCopyState(Int64, IOperationDataStream)</a> at the Primary replica for the other half of the exchange. </p>\n<p>For in-memory services, the <a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyContext\" data-linktype=\"relative-path\">GetCopyContext()</a> method is not called, \nas the state of the Secondary replicas is known (they are empty and will require all of the state).</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Fabric_IStateProvider_GetCopyState_System_Int64_System_Fabric_IOperationDataStream_\">\r\n    \r\n            <a id=\"System_Fabric_IStateProvider_GetCopyState_\"></a>\r\n    \r\n            <div class=\"memberEditButton\">\r\n              <a href=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=116\" ms.cmpnm=\"editMember\" data-linktype=\"external\"><i class=\"icon icon-editor\"></i>Edit</a>\r\n            </div>\r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetCopyState(Int64, IOperationDataStream)</div>        \r\n            <div class=\"lang-vb\">GetCopyState(Int64, IOperationDataStream)</div>        \r\n          </div>\r\n    \r\n            <p>Obtains state on a Primary replica that is required to build a Secondary replica.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">IOperationDataStream GetCopyState(long upToSequenceNumber, IOperationDataStream copyContext)</code><code class=\"vb lang-vb\">Function GetCopyState(upToSequenceNumber As Long, copyContext As IOperationDataStream) As IOperationDataStream</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>upToSequenceNumber</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a></div>\r\n                    <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The maximum last sequence number (LSN) that should be placed in the copy stream via the <a class=\"xref\" href=\"system.fabric.istatereplicator#System_Fabric_IStateReplicator_GetCopyStream\" data-linktype=\"relative-path\">GetCopyStream()</a> method.\nLSNs greater than this number are delivered to the Secondary replica as a part of the replication stream via the <a class=\"xref\" href=\"system.fabric.istatereplicator#System_Fabric_IStateReplicator_GetReplicationStream\" data-linktype=\"relative-path\">GetReplicationStream()</a> method.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>copyContext</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a></div>\r\n                    <div class=\"lang-vb\"><a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>An <a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a> that contains the <a class=\"xref\" href=\"system.fabric.operationdata\" data-linktype=\"relative-path\">OperationData</a> objects that are created by the Secondary replica. </p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a></div>\r\n                      <div class=\"lang-vb\"><a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a></div>\r\n                  </div>\r\n                  <p>Returns <a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>Just as <a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyContext\" data-linktype=\"relative-path\">GetCopyContext()</a> enables the Secondary replica to send context to the Primary replica via\nan <a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a>, <a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyState_System_Int64_System_Fabric_IOperationDataStream_\" data-linktype=\"relative-path\">GetCopyState(Int64, IOperationDataStream)</a> enables the Primary replica to respond with an <a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a>. The stream contains objects that are delivered to the Secondary replica via the <a class=\"xref\" href=\"system.fabric.istatereplicator#System_Fabric_IStateReplicator_GetCopyStream\" data-linktype=\"relative-path\">GetCopyStream()</a> method of the <a class=\"xref\" href=\"system.fabric.fabricreplicator\" data-linktype=\"relative-path\">FabricReplicator</a> class. The objects implement <a class=\"xref\" href=\"system.fabric.ioperation\" data-linktype=\"relative-path\">IOperation</a> and contain the specified data. </p>\n<p> When the Primary replica receives this call, it should create and return another <a class=\"xref\" href=\"system.fabric.ioperationdatastream\" data-linktype=\"relative-path\">IOperationDataStream</a> \nthat contains <a class=\"xref\" href=\"system.fabric.operationdata\" data-linktype=\"relative-path\">OperationData</a>. <a class=\"xref\" href=\"system.fabric.operationdata\" data-linktype=\"relative-path\">OperationData</a> represents the data/state that the Secondary replica\nrequires to catch up to the provided <em>upToSequenceNumber</em> maximum LSN. \nHow much and which state has to be sent can be determined via the context information that the Secondary replica provides via \n<a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_GetCopyContext\" data-linktype=\"relative-path\">GetCopyContext()</a> method.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Fabric_IStateProvider_GetLastCommittedSequenceNumber\">\r\n    \r\n            <a id=\"System_Fabric_IStateProvider_GetLastCommittedSequenceNumber_\"></a>\r\n    \r\n            <div class=\"memberEditButton\">\r\n              <a href=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=22\" ms.cmpnm=\"editMember\" data-linktype=\"external\"><i class=\"icon icon-editor\"></i>Edit</a>\r\n            </div>\r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">GetLastCommittedSequenceNumber()</div>        \r\n            <div class=\"lang-vb\">GetLastCommittedSequenceNumber()</div>        \r\n          </div>\r\n    \r\n            <p>Obtains the last sequence number that the service has committed. </p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">long GetLastCommittedSequenceNumber()</code><code class=\"vb lang-vb\">Function GetLastCommittedSequenceNumber As Long</code></pre>\r\n    \r\n    \r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a></div>\r\n                      <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a></div>\r\n                  </div>\r\n                  <p>Returns <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Fabric_IStateProvider_OnDataLossAsync_System_Threading_CancellationToken_\">\r\n    \r\n            <a id=\"System_Fabric_IStateProvider_OnDataLossAsync_\"></a>\r\n    \r\n            <div class=\"memberEditButton\">\r\n              <a href=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=73\" ms.cmpnm=\"editMember\" data-linktype=\"external\"><i class=\"icon icon-editor\"></i>Edit</a>\r\n            </div>\r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">OnDataLossAsync(CancellationToken)</div>        \r\n            <div class=\"lang-vb\">OnDataLossAsync(CancellationToken)</div>        \r\n          </div>\r\n    \r\n            <p>Indicates that a write quorum of replicas in this replica set  has been lost, and that therefore data loss might have occurred. \nThe replica set consists of a majority of replicas, which includes the Primary replica. </p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">Task&lt;bool&gt; OnDataLossAsync(CancellationToken cancellationToken)</code><code class=\"vb lang-vb\">Function OnDataLossAsync(cancellationToken As CancellationToken) As Task(Of Boolean)</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>cancellationToken</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx\" data-linktype=\"external\">CancellationToken</a></div>\r\n                    <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx\" data-linktype=\"external\">CancellationToken</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx\" data-linktype=\"external\">CancellationToken</a> object that the operation is observing. \nIt can be used to send a notification that the operation should be canceled. Note that cancellation is advisory and that the operation might still be completed even if it is canceled.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/dd321424(v=vs.110).aspx\" data-linktype=\"external\">Task</a>&lt;<a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.boolean(v=vs.110).aspx\" data-linktype=\"external\">Boolean</a>&gt;</div>\r\n                      <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/dd321424(v=vs.110).aspx\" data-linktype=\"external\">Task</a>(Of <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.boolean(v=vs.110).aspx\" data-linktype=\"external\">Boolean</a>)</div>\r\n                  </div>\r\n                  <p>Returns <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/dd321424(v=vs.110).aspx\" data-linktype=\"external\">Task&lt;TResult&gt;</a> of type <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.boolean(v=vs.110).aspx\" data-linktype=\"external\">Boolean</a>, that indicates whether the state provider as part of processing this notification has changed its state</p>        \n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>When the Service Fabric runtime observes the failure of a quorum of replicas, which includes the Primary replica, \nit elects a new Primary replica and immediately calls this method on the new Primary replica. A Primary replica that is informed of possible data loss\ncan choose to restore its state from some external data source or can continue to run with the state that it currently has. If the service continues to run with its current state,\nit should return false from this method, which indicates that no state change has been made. If it has restored or altered its state,\nsuch as rolling back incomplete work, it should return true. If true is returned, then the state in other replicas must be assumed to be incorrect.\nTherefore, the Service Fabric runtime removes the other replicas from the replica set and recreates them.</p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n        <li class=\" enable-platform-filter\" id=\"System_Fabric_IStateProvider_UpdateEpochAsync_System_Fabric_Epoch_System_Int64_System_Threading_CancellationToken_\">\r\n    \r\n            <a id=\"System_Fabric_IStateProvider_UpdateEpochAsync_\"></a>\r\n    \r\n            <div class=\"memberEditButton\">\r\n              <a href=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=52\" ms.cmpnm=\"editMember\" data-linktype=\"external\"><i class=\"icon icon-editor\"></i>Edit</a>\r\n            </div>\r\n    \r\n          <div class=\"memberName\">\r\n            <div class=\"lang-csharp\">UpdateEpochAsync(Epoch, Int64, CancellationToken)</div>        \r\n            <div class=\"lang-vb\">UpdateEpochAsync(Epoch, Int64, CancellationToken)</div>        \r\n          </div>\r\n    \r\n            <p>Indicates to a replica that the configuration of a replica set has changed due to a change or attempted change to the Primary replica. \nThe change occurs due to failure or load balancing of the previous Primary replica. Epoch changes act as a barrier by segmenting operations \ninto the exact configuration periods in which they were sent by a specific Primary replica.</p>\n\r\n    \r\n            <pre class=\"memberDeclaration\"><code class=\"csharp lang-csharp\">Task UpdateEpochAsync(Epoch epoch, long previousEpochLastSequenceNumber, CancellationToken cancellationToken)</code><code class=\"vb lang-vb\">Function UpdateEpochAsync(epoch As Epoch, previousEpochLastSequenceNumber As Long, cancellationToken As CancellationToken) As Task</code></pre>\r\n    \r\n    \r\n              <h4>Parameters</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <dl>\r\n                  <dt>epoch</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"system.fabric.epoch\" data-linktype=\"relative-path\">Epoch</a></div>\r\n                    <div class=\"lang-vb\"><a class=\"xref\" href=\"system.fabric.epoch\" data-linktype=\"relative-path\">Epoch</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The new <a class=\"xref\" href=\"system.fabric.epoch\" data-linktype=\"relative-path\">Epoch</a>.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>previousEpochLastSequenceNumber</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a></div>\r\n                    <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.int64(v=vs.110).aspx\" data-linktype=\"external\">Int64</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p> The maximum sequence number (LSN) in the previous epoch.</p>\n\r\n                </li>\r\n                <li>\r\n                  <dl>\r\n                  <dt>cancellationToken</dt>\r\n                  <dd>\r\n                    <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx\" data-linktype=\"external\">CancellationToken</a></div>\r\n                    <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx\" data-linktype=\"external\">CancellationToken</a></div>\r\n                  </dd>\r\n                  </dl>\r\n                  <p>The <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx\" data-linktype=\"external\">CancellationToken</a> object that the operation is observing. It can be used to send a notification \nthat the operation should be canceled. Note that cancellation is advisory and that the operation might still be completed even if it is canceled.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n              <h4>Returns</h4>\r\n              <ul class=\"memberDetails\">\r\n                <li>\r\n                  <div class=\"single\">                \r\n                      <div class=\"lang-csharp\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.tasks.task(v=vs.110).aspx\" data-linktype=\"external\">Task</a></div>\r\n                      <div class=\"lang-vb\"><a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.tasks.task(v=vs.110).aspx\" data-linktype=\"external\">Task</a></div>\r\n                  </div>\r\n                  <p>Returns <a class=\"xref\" href=\"https://msdn.microsoft.com/en-us/library/system.threading.tasks.task(v=vs.110).aspx\" data-linktype=\"external\">Task</a>.</p>\n\r\n                </li>\r\n              </ul>\r\n    \r\n    \r\n    \r\n          \r\n    \r\n            <h4>Remarks</h4>\r\n            <p>The information in the <a class=\"xref\" href=\"system.fabric.istateprovider#System_Fabric_IStateProvider_UpdateEpochAsync_System_Fabric_Epoch_System_Int64_System_Threading_CancellationToken_\" data-linktype=\"relative-path\">UpdateEpochAsync(Epoch, Int64, CancellationToken)</a> \nmethod enables the service to maintain a progress vector, which is a list of each epoch that the replica has received, and the maximum LSN that they contained. </p>\n<p>\n    The progress vector data along with the current applied maximum LSN is useful for a Secondary replica to send during the copy operation to describe the state of the replica.</p> \n<p>\n    Comparing progress vectors that are received from Secondary replicas during the copy operation enables Primary replicas to determine whether the Secondary replica is up-to-date, \n    what state must be sent to the Secondary replica, and whether the Secondary replica has made false progress. </p>\n<p>False progress means that a secondary replica reports an LSN in a previous epoch was greater than the LSN that the Primary replica has in its progress vector. </p>\n\r\n    \r\n    \r\n    \r\n        </li>\r\n      </ul>\r\n    </section>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n      <h2>Details</h2>\r\n        <div class=\"lang-csharp lang-vb enable-lang-filter detailTile\">\r\n          <h4>Namespace</h4>    \r\n          <div>System.Fabric</div>\r\n        </div>\r\n        <div class=\"lang-csharp lang-vb enable-lang-filter detailTile\">\r\n          <h4>Assembly</h4>    \r\n          <div>System.Fabric.dll</div>\r\n        </div>\r\n    \r\n    \r\n","outputRootRelativePath":"./","pageMetadata":"<meta name=\"ms.devlang\" content=\"csharp\">\r\n<meta name=\"author\" content=\"erickson-doug\">\r\n<meta name=\"ms.author\" content=\"douge\">\r\n<meta name=\"manager\" content=\"douge\">\r\n<meta name=\"breadcrumb_path\" content=\"breadcrumb/toc.json\">\r\n<meta name=\"ms.topic\" content=\"reference\">\r\n<meta name=\"ms.service\" content=\"service-fabric\">\r\n<meta name=\"ms.date\" content=\"11/16/2016\">\r\n<meta name=\"search.ms_sitename\" content=\"Docs\">\r\n<meta name=\"search.ms_docsetname\" content=\"azuredotnet\">\r\n<meta name=\"version\" content=\"0\">\r\n<meta name=\"locale\" content=\"en-us\">\r\n<meta name=\"site_name\" content=\"Docs\">\r\n<meta name=\"search.ms_product\" content=\"Azure\">\r\n<meta name=\"depot_name\" content=\"Azure.azuredotnet\">\r\n<meta name=\"ref_skeleton_gitcommit\" content=\"https://github.com/Azure/azure-docs-sdk-dotnet/blob/8ece26063f2f27414f0bad873159ee6212f3448d/docs-ref-manual/Data/ServiceFabric/System.Fabric.IStateProvider.yml\">\r\n<meta name=\"original_ref_skeleton_git_url\" content=\"https://github.com/Azure/azure-docs-sdk-dotnet/blob/live/docs-ref-manual/Data/ServiceFabric/System.Fabric.IStateProvider.yml\">\r\n<meta name=\"APIName\" content=\"System.Fabric.IStateProvider\">\r\n<meta name=\"APIName\" content=\"System.Fabric.IStateProvider.GetLastCommittedSequenceNumber\">\r\n<meta name=\"APIName\" content=\"System.Fabric.IStateProvider.UpdateEpochAsync\">\r\n<meta name=\"APIName\" content=\"System.Fabric.IStateProvider.OnDataLossAsync\">\r\n<meta name=\"APIName\" content=\"System.Fabric.IStateProvider.GetCopyContext\">\r\n<meta name=\"APIName\" content=\"System.Fabric.IStateProvider.GetCopyState\">\r\n<meta name=\"APILocation\" content=\"System.Fabric.dll\">\r\n<meta name=\"TopicType\" content=\"apiref\">\r\n<meta name=\"APIType\" content=\"Assembly\">\r\n<meta name=\"updated_at\" content=\"2016-12-26 05:25 AM\">\r\n<meta name=\"document_id\" content=\"bb9c40e5-fd50-05d7-9d41-49837e5299e0\">\r\n<meta name=\"pagetype\" content=\"Reference\">\r\n<meta name=\"description\" content=\"Defines the behavior that a service must implement to interact with the .\n\">\r\n<meta name=\"toc_rel\" content=\"toc.json\">\r\n<meta name=\"source_url\" content=\"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&amp;version=GBdevelop&amp;line=15\">\r\n<meta name=\"ms.assetid\" content=\"System.Fabric.IStateProvider\">\r\n","rawMetadata":{"ms.devlang":"csharp","author":"erickson-doug","ms.author":"douge","manager":"douge","breadcrumb_path":"breadcrumb/toc.json","_op_documentIdPathDepotMapping":{"./":{"folder_relative_path_in_docset":"api-index"},"breadcrumb/":{"folder_relative_path_in_docset":"breadcrumb"},"docs-ref-autogen/":{"folder_relative_path_in_docset":"docs-ref-autogen"},"docs-ref-manual/":{"folder_relative_path_in_docset":"docs-ref-manual"},"docs-ref-overwrite/":{"folder_relative_path_in_docset":"docs-ref-overwrite"},"scripts/":{"folder_relative_path_in_docset":"scripts"}},"ms.topic":"reference","ms.service":"service-fabric","ms.date":"11/16/2016","search.ms_sitename":"Docs","search.ms_docsetname":"azuredotnet","version":0,"_op_canonicalUrlPrefix":"https://docs.microsoft.com/en-us/dotnet/api/","locale":"en-us","site_name":"Docs","search.ms_product":"Azure","_op_openToPublicContributors":false,"depot_name":"Azure.azuredotnet","_op_gitRefSkeletonCommitHistory":[{"author_name":"Qinen Zhu","author_email":"qinzhu@microsoft.com","committer_name":"Qinen Zhu","comitter_email":"qinzhu@microsoft.com","message":"Rename folder name","commit_sha":"8ece26063f2f27414f0bad873159ee6212f3448d","commit_date":"2016-12-19 15:23:17 +0800"}],"ref_skeleton_gitcommit":"https://github.com/Azure/azure-docs-sdk-dotnet/blob/8ece26063f2f27414f0bad873159ee6212f3448d/docs-ref-manual/Data/ServiceFabric/System.Fabric.IStateProvider.yml","original_ref_skeleton_git_url":"https://github.com/Azure/azure-docs-sdk-dotnet/blob/live/docs-ref-manual/Data/ServiceFabric/System.Fabric.IStateProvider.yml","open_to_public_contributors":false,"api_name":["System.Fabric.IStateProvider","System.Fabric.IStateProvider.GetLastCommittedSequenceNumber","System.Fabric.IStateProvider.UpdateEpochAsync","System.Fabric.IStateProvider.OnDataLossAsync","System.Fabric.IStateProvider.GetCopyContext","System.Fabric.IStateProvider.GetCopyState"],"api_location":["System.Fabric.dll"],"topic_type":["apiref"],"api_type":["Assembly"],"f1_keywords":["System.Fabric.IStateProvider","System::Fabric::IStateProvider","System.Fabric.IStateProvider.GetLastCommittedSequenceNumber","System::Fabric::IStateProvider::GetLastCommittedSequenceNumber","System.Fabric.IStateProvider.UpdateEpochAsync","System::Fabric::IStateProvider::UpdateEpochAsync","System.Fabric.IStateProvider.OnDataLossAsync","System::Fabric::IStateProvider::OnDataLossAsync","System.Fabric.IStateProvider.GetCopyContext","System::Fabric::IStateProvider::GetCopyContext","System.Fabric.IStateProvider.GetCopyState","System::Fabric::IStateProvider::GetCopyState"],"dev_langs":["csharp","vb"],"updated_at":"2016-12-26 05:25 AM","document_id":"bb9c40e5-fd50-05d7-9d41-49837e5299e0","layout":"Reference","_op_layout":"Reference","pagetype":"Reference","title":"IStateProvider interface | Microsoft Docs","_op_ogTitle":"IStateProvider interface","description":"Defines the behavior that a service must implement to interact with the .\n","toc_asset_id":"toc.json","toc_rel":"toc.json","content_git_url":"","source_url":"https://msazure.visualstudio.com/DefaultCollection/One/_git/WindowsFabric?path=src/prod/src/managed/Api/src/System/Fabric/IStateProvider.cs&version=GBdevelop&line=15","ms.assetid":"System.Fabric.IStateProvider","canonical_url":"https://docs.microsoft.com/en-us/dotnet-all/system.fabric.istateprovider","_op_displayDate":"2016-11-16","_op_displayDate_source":"2016-11-16T00:00:00Z","_op_brand":"azure","_op_canonicalUrl":"https://docs.microsoft.com/en-us/dotnet-all/system.fabric.istateprovider","fileRelativePath":"System.Fabric.IStateProvider.html"},"themesRelativePathToOutputRoot":"_themes/"}